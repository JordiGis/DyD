(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(a){if(a.ep)return;a.ep=!0;const r=n(a);fetch(a.href,r)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function fi(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const it={},No=[],_n=()=>{},Xf=()=>!1,Wa=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),pi=e=>e.startsWith("onUpdate:"),Lt=Object.assign,mi=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Gf=Object.prototype.hasOwnProperty,ot=(e,t)=>Gf.call(e,t),He=Array.isArray,Vo=e=>Ms(e)==="[object Map]",Qo=e=>Ms(e)==="[object Set]",nl=e=>Ms(e)==="[object Date]",Ve=e=>typeof e=="function",St=e=>typeof e=="string",$n=e=>typeof e=="symbol",lt=e=>e!==null&&typeof e=="object",xc=e=>(lt(e)||Ve(e))&&Ve(e.then)&&Ve(e.catch),_c=Object.prototype.toString,Ms=e=>_c.call(e),Jf=e=>Ms(e).slice(8,-1),kc=e=>Ms(e)==="[object Object]",hi=e=>St(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ps=fi(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ka=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Qf=/-(\w)/g,un=Ka(e=>e.replace(Qf,(t,n)=>n?n.toUpperCase():"")),Zf=/\B([A-Z])/g,so=Ka(e=>e.replace(Zf,"-$1").toLowerCase()),Ya=Ka(e=>e.charAt(0).toUpperCase()+e.slice(1)),hr=Ka(e=>e?`on${Ya(e)}`:""),no=(e,t)=>!Object.is(e,t),ca=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Sc=(e,t,n,o=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:o,value:n})},Ca=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let ol;const Xa=()=>ol||(ol=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function kn(e){if(He(e)){const t={};for(let n=0;n<e.length;n++){const o=e[n],a=St(o)?op(o):kn(o);if(a)for(const r in a)t[r]=a[r]}return t}else if(St(e)||lt(e))return e}const ep=/;(?![^(]*\))/g,tp=/:([^]+)/,np=/\/\*[^]*?\*\//g;function op(e){const t={};return e.replace(np,"").split(ep).forEach(n=>{if(n){const o=n.split(tp);o.length>1&&(t[o[0].trim()]=o[1].trim())}}),t}function rt(e){let t="";if(St(e))t=e;else if(He(e))for(let n=0;n<e.length;n++){const o=rt(e[n]);o&&(t+=o+" ")}else if(lt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const sp="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ap=fi(sp);function $c(e){return!!e||e===""}function rp(e,t){if(e.length!==t.length)return!1;let n=!0;for(let o=0;n&&o<e.length;o++)n=Ls(e[o],t[o]);return n}function Ls(e,t){if(e===t)return!0;let n=nl(e),o=nl(t);if(n||o)return n&&o?e.getTime()===t.getTime():!1;if(n=$n(e),o=$n(t),n||o)return e===t;if(n=He(e),o=He(t),n||o)return n&&o?rp(e,t):!1;if(n=lt(e),o=lt(t),n||o){if(!n||!o)return!1;const a=Object.keys(e).length,r=Object.keys(t).length;if(a!==r)return!1;for(const i in e){const l=e.hasOwnProperty(i),c=t.hasOwnProperty(i);if(l&&!c||!l&&c||!Ls(e[i],t[i]))return!1}}return String(e)===String(t)}function gi(e,t){return e.findIndex(n=>Ls(n,t))}const Ec=e=>!!(e&&e.__v_isRef===!0),W=e=>St(e)?e:e==null?"":He(e)||lt(e)&&(e.toString===_c||!Ve(e.toString))?Ec(e)?W(e.value):JSON.stringify(e,Dc,2):String(e),Dc=(e,t)=>Ec(t)?Dc(e,t.value):Vo(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[o,a],r)=>(n[gr(o,r)+" =>"]=a,n),{})}:Qo(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>gr(n))}:$n(t)?gr(t):lt(t)&&!He(t)&&!kc(t)?String(t):t,gr=(e,t="")=>{var n;return $n(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ut;class Tc{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ut,!t&&Ut&&(this.index=(Ut.scopes||(Ut.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Ut;try{return Ut=this,t()}finally{Ut=n}}}on(){Ut=this}off(){Ut=this.parent}stop(t){if(this._active){this._active=!1;let n,o;for(n=0,o=this.effects.length;n<o;n++)this.effects[n].stop();for(this.effects.length=0,n=0,o=this.cleanups.length;n<o;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,o=this.scopes.length;n<o;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0}}}function Ac(e){return new Tc(e)}function Ic(){return Ut}function ip(e,t=!1){Ut&&Ut.cleanups.push(e)}let ct;const vr=new WeakSet;class Rc{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ut&&Ut.active&&Ut.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,vr.has(this)&&(vr.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Hc(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,sl(this),Oc(this);const t=ct,n=hn;ct=this,hn=!0;try{return this.fn()}finally{Bc(this),ct=t,hn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)wi(t);this.deps=this.depsTail=void 0,sl(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?vr.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ur(this)&&this.run()}get dirty(){return Ur(this)}}let Pc=0,ms,hs;function Hc(e,t=!1){if(e.flags|=8,t){e.next=hs,hs=e;return}e.next=ms,ms=e}function vi(){Pc++}function bi(){if(--Pc>0)return;if(hs){let t=hs;for(hs=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;ms;){let t=ms;for(ms=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(o){e||(e=o)}t=n}}if(e)throw e}function Oc(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Bc(e){let t,n=e.depsTail,o=n;for(;o;){const a=o.prevDep;o.version===-1?(o===n&&(n=a),wi(o),lp(o)):t=o,o.dep.activeLink=o.prevActiveLink,o.prevActiveLink=void 0,o=a}e.deps=t,e.depsTail=n}function Ur(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Mc(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Mc(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Ts))return;e.globalVersion=Ts;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!Ur(e)){e.flags&=-3;return}const n=ct,o=hn;ct=e,hn=!0;try{Oc(e);const a=e.fn(e._value);(t.version===0||no(a,e._value))&&(e._value=a,t.version++)}catch(a){throw t.version++,a}finally{ct=n,hn=o,Bc(e),e.flags&=-3}}function wi(e,t=!1){const{dep:n,prevSub:o,nextSub:a}=e;if(o&&(o.nextSub=a,e.prevSub=void 0),a&&(a.prevSub=o,e.nextSub=void 0),n.subs===e&&(n.subs=o,!o&&n.computed)){n.computed.flags&=-5;for(let r=n.computed.deps;r;r=r.nextDep)wi(r,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function lp(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let hn=!0;const Lc=[];function ao(){Lc.push(hn),hn=!1}function ro(){const e=Lc.pop();hn=e===void 0?!0:e}function sl(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=ct;ct=void 0;try{t()}finally{ct=n}}}let Ts=0;class cp{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class yi{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!ct||!hn||ct===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==ct)n=this.activeLink=new cp(ct,this),ct.deps?(n.prevDep=ct.depsTail,ct.depsTail.nextDep=n,ct.depsTail=n):ct.deps=ct.depsTail=n,Nc(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const o=n.nextDep;o.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=o),n.prevDep=ct.depsTail,n.nextDep=void 0,ct.depsTail.nextDep=n,ct.depsTail=n,ct.deps===n&&(ct.deps=o)}return n}trigger(t){this.version++,Ts++,this.notify(t)}notify(t){vi();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{bi()}}}function Nc(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let o=t.deps;o;o=o.nextDep)Nc(o)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const xa=new WeakMap,bo=Symbol(""),zr=Symbol(""),As=Symbol("");function Bt(e,t,n){if(hn&&ct){let o=xa.get(e);o||xa.set(e,o=new Map);let a=o.get(n);a||(o.set(n,a=new yi),a.map=o,a.key=n),a.track()}}function Pn(e,t,n,o,a,r){const i=xa.get(e);if(!i){Ts++;return}const l=c=>{c&&c.trigger()};if(vi(),t==="clear")i.forEach(l);else{const c=He(e),u=c&&hi(n);if(c&&n==="length"){const p=Number(o);i.forEach((d,m)=>{(m==="length"||m===As||!$n(m)&&m>=p)&&l(d)})}else switch((n!==void 0||i.has(void 0))&&l(i.get(n)),u&&l(i.get(As)),t){case"add":c?u&&l(i.get("length")):(l(i.get(bo)),Vo(e)&&l(i.get(zr)));break;case"delete":c||(l(i.get(bo)),Vo(e)&&l(i.get(zr)));break;case"set":Vo(e)&&l(i.get(bo));break}}bi()}function up(e,t){const n=xa.get(e);return n&&n.get(t)}function Io(e){const t=Xe(e);return t===e?t:(Bt(t,"iterate",As),ln(e)?t:t.map(Mt))}function Ga(e){return Bt(e=Xe(e),"iterate",As),e}const dp={__proto__:null,[Symbol.iterator](){return br(this,Symbol.iterator,Mt)},concat(...e){return Io(this).concat(...e.map(t=>He(t)?Io(t):t))},entries(){return br(this,"entries",e=>(e[1]=Mt(e[1]),e))},every(e,t){return An(this,"every",e,t,void 0,arguments)},filter(e,t){return An(this,"filter",e,t,n=>n.map(Mt),arguments)},find(e,t){return An(this,"find",e,t,Mt,arguments)},findIndex(e,t){return An(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return An(this,"findLast",e,t,Mt,arguments)},findLastIndex(e,t){return An(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return An(this,"forEach",e,t,void 0,arguments)},includes(...e){return wr(this,"includes",e)},indexOf(...e){return wr(this,"indexOf",e)},join(e){return Io(this).join(e)},lastIndexOf(...e){return wr(this,"lastIndexOf",e)},map(e,t){return An(this,"map",e,t,void 0,arguments)},pop(){return as(this,"pop")},push(...e){return as(this,"push",e)},reduce(e,...t){return al(this,"reduce",e,t)},reduceRight(e,...t){return al(this,"reduceRight",e,t)},shift(){return as(this,"shift")},some(e,t){return An(this,"some",e,t,void 0,arguments)},splice(...e){return as(this,"splice",e)},toReversed(){return Io(this).toReversed()},toSorted(e){return Io(this).toSorted(e)},toSpliced(...e){return Io(this).toSpliced(...e)},unshift(...e){return as(this,"unshift",e)},values(){return br(this,"values",Mt)}};function br(e,t,n){const o=Ga(e),a=o[t]();return o!==e&&!ln(e)&&(a._next=a.next,a.next=()=>{const r=a._next();return r.value&&(r.value=n(r.value)),r}),a}const fp=Array.prototype;function An(e,t,n,o,a,r){const i=Ga(e),l=i!==e&&!ln(e),c=i[t];if(c!==fp[t]){const d=c.apply(e,r);return l?Mt(d):d}let u=n;i!==e&&(l?u=function(d,m){return n.call(this,Mt(d),m,e)}:n.length>2&&(u=function(d,m){return n.call(this,d,m,e)}));const p=c.call(i,u,o);return l&&a?a(p):p}function al(e,t,n,o){const a=Ga(e);let r=n;return a!==e&&(ln(e)?n.length>3&&(r=function(i,l,c){return n.call(this,i,l,c,e)}):r=function(i,l,c){return n.call(this,i,Mt(l),c,e)}),a[t](r,...o)}function wr(e,t,n){const o=Xe(e);Bt(o,"iterate",As);const a=o[t](...n);return(a===-1||a===!1)&&_i(n[0])?(n[0]=Xe(n[0]),o[t](...n)):a}function as(e,t,n=[]){ao(),vi();const o=Xe(e)[t].apply(e,n);return bi(),ro(),o}const pp=fi("__proto__,__v_isRef,__isVue"),Vc=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter($n));function mp(e){$n(e)||(e=String(e));const t=Xe(this);return Bt(t,"has",e),t.hasOwnProperty(e)}class jc{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,o){if(n==="__v_skip")return t.__v_skip;const a=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!a;if(n==="__v_isReadonly")return a;if(n==="__v_isShallow")return r;if(n==="__v_raw")return o===(a?r?kp:qc:r?zc:Uc).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(o)?t:void 0;const i=He(t);if(!a){let c;if(i&&(c=dp[n]))return c;if(n==="hasOwnProperty")return mp}const l=Reflect.get(t,n,gt(t)?t:o);return($n(n)?Vc.has(n):pp(n))||(a||Bt(t,"get",n),r)?l:gt(l)?i&&hi(n)?l:l.value:lt(l)?a?Kc(l):dn(l):l}}class Fc extends jc{constructor(t=!1){super(!1,t)}set(t,n,o,a){let r=t[n];if(!this._isShallow){const c=Co(r);if(!ln(o)&&!Co(o)&&(r=Xe(r),o=Xe(o)),!He(t)&&gt(r)&&!gt(o))return c?!1:(r.value=o,!0)}const i=He(t)&&hi(n)?Number(n)<t.length:ot(t,n),l=Reflect.set(t,n,o,gt(t)?t:a);return t===Xe(a)&&(i?no(o,r)&&Pn(t,"set",n,o):Pn(t,"add",n,o)),l}deleteProperty(t,n){const o=ot(t,n);t[n];const a=Reflect.deleteProperty(t,n);return a&&o&&Pn(t,"delete",n,void 0),a}has(t,n){const o=Reflect.has(t,n);return(!$n(n)||!Vc.has(n))&&Bt(t,"has",n),o}ownKeys(t){return Bt(t,"iterate",He(t)?"length":bo),Reflect.ownKeys(t)}}class hp extends jc{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const gp=new Fc,vp=new hp,bp=new Fc(!0);const qr=e=>e,Zs=e=>Reflect.getPrototypeOf(e);function wp(e,t,n){return function(...o){const a=this.__v_raw,r=Xe(a),i=Vo(r),l=e==="entries"||e===Symbol.iterator&&i,c=e==="keys"&&i,u=a[e](...o),p=n?qr:t?Wr:Mt;return!t&&Bt(r,"iterate",c?zr:bo),{next(){const{value:d,done:m}=u.next();return m?{value:d,done:m}:{value:l?[p(d[0]),p(d[1])]:p(d),done:m}},[Symbol.iterator](){return this}}}}function ea(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function yp(e,t){const n={get(a){const r=this.__v_raw,i=Xe(r),l=Xe(a);e||(no(a,l)&&Bt(i,"get",a),Bt(i,"get",l));const{has:c}=Zs(i),u=t?qr:e?Wr:Mt;if(c.call(i,a))return u(r.get(a));if(c.call(i,l))return u(r.get(l));r!==i&&r.get(a)},get size(){const a=this.__v_raw;return!e&&Bt(Xe(a),"iterate",bo),Reflect.get(a,"size",a)},has(a){const r=this.__v_raw,i=Xe(r),l=Xe(a);return e||(no(a,l)&&Bt(i,"has",a),Bt(i,"has",l)),a===l?r.has(a):r.has(a)||r.has(l)},forEach(a,r){const i=this,l=i.__v_raw,c=Xe(l),u=t?qr:e?Wr:Mt;return!e&&Bt(c,"iterate",bo),l.forEach((p,d)=>a.call(r,u(p),u(d),i))}};return Lt(n,e?{add:ea("add"),set:ea("set"),delete:ea("delete"),clear:ea("clear")}:{add(a){!t&&!ln(a)&&!Co(a)&&(a=Xe(a));const r=Xe(this);return Zs(r).has.call(r,a)||(r.add(a),Pn(r,"add",a,a)),this},set(a,r){!t&&!ln(r)&&!Co(r)&&(r=Xe(r));const i=Xe(this),{has:l,get:c}=Zs(i);let u=l.call(i,a);u||(a=Xe(a),u=l.call(i,a));const p=c.call(i,a);return i.set(a,r),u?no(r,p)&&Pn(i,"set",a,r):Pn(i,"add",a,r),this},delete(a){const r=Xe(this),{has:i,get:l}=Zs(r);let c=i.call(r,a);c||(a=Xe(a),c=i.call(r,a)),l&&l.call(r,a);const u=r.delete(a);return c&&Pn(r,"delete",a,void 0),u},clear(){const a=Xe(this),r=a.size!==0,i=a.clear();return r&&Pn(a,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(a=>{n[a]=wp(a,e,t)}),n}function Ci(e,t){const n=yp(e,t);return(o,a,r)=>a==="__v_isReactive"?!e:a==="__v_isReadonly"?e:a==="__v_raw"?o:Reflect.get(ot(n,a)&&a in o?n:o,a,r)}const Cp={get:Ci(!1,!1)},xp={get:Ci(!1,!0)},_p={get:Ci(!0,!1)};const Uc=new WeakMap,zc=new WeakMap,qc=new WeakMap,kp=new WeakMap;function Sp(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function $p(e){return e.__v_skip||!Object.isExtensible(e)?0:Sp(Jf(e))}function dn(e){return Co(e)?e:xi(e,!1,gp,Cp,Uc)}function Wc(e){return xi(e,!1,bp,xp,zc)}function Kc(e){return xi(e,!0,vp,_p,qc)}function xi(e,t,n,o,a){if(!lt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=a.get(e);if(r)return r;const i=$p(e);if(i===0)return e;const l=new Proxy(e,i===2?o:n);return a.set(e,l),l}function Bn(e){return Co(e)?Bn(e.__v_raw):!!(e&&e.__v_isReactive)}function Co(e){return!!(e&&e.__v_isReadonly)}function ln(e){return!!(e&&e.__v_isShallow)}function _i(e){return e?!!e.__v_raw:!1}function Xe(e){const t=e&&e.__v_raw;return t?Xe(t):e}function ki(e){return!ot(e,"__v_skip")&&Object.isExtensible(e)&&Sc(e,"__v_skip",!0),e}const Mt=e=>lt(e)?dn(e):e,Wr=e=>lt(e)?Kc(e):e;function gt(e){return e?e.__v_isRef===!0:!1}function pe(e){return Yc(e,!1)}function Ep(e){return Yc(e,!0)}function Yc(e,t){return gt(e)?e:new Dp(e,t)}class Dp{constructor(t,n){this.dep=new yi,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Xe(t),this._value=n?t:Mt(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,o=this.__v_isShallow||ln(t)||Co(t);t=o?t:Xe(t),no(t,n)&&(this._rawValue=t,this._value=o?t:Mt(t),this.dep.trigger())}}function ue(e){return gt(e)?e.value:e}const Tp={get:(e,t,n)=>t==="__v_raw"?e:ue(Reflect.get(e,t,n)),set:(e,t,n,o)=>{const a=e[t];return gt(a)&&!gt(n)?(a.value=n,!0):Reflect.set(e,t,n,o)}};function Xc(e){return Bn(e)?e:new Proxy(e,Tp)}function Ap(e){const t=He(e)?new Array(e.length):{};for(const n in e)t[n]=Jc(e,n);return t}class Ip{constructor(t,n,o){this._object=t,this._key=n,this._defaultValue=o,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return up(Xe(this._object),this._key)}}class Rp{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Gc(e,t,n){return gt(e)?e:Ve(e)?new Rp(e):lt(e)&&arguments.length>1?Jc(e,t,n):pe(e)}function Jc(e,t,n){const o=e[t];return gt(o)?o:new Ip(e,t,n)}class Pp{constructor(t,n,o){this.fn=t,this.setter=n,this._value=void 0,this.dep=new yi(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ts-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=o}notify(){if(this.flags|=16,!(this.flags&8)&&ct!==this)return Hc(this,!0),!0}get value(){const t=this.dep.track();return Mc(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Hp(e,t,n=!1){let o,a;return Ve(e)?o=e:(o=e.get,a=e.set),new Pp(o,a,n)}const ta={},_a=new WeakMap;let go;function Op(e,t=!1,n=go){if(n){let o=_a.get(n);o||_a.set(n,o=[]),o.push(e)}}function Bp(e,t,n=it){const{immediate:o,deep:a,once:r,scheduler:i,augmentJob:l,call:c}=n,u=V=>a?V:ln(V)||a===!1||a===0?Hn(V,1):Hn(V);let p,d,m,v,C=!1,w=!1;if(gt(e)?(d=()=>e.value,C=ln(e)):Bn(e)?(d=()=>u(e),C=!0):He(e)?(w=!0,C=e.some(V=>Bn(V)||ln(V)),d=()=>e.map(V=>{if(gt(V))return V.value;if(Bn(V))return u(V);if(Ve(V))return c?c(V,2):V()})):Ve(e)?t?d=c?()=>c(e,2):e:d=()=>{if(m){ao();try{m()}finally{ro()}}const V=go;go=p;try{return c?c(e,3,[v]):e(v)}finally{go=V}}:d=_n,t&&a){const V=d,T=a===!0?1/0:a;d=()=>Hn(V(),T)}const g=Ic(),S=()=>{p.stop(),g&&g.active&&mi(g.effects,p)};if(r&&t){const V=t;t=(...T)=>{V(...T),S()}}let L=w?new Array(e.length).fill(ta):ta;const B=V=>{if(!(!(p.flags&1)||!p.dirty&&!V))if(t){const T=p.run();if(a||C||(w?T.some((te,ee)=>no(te,L[ee])):no(T,L))){m&&m();const te=go;go=p;try{const ee=[T,L===ta?void 0:w&&L[0]===ta?[]:L,v];c?c(t,3,ee):t(...ee),L=T}finally{go=te}}}else p.run()};return l&&l(B),p=new Rc(d),p.scheduler=i?()=>i(B,!1):B,v=V=>Op(V,!1,p),m=p.onStop=()=>{const V=_a.get(p);if(V){if(c)c(V,4);else for(const T of V)T();_a.delete(p)}},t?o?B(!0):L=p.run():i?i(B.bind(null,!0),!0):p.run(),S.pause=p.pause.bind(p),S.resume=p.resume.bind(p),S.stop=S,S}function Hn(e,t=1/0,n){if(t<=0||!lt(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,gt(e))Hn(e.value,t,n);else if(He(e))for(let o=0;o<e.length;o++)Hn(e[o],t,n);else if(Qo(e)||Vo(e))e.forEach(o=>{Hn(o,t,n)});else if(kc(e)){for(const o in e)Hn(e[o],t,n);for(const o of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,o)&&Hn(e[o],t,n)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ns(e,t,n,o){try{return o?e(...o):e()}catch(a){Ja(a,t,n)}}function En(e,t,n,o){if(Ve(e)){const a=Ns(e,t,n,o);return a&&xc(a)&&a.catch(r=>{Ja(r,t,n)}),a}if(He(e)){const a=[];for(let r=0;r<e.length;r++)a.push(En(e[r],t,n,o));return a}}function Ja(e,t,n,o=!0){const a=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:i}=t&&t.appContext.config||it;if(t){let l=t.parent;const c=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const p=l.ec;if(p){for(let d=0;d<p.length;d++)if(p[d](e,c,u)===!1)return}l=l.parent}if(r){ao(),Ns(r,null,10,[e,c,u]),ro();return}}Mp(e,n,a,o,i)}function Mp(e,t,n,o=!0,a=!1){if(a)throw e;console.error(e)}const zt=[];let wn=-1;const jo=[];let Wn=null,Oo=0;const Qc=Promise.resolve();let ka=null;function $o(e){const t=ka||Qc;return e?t.then(this?e.bind(this):e):t}function Lp(e){let t=wn+1,n=zt.length;for(;t<n;){const o=t+n>>>1,a=zt[o],r=Is(a);r<e||r===e&&a.flags&2?t=o+1:n=o}return t}function Si(e){if(!(e.flags&1)){const t=Is(e),n=zt[zt.length-1];!n||!(e.flags&2)&&t>=Is(n)?zt.push(e):zt.splice(Lp(t),0,e),e.flags|=1,Zc()}}function Zc(){ka||(ka=Qc.then(tu))}function Np(e){He(e)?jo.push(...e):Wn&&e.id===-1?Wn.splice(Oo+1,0,e):e.flags&1||(jo.push(e),e.flags|=1),Zc()}function rl(e,t,n=wn+1){for(;n<zt.length;n++){const o=zt[n];if(o&&o.flags&2){if(e&&o.id!==e.uid)continue;zt.splice(n,1),n--,o.flags&4&&(o.flags&=-2),o(),o.flags&4||(o.flags&=-2)}}}function eu(e){if(jo.length){const t=[...new Set(jo)].sort((n,o)=>Is(n)-Is(o));if(jo.length=0,Wn){Wn.push(...t);return}for(Wn=t,Oo=0;Oo<Wn.length;Oo++){const n=Wn[Oo];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Wn=null,Oo=0}}const Is=e=>e.id==null?e.flags&2?-1:1/0:e.id;function tu(e){try{for(wn=0;wn<zt.length;wn++){const t=zt[wn];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Ns(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;wn<zt.length;wn++){const t=zt[wn];t&&(t.flags&=-2)}wn=-1,zt.length=0,eu(),ka=null,(zt.length||jo.length)&&tu()}}let Gt=null,nu=null;function Sa(e){const t=Gt;return Gt=e,nu=e&&e.type.__scopeId||null,t}function Kn(e,t=Gt,n){if(!t||e._n)return e;const o=(...a)=>{o._d&&gl(-1);const r=Sa(t);let i;try{i=e(...a)}finally{Sa(r),o._d&&gl(1)}return i};return o._n=!0,o._c=!0,o._d=!0,o}function oe(e,t){if(Gt===null)return e;const n=tr(Gt),o=e.dirs||(e.dirs=[]);for(let a=0;a<t.length;a++){let[r,i,l,c=it]=t[a];r&&(Ve(r)&&(r={mounted:r,updated:r}),r.deep&&Hn(i),o.push({dir:r,instance:n,value:i,oldValue:void 0,arg:l,modifiers:c}))}return e}function uo(e,t,n,o){const a=e.dirs,r=t&&t.dirs;for(let i=0;i<a.length;i++){const l=a[i];r&&(l.oldValue=r[i].value);let c=l.dir[o];c&&(ao(),En(c,n,8,[e.el,l,e,t]),ro())}}const Vp=Symbol("_vte"),jp=e=>e.__isTeleport;function $i(e,t){e.shapeFlag&6&&e.component?(e.transition=t,$i(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function ou(e,t){return Ve(e)?Lt({name:e.name},t,{setup:e}):e}function su(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function $a(e,t,n,o,a=!1){if(He(e)){e.forEach((C,w)=>$a(C,t&&(He(t)?t[w]:t),n,o,a));return}if(gs(o)&&!a){o.shapeFlag&512&&o.type.__asyncResolved&&o.component.subTree.component&&$a(e,t,n,o.component.subTree);return}const r=o.shapeFlag&4?tr(o.component):o.el,i=a?null:r,{i:l,r:c}=e,u=t&&t.r,p=l.refs===it?l.refs={}:l.refs,d=l.setupState,m=Xe(d),v=d===it?()=>!1:C=>ot(m,C);if(u!=null&&u!==c&&(St(u)?(p[u]=null,v(u)&&(d[u]=null)):gt(u)&&(u.value=null)),Ve(c))Ns(c,l,12,[i,p]);else{const C=St(c),w=gt(c);if(C||w){const g=()=>{if(e.f){const S=C?v(c)?d[c]:p[c]:c.value;a?He(S)&&mi(S,r):He(S)?S.includes(r)||S.push(r):C?(p[c]=[r],v(c)&&(d[c]=p[c])):(c.value=[r],e.k&&(p[e.k]=c.value))}else C?(p[c]=i,v(c)&&(d[c]=i)):w&&(c.value=i,e.k&&(p[e.k]=i))};i?(g.id=-1,Zt(g,n)):g()}}}Xa().requestIdleCallback;Xa().cancelIdleCallback;const gs=e=>!!e.type.__asyncLoader,au=e=>e.type.__isKeepAlive;function Fp(e,t){ru(e,"a",t)}function Up(e,t){ru(e,"da",t)}function ru(e,t,n=Pt){const o=e.__wdc||(e.__wdc=()=>{let a=n;for(;a;){if(a.isDeactivated)return;a=a.parent}return e()});if(Qa(t,o,n),n){let a=n.parent;for(;a&&a.parent;)au(a.parent.vnode)&&zp(o,t,n,a),a=a.parent}}function zp(e,t,n,o){const a=Qa(t,e,o,!0);io(()=>{mi(o[t],a)},n)}function Qa(e,t,n=Pt,o=!1){if(n){const a=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...i)=>{ao();const l=Vs(n),c=En(t,n,e,i);return l(),ro(),c});return o?a.unshift(r):a.push(r),r}}const jn=e=>(t,n=Pt)=>{(!Ps||e==="sp")&&Qa(e,(...o)=>t(...o),n)},qp=jn("bm"),qt=jn("m"),Wp=jn("bu"),Kp=jn("u"),Yp=jn("bum"),io=jn("um"),Xp=jn("sp"),Gp=jn("rtg"),Jp=jn("rtc");function Qp(e,t=Pt){Qa("ec",e,t)}const Zp="components";function Ei(e,t){return tm(Zp,e,!0,t)||e}const em=Symbol.for("v-ndc");function tm(e,t,n=!0,o=!1){const a=Gt||Pt;if(a){const r=a.type;{const l=Fm(r,!1);if(l&&(l===t||l===un(t)||l===Ya(un(t))))return r}const i=il(a[e]||r[e],t)||il(a.appContext[e],t);return!i&&o?r:i}}function il(e,t){return e&&(e[t]||e[un(t)]||e[Ya(un(t))])}function qe(e,t,n,o){let a;const r=n,i=He(e);if(i||St(e)){const l=i&&Bn(e);let c=!1;l&&(c=!ln(e),e=Ga(e)),a=new Array(e.length);for(let u=0,p=e.length;u<p;u++)a[u]=t(c?Mt(e[u]):e[u],u,void 0,r)}else if(typeof e=="number"){a=new Array(e);for(let l=0;l<e;l++)a[l]=t(l+1,l,void 0,r)}else if(lt(e))if(e[Symbol.iterator])a=Array.from(e,(l,c)=>t(l,c,void 0,r));else{const l=Object.keys(e);a=new Array(l.length);for(let c=0,u=l.length;c<u;c++){const p=l[c];a[c]=t(e[p],p,c,r)}}else a=[];return a}const Kr=e=>e?Eu(e)?tr(e):Kr(e.parent):null,vs=Lt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Kr(e.parent),$root:e=>Kr(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>lu(e),$forceUpdate:e=>e.f||(e.f=()=>{Si(e.update)}),$nextTick:e=>e.n||(e.n=$o.bind(e.proxy)),$watch:e=>_m.bind(e)}),yr=(e,t)=>e!==it&&!e.__isScriptSetup&&ot(e,t),nm={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:o,data:a,props:r,accessCache:i,type:l,appContext:c}=e;let u;if(t[0]!=="$"){const v=i[t];if(v!==void 0)switch(v){case 1:return o[t];case 2:return a[t];case 4:return n[t];case 3:return r[t]}else{if(yr(o,t))return i[t]=1,o[t];if(a!==it&&ot(a,t))return i[t]=2,a[t];if((u=e.propsOptions[0])&&ot(u,t))return i[t]=3,r[t];if(n!==it&&ot(n,t))return i[t]=4,n[t];Yr&&(i[t]=0)}}const p=vs[t];let d,m;if(p)return t==="$attrs"&&Bt(e.attrs,"get",""),p(e);if((d=l.__cssModules)&&(d=d[t]))return d;if(n!==it&&ot(n,t))return i[t]=4,n[t];if(m=c.config.globalProperties,ot(m,t))return m[t]},set({_:e},t,n){const{data:o,setupState:a,ctx:r}=e;return yr(a,t)?(a[t]=n,!0):o!==it&&ot(o,t)?(o[t]=n,!0):ot(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:o,appContext:a,propsOptions:r}},i){let l;return!!n[i]||e!==it&&ot(e,i)||yr(t,i)||(l=r[0])&&ot(l,i)||ot(o,i)||ot(vs,i)||ot(a.config.globalProperties,i)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:ot(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function ll(e){return He(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Yr=!0;function om(e){const t=lu(e),n=e.proxy,o=e.ctx;Yr=!1,t.beforeCreate&&cl(t.beforeCreate,e,"bc");const{data:a,computed:r,methods:i,watch:l,provide:c,inject:u,created:p,beforeMount:d,mounted:m,beforeUpdate:v,updated:C,activated:w,deactivated:g,beforeDestroy:S,beforeUnmount:L,destroyed:B,unmounted:V,render:T,renderTracked:te,renderTriggered:ee,errorCaptured:ae,serverPrefetch:j,expose:H,inheritAttrs:N,components:R,directives:E,filters:K}=t;if(u&&sm(u,o,null),i)for(const Z in i){const Ee=i[Z];Ve(Ee)&&(o[Z]=Ee.bind(n))}if(a){const Z=a.call(n,n);lt(Z)&&(e.data=dn(Z))}if(Yr=!0,r)for(const Z in r){const Ee=r[Z],je=Ve(Ee)?Ee.bind(n,n):Ve(Ee.get)?Ee.get.bind(n,n):_n,z=!Ve(Ee)&&Ve(Ee.set)?Ee.set.bind(n):_n,M=Je({get:je,set:z});Object.defineProperty(o,Z,{enumerable:!0,configurable:!0,get:()=>M.value,set:Y=>M.value=Y})}if(l)for(const Z in l)iu(l[Z],o,n,Z);if(c){const Z=Ve(c)?c.call(n):c;Reflect.ownKeys(Z).forEach(Ee=>{ua(Ee,Z[Ee])})}p&&cl(p,e,"c");function se(Z,Ee){He(Ee)?Ee.forEach(je=>Z(je.bind(n))):Ee&&Z(Ee.bind(n))}if(se(qp,d),se(qt,m),se(Wp,v),se(Kp,C),se(Fp,w),se(Up,g),se(Qp,ae),se(Jp,te),se(Gp,ee),se(Yp,L),se(io,V),se(Xp,j),He(H))if(H.length){const Z=e.exposed||(e.exposed={});H.forEach(Ee=>{Object.defineProperty(Z,Ee,{get:()=>n[Ee],set:je=>n[Ee]=je})})}else e.exposed||(e.exposed={});T&&e.render===_n&&(e.render=T),N!=null&&(e.inheritAttrs=N),R&&(e.components=R),E&&(e.directives=E),j&&su(e)}function sm(e,t,n=_n){He(e)&&(e=Xr(e));for(const o in e){const a=e[o];let r;lt(a)?"default"in a?r=gn(a.from||o,a.default,!0):r=gn(a.from||o):r=gn(a),gt(r)?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>r.value,set:i=>r.value=i}):t[o]=r}}function cl(e,t,n){En(He(e)?e.map(o=>o.bind(t.proxy)):e.bind(t.proxy),t,n)}function iu(e,t,n,o){let a=o.includes(".")?xu(n,o):()=>n[o];if(St(e)){const r=t[e];Ve(r)&&cn(a,r)}else if(Ve(e))cn(a,e.bind(n));else if(lt(e))if(He(e))e.forEach(r=>iu(r,t,n,o));else{const r=Ve(e.handler)?e.handler.bind(n):t[e.handler];Ve(r)&&cn(a,r,e)}}function lu(e){const t=e.type,{mixins:n,extends:o}=t,{mixins:a,optionsCache:r,config:{optionMergeStrategies:i}}=e.appContext,l=r.get(t);let c;return l?c=l:!a.length&&!n&&!o?c=t:(c={},a.length&&a.forEach(u=>Ea(c,u,i,!0)),Ea(c,t,i)),lt(t)&&r.set(t,c),c}function Ea(e,t,n,o=!1){const{mixins:a,extends:r}=t;r&&Ea(e,r,n,!0),a&&a.forEach(i=>Ea(e,i,n,!0));for(const i in t)if(!(o&&i==="expose")){const l=am[i]||n&&n[i];e[i]=l?l(e[i],t[i]):t[i]}return e}const am={data:ul,props:dl,emits:dl,methods:cs,computed:cs,beforeCreate:jt,created:jt,beforeMount:jt,mounted:jt,beforeUpdate:jt,updated:jt,beforeDestroy:jt,beforeUnmount:jt,destroyed:jt,unmounted:jt,activated:jt,deactivated:jt,errorCaptured:jt,serverPrefetch:jt,components:cs,directives:cs,watch:im,provide:ul,inject:rm};function ul(e,t){return t?e?function(){return Lt(Ve(e)?e.call(this,this):e,Ve(t)?t.call(this,this):t)}:t:e}function rm(e,t){return cs(Xr(e),Xr(t))}function Xr(e){if(He(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function jt(e,t){return e?[...new Set([].concat(e,t))]:t}function cs(e,t){return e?Lt(Object.create(null),e,t):t}function dl(e,t){return e?He(e)&&He(t)?[...new Set([...e,...t])]:Lt(Object.create(null),ll(e),ll(t??{})):t}function im(e,t){if(!e)return t;if(!t)return e;const n=Lt(Object.create(null),e);for(const o in t)n[o]=jt(e[o],t[o]);return n}function cu(){return{app:null,config:{isNativeTag:Xf,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let lm=0;function cm(e,t){return function(o,a=null){Ve(o)||(o=Lt({},o)),a!=null&&!lt(a)&&(a=null);const r=cu(),i=new WeakSet,l=[];let c=!1;const u=r.app={_uid:lm++,_component:o,_props:a,_container:null,_context:r,_instance:null,version:zm,get config(){return r.config},set config(p){},use(p,...d){return i.has(p)||(p&&Ve(p.install)?(i.add(p),p.install(u,...d)):Ve(p)&&(i.add(p),p(u,...d))),u},mixin(p){return r.mixins.includes(p)||r.mixins.push(p),u},component(p,d){return d?(r.components[p]=d,u):r.components[p]},directive(p,d){return d?(r.directives[p]=d,u):r.directives[p]},mount(p,d,m){if(!c){const v=u._ceVNode||ft(o,a);return v.appContext=r,m===!0?m="svg":m===!1&&(m=void 0),e(v,p,m),c=!0,u._container=p,p.__vue_app__=u,tr(v.component)}},onUnmount(p){l.push(p)},unmount(){c&&(En(l,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(p,d){return r.provides[p]=d,u},runWithContext(p){const d=wo;wo=u;try{return p()}finally{wo=d}}};return u}}let wo=null;function ua(e,t){if(Pt){let n=Pt.provides;const o=Pt.parent&&Pt.parent.provides;o===n&&(n=Pt.provides=Object.create(o)),n[e]=t}}function gn(e,t,n=!1){const o=Pt||Gt;if(o||wo){const a=wo?wo._context.provides:o?o.parent==null?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:void 0;if(a&&e in a)return a[e];if(arguments.length>1)return n&&Ve(t)?t.call(o&&o.proxy):t}}function um(){return!!(Pt||Gt||wo)}const uu={},du=()=>Object.create(uu),fu=e=>Object.getPrototypeOf(e)===uu;function dm(e,t,n,o=!1){const a={},r=du();e.propsDefaults=Object.create(null),pu(e,t,a,r);for(const i in e.propsOptions[0])i in a||(a[i]=void 0);n?e.props=o?a:Wc(a):e.type.props?e.props=a:e.props=r,e.attrs=r}function fm(e,t,n,o){const{props:a,attrs:r,vnode:{patchFlag:i}}=e,l=Xe(a),[c]=e.propsOptions;let u=!1;if((o||i>0)&&!(i&16)){if(i&8){const p=e.vnode.dynamicProps;for(let d=0;d<p.length;d++){let m=p[d];if(Za(e.emitsOptions,m))continue;const v=t[m];if(c)if(ot(r,m))v!==r[m]&&(r[m]=v,u=!0);else{const C=un(m);a[C]=Gr(c,l,C,v,e,!1)}else v!==r[m]&&(r[m]=v,u=!0)}}}else{pu(e,t,a,r)&&(u=!0);let p;for(const d in l)(!t||!ot(t,d)&&((p=so(d))===d||!ot(t,p)))&&(c?n&&(n[d]!==void 0||n[p]!==void 0)&&(a[d]=Gr(c,l,d,void 0,e,!0)):delete a[d]);if(r!==l)for(const d in r)(!t||!ot(t,d))&&(delete r[d],u=!0)}u&&Pn(e.attrs,"set","")}function pu(e,t,n,o){const[a,r]=e.propsOptions;let i=!1,l;if(t)for(let c in t){if(ps(c))continue;const u=t[c];let p;a&&ot(a,p=un(c))?!r||!r.includes(p)?n[p]=u:(l||(l={}))[p]=u:Za(e.emitsOptions,c)||(!(c in o)||u!==o[c])&&(o[c]=u,i=!0)}if(r){const c=Xe(n),u=l||it;for(let p=0;p<r.length;p++){const d=r[p];n[d]=Gr(a,c,d,u[d],e,!ot(u,d))}}return i}function Gr(e,t,n,o,a,r){const i=e[n];if(i!=null){const l=ot(i,"default");if(l&&o===void 0){const c=i.default;if(i.type!==Function&&!i.skipFactory&&Ve(c)){const{propsDefaults:u}=a;if(n in u)o=u[n];else{const p=Vs(a);o=u[n]=c.call(null,t),p()}}else o=c;a.ce&&a.ce._setProp(n,o)}i[0]&&(r&&!l?o=!1:i[1]&&(o===""||o===so(n))&&(o=!0))}return o}const pm=new WeakMap;function mu(e,t,n=!1){const o=n?pm:t.propsCache,a=o.get(e);if(a)return a;const r=e.props,i={},l=[];let c=!1;if(!Ve(e)){const p=d=>{c=!0;const[m,v]=mu(d,t,!0);Lt(i,m),v&&l.push(...v)};!n&&t.mixins.length&&t.mixins.forEach(p),e.extends&&p(e.extends),e.mixins&&e.mixins.forEach(p)}if(!r&&!c)return lt(e)&&o.set(e,No),No;if(He(r))for(let p=0;p<r.length;p++){const d=un(r[p]);fl(d)&&(i[d]=it)}else if(r)for(const p in r){const d=un(p);if(fl(d)){const m=r[p],v=i[d]=He(m)||Ve(m)?{type:m}:Lt({},m),C=v.type;let w=!1,g=!0;if(He(C))for(let S=0;S<C.length;++S){const L=C[S],B=Ve(L)&&L.name;if(B==="Boolean"){w=!0;break}else B==="String"&&(g=!1)}else w=Ve(C)&&C.name==="Boolean";v[0]=w,v[1]=g,(w||ot(v,"default"))&&l.push(d)}}const u=[i,l];return lt(e)&&o.set(e,u),u}function fl(e){return e[0]!=="$"&&!ps(e)}const hu=e=>e[0]==="_"||e==="$stable",Di=e=>He(e)?e.map(Cn):[Cn(e)],mm=(e,t,n)=>{if(t._n)return t;const o=Kn((...a)=>Di(t(...a)),n);return o._c=!1,o},gu=(e,t,n)=>{const o=e._ctx;for(const a in e){if(hu(a))continue;const r=e[a];if(Ve(r))t[a]=mm(a,r,o);else if(r!=null){const i=Di(r);t[a]=()=>i}}},vu=(e,t)=>{const n=Di(t);e.slots.default=()=>n},bu=(e,t,n)=>{for(const o in t)(n||o!=="_")&&(e[o]=t[o])},hm=(e,t,n)=>{const o=e.slots=du();if(e.vnode.shapeFlag&32){const a=t._;a?(bu(o,t,n),n&&Sc(o,"_",a,!0)):gu(t,o)}else t&&vu(e,t)},gm=(e,t,n)=>{const{vnode:o,slots:a}=e;let r=!0,i=it;if(o.shapeFlag&32){const l=t._;l?n&&l===1?r=!1:bu(a,t,n):(r=!t.$stable,gu(t,a)),i=t}else t&&(vu(e,t),i={default:1});if(r)for(const l in a)!hu(l)&&i[l]==null&&delete a[l]},Zt=Am;function vm(e){return bm(e)}function bm(e,t){const n=Xa();n.__VUE__=!0;const{insert:o,remove:a,patchProp:r,createElement:i,createText:l,createComment:c,setText:u,setElementText:p,parentNode:d,nextSibling:m,setScopeId:v=_n,insertStaticContent:C}=e,w=(x,_,P,X=null,ne=null,Q=null,ye=void 0,he=null,me=!!_.dynamicChildren)=>{if(x===_)return;x&&!rs(x,_)&&(X=G(x),Y(x,ne,Q,!0),x=null),_.patchFlag===-2&&(me=!1,_.dynamicChildren=null);const{type:re,ref:Re,shapeFlag:ke}=_;switch(re){case er:g(x,_,P,X);break;case xo:S(x,_,P,X);break;case da:x==null&&L(_,P,X,ye);break;case Le:R(x,_,P,X,ne,Q,ye,he,me);break;default:ke&1?T(x,_,P,X,ne,Q,ye,he,me):ke&6?E(x,_,P,X,ne,Q,ye,he,me):(ke&64||ke&128)&&re.process(x,_,P,X,ne,Q,ye,he,me,Ae)}Re!=null&&ne&&$a(Re,x&&x.ref,Q,_||x,!_)},g=(x,_,P,X)=>{if(x==null)o(_.el=l(_.children),P,X);else{const ne=_.el=x.el;_.children!==x.children&&u(ne,_.children)}},S=(x,_,P,X)=>{x==null?o(_.el=c(_.children||""),P,X):_.el=x.el},L=(x,_,P,X)=>{[x.el,x.anchor]=C(x.children,_,P,X,x.el,x.anchor)},B=({el:x,anchor:_},P,X)=>{let ne;for(;x&&x!==_;)ne=m(x),o(x,P,X),x=ne;o(_,P,X)},V=({el:x,anchor:_})=>{let P;for(;x&&x!==_;)P=m(x),a(x),x=P;a(_)},T=(x,_,P,X,ne,Q,ye,he,me)=>{_.type==="svg"?ye="svg":_.type==="math"&&(ye="mathml"),x==null?te(_,P,X,ne,Q,ye,he,me):j(x,_,ne,Q,ye,he,me)},te=(x,_,P,X,ne,Q,ye,he)=>{let me,re;const{props:Re,shapeFlag:ke,transition:Te,dirs:Oe}=x;if(me=x.el=i(x.type,Q,Re&&Re.is,Re),ke&8?p(me,x.children):ke&16&&ae(x.children,me,null,X,ne,Cr(x,Q),ye,he),Oe&&uo(x,null,X,"created"),ee(me,x,x.scopeId,ye,X),Re){for(const Ye in Re)Ye!=="value"&&!ps(Ye)&&r(me,Ye,null,Re[Ye],Q,X);"value"in Re&&r(me,"value",null,Re.value,Q),(re=Re.onVnodeBeforeMount)&&bn(re,X,x)}Oe&&uo(x,null,X,"beforeMount");const Fe=wm(ne,Te);Fe&&Te.beforeEnter(me),o(me,_,P),((re=Re&&Re.onVnodeMounted)||Fe||Oe)&&Zt(()=>{re&&bn(re,X,x),Fe&&Te.enter(me),Oe&&uo(x,null,X,"mounted")},ne)},ee=(x,_,P,X,ne)=>{if(P&&v(x,P),X)for(let Q=0;Q<X.length;Q++)v(x,X[Q]);if(ne){let Q=ne.subTree;if(_===Q||ku(Q.type)&&(Q.ssContent===_||Q.ssFallback===_)){const ye=ne.vnode;ee(x,ye,ye.scopeId,ye.slotScopeIds,ne.parent)}}},ae=(x,_,P,X,ne,Q,ye,he,me=0)=>{for(let re=me;re<x.length;re++){const Re=x[re]=he?Yn(x[re]):Cn(x[re]);w(null,Re,_,P,X,ne,Q,ye,he)}},j=(x,_,P,X,ne,Q,ye)=>{const he=_.el=x.el;let{patchFlag:me,dynamicChildren:re,dirs:Re}=_;me|=x.patchFlag&16;const ke=x.props||it,Te=_.props||it;let Oe;if(P&&fo(P,!1),(Oe=Te.onVnodeBeforeUpdate)&&bn(Oe,P,_,x),Re&&uo(_,x,P,"beforeUpdate"),P&&fo(P,!0),(ke.innerHTML&&Te.innerHTML==null||ke.textContent&&Te.textContent==null)&&p(he,""),re?H(x.dynamicChildren,re,he,P,X,Cr(_,ne),Q):ye||Ee(x,_,he,null,P,X,Cr(_,ne),Q,!1),me>0){if(me&16)N(he,ke,Te,P,ne);else if(me&2&&ke.class!==Te.class&&r(he,"class",null,Te.class,ne),me&4&&r(he,"style",ke.style,Te.style,ne),me&8){const Fe=_.dynamicProps;for(let Ye=0;Ye<Fe.length;Ye++){const We=Fe[Ye],Et=ke[We],$t=Te[We];($t!==Et||We==="value")&&r(he,We,Et,$t,ne,P)}}me&1&&x.children!==_.children&&p(he,_.children)}else!ye&&re==null&&N(he,ke,Te,P,ne);((Oe=Te.onVnodeUpdated)||Re)&&Zt(()=>{Oe&&bn(Oe,P,_,x),Re&&uo(_,x,P,"updated")},X)},H=(x,_,P,X,ne,Q,ye)=>{for(let he=0;he<_.length;he++){const me=x[he],re=_[he],Re=me.el&&(me.type===Le||!rs(me,re)||me.shapeFlag&70)?d(me.el):P;w(me,re,Re,null,X,ne,Q,ye,!0)}},N=(x,_,P,X,ne)=>{if(_!==P){if(_!==it)for(const Q in _)!ps(Q)&&!(Q in P)&&r(x,Q,_[Q],null,ne,X);for(const Q in P){if(ps(Q))continue;const ye=P[Q],he=_[Q];ye!==he&&Q!=="value"&&r(x,Q,he,ye,ne,X)}"value"in P&&r(x,"value",_.value,P.value,ne)}},R=(x,_,P,X,ne,Q,ye,he,me)=>{const re=_.el=x?x.el:l(""),Re=_.anchor=x?x.anchor:l("");let{patchFlag:ke,dynamicChildren:Te,slotScopeIds:Oe}=_;Oe&&(he=he?he.concat(Oe):Oe),x==null?(o(re,P,X),o(Re,P,X),ae(_.children||[],P,Re,ne,Q,ye,he,me)):ke>0&&ke&64&&Te&&x.dynamicChildren?(H(x.dynamicChildren,Te,P,ne,Q,ye,he),(_.key!=null||ne&&_===ne.subTree)&&wu(x,_,!0)):Ee(x,_,P,Re,ne,Q,ye,he,me)},E=(x,_,P,X,ne,Q,ye,he,me)=>{_.slotScopeIds=he,x==null?_.shapeFlag&512?ne.ctx.activate(_,P,X,ye,me):K(_,P,X,ne,Q,ye,me):$e(x,_,me)},K=(x,_,P,X,ne,Q,ye)=>{const he=x.component=Mm(x,X,ne);if(au(x)&&(he.ctx.renderer=Ae),Lm(he,!1,ye),he.asyncDep){if(ne&&ne.registerDep(he,se,ye),!x.el){const me=he.subTree=ft(xo);S(null,me,_,P)}}else se(he,x,_,P,ne,Q,ye)},$e=(x,_,P)=>{const X=_.component=x.component;if(Dm(x,_,P))if(X.asyncDep&&!X.asyncResolved){Z(X,_,P);return}else X.next=_,X.update();else _.el=x.el,X.vnode=_},se=(x,_,P,X,ne,Q,ye)=>{const he=()=>{if(x.isMounted){let{next:ke,bu:Te,u:Oe,parent:Fe,vnode:Ye}=x;{const Vt=yu(x);if(Vt){ke&&(ke.el=Ye.el,Z(x,ke,ye)),Vt.asyncDep.then(()=>{x.isUnmounted||he()});return}}let We=ke,Et;fo(x,!1),ke?(ke.el=Ye.el,Z(x,ke,ye)):ke=Ye,Te&&ca(Te),(Et=ke.props&&ke.props.onVnodeBeforeUpdate)&&bn(Et,Fe,ke,Ye),fo(x,!0);const $t=ml(x),At=x.subTree;x.subTree=$t,w(At,$t,d(At.el),G(At),x,ne,Q),ke.el=$t.el,We===null&&Tm(x,$t.el),Oe&&Zt(Oe,ne),(Et=ke.props&&ke.props.onVnodeUpdated)&&Zt(()=>bn(Et,Fe,ke,Ye),ne)}else{let ke;const{el:Te,props:Oe}=_,{bm:Fe,m:Ye,parent:We,root:Et,type:$t}=x,At=gs(_);fo(x,!1),Fe&&ca(Fe),!At&&(ke=Oe&&Oe.onVnodeBeforeMount)&&bn(ke,We,_),fo(x,!0);{Et.ce&&Et.ce._injectChildStyle($t);const Vt=x.subTree=ml(x);w(null,Vt,P,X,x,ne,Q),_.el=Vt.el}if(Ye&&Zt(Ye,ne),!At&&(ke=Oe&&Oe.onVnodeMounted)){const Vt=_;Zt(()=>bn(ke,We,Vt),ne)}(_.shapeFlag&256||We&&gs(We.vnode)&&We.vnode.shapeFlag&256)&&x.a&&Zt(x.a,ne),x.isMounted=!0,_=P=X=null}};x.scope.on();const me=x.effect=new Rc(he);x.scope.off();const re=x.update=me.run.bind(me),Re=x.job=me.runIfDirty.bind(me);Re.i=x,Re.id=x.uid,me.scheduler=()=>Si(Re),fo(x,!0),re()},Z=(x,_,P)=>{_.component=x;const X=x.vnode.props;x.vnode=_,x.next=null,fm(x,_.props,X,P),gm(x,_.children,P),ao(),rl(x),ro()},Ee=(x,_,P,X,ne,Q,ye,he,me=!1)=>{const re=x&&x.children,Re=x?x.shapeFlag:0,ke=_.children,{patchFlag:Te,shapeFlag:Oe}=_;if(Te>0){if(Te&128){z(re,ke,P,X,ne,Q,ye,he,me);return}else if(Te&256){je(re,ke,P,X,ne,Q,ye,he,me);return}}Oe&8?(Re&16&&dt(re,ne,Q),ke!==re&&p(P,ke)):Re&16?Oe&16?z(re,ke,P,X,ne,Q,ye,he,me):dt(re,ne,Q,!0):(Re&8&&p(P,""),Oe&16&&ae(ke,P,X,ne,Q,ye,he,me))},je=(x,_,P,X,ne,Q,ye,he,me)=>{x=x||No,_=_||No;const re=x.length,Re=_.length,ke=Math.min(re,Re);let Te;for(Te=0;Te<ke;Te++){const Oe=_[Te]=me?Yn(_[Te]):Cn(_[Te]);w(x[Te],Oe,P,null,ne,Q,ye,he,me)}re>Re?dt(x,ne,Q,!0,!1,ke):ae(_,P,X,ne,Q,ye,he,me,ke)},z=(x,_,P,X,ne,Q,ye,he,me)=>{let re=0;const Re=_.length;let ke=x.length-1,Te=Re-1;for(;re<=ke&&re<=Te;){const Oe=x[re],Fe=_[re]=me?Yn(_[re]):Cn(_[re]);if(rs(Oe,Fe))w(Oe,Fe,P,null,ne,Q,ye,he,me);else break;re++}for(;re<=ke&&re<=Te;){const Oe=x[ke],Fe=_[Te]=me?Yn(_[Te]):Cn(_[Te]);if(rs(Oe,Fe))w(Oe,Fe,P,null,ne,Q,ye,he,me);else break;ke--,Te--}if(re>ke){if(re<=Te){const Oe=Te+1,Fe=Oe<Re?_[Oe].el:X;for(;re<=Te;)w(null,_[re]=me?Yn(_[re]):Cn(_[re]),P,Fe,ne,Q,ye,he,me),re++}}else if(re>Te)for(;re<=ke;)Y(x[re],ne,Q,!0),re++;else{const Oe=re,Fe=re,Ye=new Map;for(re=Fe;re<=Te;re++){const y=_[re]=me?Yn(_[re]):Cn(_[re]);y.key!=null&&Ye.set(y.key,re)}let We,Et=0;const $t=Te-Fe+1;let At=!1,Vt=0;const F=new Array($t);for(re=0;re<$t;re++)F[re]=0;for(re=Oe;re<=ke;re++){const y=x[re];if(Et>=$t){Y(y,ne,Q,!0);continue}let _e;if(y.key!=null)_e=Ye.get(y.key);else for(We=Fe;We<=Te;We++)if(F[We-Fe]===0&&rs(y,_[We])){_e=We;break}_e===void 0?Y(y,ne,Q,!0):(F[_e-Fe]=re+1,_e>=Vt?Vt=_e:At=!0,w(y,_[_e],P,null,ne,Q,ye,he,me),Et++)}const f=At?ym(F):No;for(We=f.length-1,re=$t-1;re>=0;re--){const y=Fe+re,_e=_[y],at=y+1<Re?_[y+1].el:X;F[re]===0?w(null,_e,P,at,ne,Q,ye,he,me):At&&(We<0||re!==f[We]?M(_e,P,at,2):We--)}}},M=(x,_,P,X,ne=null)=>{const{el:Q,type:ye,transition:he,children:me,shapeFlag:re}=x;if(re&6){M(x.component.subTree,_,P,X);return}if(re&128){x.suspense.move(_,P,X);return}if(re&64){ye.move(x,_,P,Ae);return}if(ye===Le){o(Q,_,P);for(let ke=0;ke<me.length;ke++)M(me[ke],_,P,X);o(x.anchor,_,P);return}if(ye===da){B(x,_,P);return}if(X!==2&&re&1&&he)if(X===0)he.beforeEnter(Q),o(Q,_,P),Zt(()=>he.enter(Q),ne);else{const{leave:ke,delayLeave:Te,afterLeave:Oe}=he,Fe=()=>o(Q,_,P),Ye=()=>{ke(Q,()=>{Fe(),Oe&&Oe()})};Te?Te(Q,Fe,Ye):Ye()}else o(Q,_,P)},Y=(x,_,P,X=!1,ne=!1)=>{const{type:Q,props:ye,ref:he,children:me,dynamicChildren:re,shapeFlag:Re,patchFlag:ke,dirs:Te,cacheIndex:Oe}=x;if(ke===-2&&(ne=!1),he!=null&&$a(he,null,P,x,!0),Oe!=null&&(_.renderCache[Oe]=void 0),Re&256){_.ctx.deactivate(x);return}const Fe=Re&1&&Te,Ye=!gs(x);let We;if(Ye&&(We=ye&&ye.onVnodeBeforeUnmount)&&bn(We,_,x),Re&6)De(x.component,P,X);else{if(Re&128){x.suspense.unmount(P,X);return}Fe&&uo(x,null,_,"beforeUnmount"),Re&64?x.type.remove(x,_,P,Ae,X):re&&!re.hasOnce&&(Q!==Le||ke>0&&ke&64)?dt(re,_,P,!1,!0):(Q===Le&&ke&384||!ne&&Re&16)&&dt(me,_,P),X&&U(x)}(Ye&&(We=ye&&ye.onVnodeUnmounted)||Fe)&&Zt(()=>{We&&bn(We,_,x),Fe&&uo(x,null,_,"unmounted")},P)},U=x=>{const{type:_,el:P,anchor:X,transition:ne}=x;if(_===Le){ce(P,X);return}if(_===da){V(x);return}const Q=()=>{a(P),ne&&!ne.persisted&&ne.afterLeave&&ne.afterLeave()};if(x.shapeFlag&1&&ne&&!ne.persisted){const{leave:ye,delayLeave:he}=ne,me=()=>ye(P,Q);he?he(x.el,Q,me):me()}else Q()},ce=(x,_)=>{let P;for(;x!==_;)P=m(x),a(x),x=P;a(_)},De=(x,_,P)=>{const{bum:X,scope:ne,job:Q,subTree:ye,um:he,m:me,a:re}=x;pl(me),pl(re),X&&ca(X),ne.stop(),Q&&(Q.flags|=8,Y(ye,x,_,P)),he&&Zt(he,_),Zt(()=>{x.isUnmounted=!0},_),_&&_.pendingBranch&&!_.isUnmounted&&x.asyncDep&&!x.asyncResolved&&x.suspenseId===_.pendingId&&(_.deps--,_.deps===0&&_.resolve())},dt=(x,_,P,X=!1,ne=!1,Q=0)=>{for(let ye=Q;ye<x.length;ye++)Y(x[ye],_,P,X,ne)},G=x=>{if(x.shapeFlag&6)return G(x.component.subTree);if(x.shapeFlag&128)return x.suspense.next();const _=m(x.anchor||x.el),P=_&&_[Vp];return P?m(P):_};let Se=!1;const Ce=(x,_,P)=>{x==null?_._vnode&&Y(_._vnode,null,null,!0):w(_._vnode||null,x,_,null,null,null,P),_._vnode=x,Se||(Se=!0,rl(),eu(),Se=!1)},Ae={p:w,um:Y,m:M,r:U,mt:K,mc:ae,pc:Ee,pbc:H,n:G,o:e};return{render:Ce,hydrate:void 0,createApp:cm(Ce)}}function Cr({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function fo({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function wm(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function wu(e,t,n=!1){const o=e.children,a=t.children;if(He(o)&&He(a))for(let r=0;r<o.length;r++){const i=o[r];let l=a[r];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=a[r]=Yn(a[r]),l.el=i.el),!n&&l.patchFlag!==-2&&wu(i,l)),l.type===er&&(l.el=i.el)}}function ym(e){const t=e.slice(),n=[0];let o,a,r,i,l;const c=e.length;for(o=0;o<c;o++){const u=e[o];if(u!==0){if(a=n[n.length-1],e[a]<u){t[o]=a,n.push(o);continue}for(r=0,i=n.length-1;r<i;)l=r+i>>1,e[n[l]]<u?r=l+1:i=l;u<e[n[r]]&&(r>0&&(t[o]=n[r-1]),n[r]=o)}}for(r=n.length,i=n[r-1];r-- >0;)n[r]=i,i=t[i];return n}function yu(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:yu(t)}function pl(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Cm=Symbol.for("v-scx"),xm=()=>gn(Cm);function cn(e,t,n){return Cu(e,t,n)}function Cu(e,t,n=it){const{immediate:o,deep:a,flush:r,once:i}=n,l=Lt({},n),c=t&&o||!t&&r!=="post";let u;if(Ps){if(r==="sync"){const v=xm();u=v.__watcherHandles||(v.__watcherHandles=[])}else if(!c){const v=()=>{};return v.stop=_n,v.resume=_n,v.pause=_n,v}}const p=Pt;l.call=(v,C,w)=>En(v,p,C,w);let d=!1;r==="post"?l.scheduler=v=>{Zt(v,p&&p.suspense)}:r!=="sync"&&(d=!0,l.scheduler=(v,C)=>{C?v():Si(v)}),l.augmentJob=v=>{t&&(v.flags|=4),d&&(v.flags|=2,p&&(v.id=p.uid,v.i=p))};const m=Bp(e,t,l);return Ps&&(u?u.push(m):c&&m()),m}function _m(e,t,n){const o=this.proxy,a=St(e)?e.includes(".")?xu(o,e):()=>o[e]:e.bind(o,o);let r;Ve(t)?r=t:(r=t.handler,n=t);const i=Vs(this),l=Cu(a,r.bind(o),n);return i(),l}function xu(e,t){const n=t.split(".");return()=>{let o=e;for(let a=0;a<n.length&&o;a++)o=o[n[a]];return o}}const km=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${un(t)}Modifiers`]||e[`${so(t)}Modifiers`];function Sm(e,t,...n){if(e.isUnmounted)return;const o=e.vnode.props||it;let a=n;const r=t.startsWith("update:"),i=r&&km(o,t.slice(7));i&&(i.trim&&(a=n.map(p=>St(p)?p.trim():p)),i.number&&(a=n.map(Ca)));let l,c=o[l=hr(t)]||o[l=hr(un(t))];!c&&r&&(c=o[l=hr(so(t))]),c&&En(c,e,6,a);const u=o[l+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,En(u,e,6,a)}}function _u(e,t,n=!1){const o=t.emitsCache,a=o.get(e);if(a!==void 0)return a;const r=e.emits;let i={},l=!1;if(!Ve(e)){const c=u=>{const p=_u(u,t,!0);p&&(l=!0,Lt(i,p))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!r&&!l?(lt(e)&&o.set(e,null),null):(He(r)?r.forEach(c=>i[c]=null):Lt(i,r),lt(e)&&o.set(e,i),i)}function Za(e,t){return!e||!Wa(t)?!1:(t=t.slice(2).replace(/Once$/,""),ot(e,t[0].toLowerCase()+t.slice(1))||ot(e,so(t))||ot(e,t))}function ml(e){const{type:t,vnode:n,proxy:o,withProxy:a,propsOptions:[r],slots:i,attrs:l,emit:c,render:u,renderCache:p,props:d,data:m,setupState:v,ctx:C,inheritAttrs:w}=e,g=Sa(e);let S,L;try{if(n.shapeFlag&4){const V=a||o,T=V;S=Cn(u.call(T,V,p,d,v,m,C)),L=l}else{const V=t;S=Cn(V.length>1?V(d,{attrs:l,slots:i,emit:c}):V(d,null)),L=t.props?l:$m(l)}}catch(V){bs.length=0,Ja(V,e,1),S=ft(xo)}let B=S;if(L&&w!==!1){const V=Object.keys(L),{shapeFlag:T}=B;V.length&&T&7&&(r&&V.some(pi)&&(L=Em(L,r)),B=qo(B,L,!1,!0))}return n.dirs&&(B=qo(B,null,!1,!0),B.dirs=B.dirs?B.dirs.concat(n.dirs):n.dirs),n.transition&&$i(B,n.transition),S=B,Sa(g),S}const $m=e=>{let t;for(const n in e)(n==="class"||n==="style"||Wa(n))&&((t||(t={}))[n]=e[n]);return t},Em=(e,t)=>{const n={};for(const o in e)(!pi(o)||!(o.slice(9)in t))&&(n[o]=e[o]);return n};function Dm(e,t,n){const{props:o,children:a,component:r}=e,{props:i,children:l,patchFlag:c}=t,u=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return o?hl(o,i,u):!!i;if(c&8){const p=t.dynamicProps;for(let d=0;d<p.length;d++){const m=p[d];if(i[m]!==o[m]&&!Za(u,m))return!0}}}else return(a||l)&&(!l||!l.$stable)?!0:o===i?!1:o?i?hl(o,i,u):!0:!!i;return!1}function hl(e,t,n){const o=Object.keys(t);if(o.length!==Object.keys(e).length)return!0;for(let a=0;a<o.length;a++){const r=o[a];if(t[r]!==e[r]&&!Za(n,r))return!0}return!1}function Tm({vnode:e,parent:t},n){for(;t;){const o=t.subTree;if(o.suspense&&o.suspense.activeBranch===e&&(o.el=e.el),o===e)(e=t.vnode).el=n,t=t.parent;else break}}const ku=e=>e.__isSuspense;function Am(e,t){t&&t.pendingBranch?He(e)?t.effects.push(...e):t.effects.push(e):Np(e)}const Le=Symbol.for("v-fgt"),er=Symbol.for("v-txt"),xo=Symbol.for("v-cmt"),da=Symbol.for("v-stc"),bs=[];let tn=null;function $(e=!1){bs.push(tn=e?null:[])}function Im(){bs.pop(),tn=bs[bs.length-1]||null}let Rs=1;function gl(e,t=!1){Rs+=e,e<0&&tn&&t&&(tn.hasOnce=!0)}function Su(e){return e.dynamicChildren=Rs>0?tn||No:null,Im(),Rs>0&&tn&&tn.push(e),e}function D(e,t,n,o,a,r){return Su(s(e,t,n,o,a,r,!0))}function On(e,t,n,o,a){return Su(ft(e,t,n,o,a,!0))}function Da(e){return e?e.__v_isVNode===!0:!1}function rs(e,t){return e.type===t.type&&e.key===t.key}const $u=({key:e})=>e??null,fa=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?St(e)||gt(e)||Ve(e)?{i:Gt,r:e,k:t,f:!!n}:e:null);function s(e,t=null,n=null,o=0,a=null,r=e===Le?0:1,i=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&$u(t),ref:t&&fa(t),scopeId:nu,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:o,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:Gt};return l?(Ti(c,n),r&128&&e.normalize(c)):n&&(c.shapeFlag|=St(n)?8:16),Rs>0&&!i&&tn&&(c.patchFlag>0||r&6)&&c.patchFlag!==32&&tn.push(c),c}const ft=Rm;function Rm(e,t=null,n=null,o=0,a=null,r=!1){if((!e||e===em)&&(e=xo),Da(e)){const l=qo(e,t,!0);return n&&Ti(l,n),Rs>0&&!r&&tn&&(l.shapeFlag&6?tn[tn.indexOf(e)]=l:tn.push(l)),l.patchFlag=-2,l}if(Um(e)&&(e=e.__vccOpts),t){t=Pm(t);let{class:l,style:c}=t;l&&!St(l)&&(t.class=rt(l)),lt(c)&&(_i(c)&&!He(c)&&(c=Lt({},c)),t.style=kn(c))}const i=St(e)?1:ku(e)?128:jp(e)?64:lt(e)?4:Ve(e)?2:0;return s(e,t,n,o,a,i,r,!0)}function Pm(e){return e?_i(e)||fu(e)?Lt({},e):e:null}function qo(e,t,n=!1,o=!1){const{props:a,ref:r,patchFlag:i,children:l,transition:c}=e,u=t?Hm(a||{},t):a,p={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&$u(u),ref:t&&t.ref?n&&r?He(r)?r.concat(fa(t)):[r,fa(t)]:fa(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Le?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&qo(e.ssContent),ssFallback:e.ssFallback&&qo(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&o&&$i(p,c.clone(p)),p}function le(e=" ",t=0){return ft(er,null,e,t)}function oo(e,t){const n=ft(da,null,e);return n.staticCount=t,n}function we(e="",t=!1){return t?($(),On(xo,null,e)):ft(xo,null,e)}function Cn(e){return e==null||typeof e=="boolean"?ft(xo):He(e)?ft(Le,null,e.slice()):Da(e)?Yn(e):ft(er,null,String(e))}function Yn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:qo(e)}function Ti(e,t){let n=0;const{shapeFlag:o}=e;if(t==null)t=null;else if(He(t))n=16;else if(typeof t=="object")if(o&65){const a=t.default;a&&(a._c&&(a._d=!1),Ti(e,a()),a._c&&(a._d=!0));return}else{n=32;const a=t._;!a&&!fu(t)?t._ctx=Gt:a===3&&Gt&&(Gt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Ve(t)?(t={default:t,_ctx:Gt},n=32):(t=String(t),o&64?(n=16,t=[le(t)]):n=8);e.children=t,e.shapeFlag|=n}function Hm(...e){const t={};for(let n=0;n<e.length;n++){const o=e[n];for(const a in o)if(a==="class")t.class!==o.class&&(t.class=rt([t.class,o.class]));else if(a==="style")t.style=kn([t.style,o.style]);else if(Wa(a)){const r=t[a],i=o[a];i&&r!==i&&!(He(r)&&r.includes(i))&&(t[a]=r?[].concat(r,i):i)}else a!==""&&(t[a]=o[a])}return t}function bn(e,t,n,o=null){En(e,t,7,[n,o])}const Om=cu();let Bm=0;function Mm(e,t,n){const o=e.type,a=(t?t.appContext:e.appContext)||Om,r={uid:Bm++,vnode:e,type:o,parent:t,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Tc(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(a.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:mu(o,a),emitsOptions:_u(o,a),emit:null,emitted:null,propsDefaults:it,inheritAttrs:o.inheritAttrs,ctx:it,data:it,props:it,attrs:it,slots:it,refs:it,setupState:it,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=Sm.bind(null,r),e.ce&&e.ce(r),r}let Pt=null,Ta,Jr;{const e=Xa(),t=(n,o)=>{let a;return(a=e[n])||(a=e[n]=[]),a.push(o),r=>{a.length>1?a.forEach(i=>i(r)):a[0](r)}};Ta=t("__VUE_INSTANCE_SETTERS__",n=>Pt=n),Jr=t("__VUE_SSR_SETTERS__",n=>Ps=n)}const Vs=e=>{const t=Pt;return Ta(e),e.scope.on(),()=>{e.scope.off(),Ta(t)}},vl=()=>{Pt&&Pt.scope.off(),Ta(null)};function Eu(e){return e.vnode.shapeFlag&4}let Ps=!1;function Lm(e,t=!1,n=!1){t&&Jr(t);const{props:o,children:a}=e.vnode,r=Eu(e);dm(e,o,r,t),hm(e,a,n);const i=r?Nm(e,t):void 0;return t&&Jr(!1),i}function Nm(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,nm);const{setup:o}=n;if(o){ao();const a=e.setupContext=o.length>1?jm(e):null,r=Vs(e),i=Ns(o,e,0,[e.props,a]),l=xc(i);if(ro(),r(),(l||e.sp)&&!gs(e)&&su(e),l){if(i.then(vl,vl),t)return i.then(c=>{bl(e,c)}).catch(c=>{Ja(c,e,0)});e.asyncDep=i}else bl(e,i)}else Du(e)}function bl(e,t,n){Ve(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:lt(t)&&(e.setupState=Xc(t)),Du(e)}function Du(e,t,n){const o=e.type;e.render||(e.render=o.render||_n);{const a=Vs(e);ao();try{om(e)}finally{ro(),a()}}}const Vm={get(e,t){return Bt(e,"get",""),e[t]}};function jm(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Vm),slots:e.slots,emit:e.emit,expose:t}}function tr(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Xc(ki(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in vs)return vs[n](e)},has(t,n){return n in t||n in vs}})):e.proxy}function Fm(e,t=!0){return Ve(e)?e.displayName||e.name:e.name||t&&e.__name}function Um(e){return Ve(e)&&"__vccOpts"in e}const Je=(e,t)=>Hp(e,t,Ps);function Tu(e,t,n){const o=arguments.length;return o===2?lt(t)&&!He(t)?Da(t)?ft(e,null,[t]):ft(e,t):ft(e,null,t):(o>3?n=Array.prototype.slice.call(arguments,2):o===3&&Da(n)&&(n=[n]),ft(e,t,n))}const zm="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Qr;const wl=typeof window<"u"&&window.trustedTypes;if(wl)try{Qr=wl.createPolicy("vue",{createHTML:e=>e})}catch{}const Au=Qr?e=>Qr.createHTML(e):e=>e,qm="http://www.w3.org/2000/svg",Wm="http://www.w3.org/1998/Math/MathML",Rn=typeof document<"u"?document:null,yl=Rn&&Rn.createElement("template"),Km={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,o)=>{const a=t==="svg"?Rn.createElementNS(qm,e):t==="mathml"?Rn.createElementNS(Wm,e):n?Rn.createElement(e,{is:n}):Rn.createElement(e);return e==="select"&&o&&o.multiple!=null&&a.setAttribute("multiple",o.multiple),a},createText:e=>Rn.createTextNode(e),createComment:e=>Rn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Rn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,o,a,r){const i=n?n.previousSibling:t.lastChild;if(a&&(a===r||a.nextSibling))for(;t.insertBefore(a.cloneNode(!0),n),!(a===r||!(a=a.nextSibling)););else{yl.innerHTML=Au(o==="svg"?`<svg>${e}</svg>`:o==="mathml"?`<math>${e}</math>`:e);const l=yl.content;if(o==="svg"||o==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}t.insertBefore(l,n)}return[i?i.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Ym=Symbol("_vtc");function Xm(e,t,n){const o=e[Ym];o&&(t=(t?[t,...o]:[...o]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Aa=Symbol("_vod"),Iu=Symbol("_vsh"),xr={beforeMount(e,{value:t},{transition:n}){e[Aa]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):is(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:o}){!t!=!n&&(o?t?(o.beforeEnter(e),is(e,!0),o.enter(e)):o.leave(e,()=>{is(e,!1)}):is(e,t))},beforeUnmount(e,{value:t}){is(e,t)}};function is(e,t){e.style.display=t?e[Aa]:"none",e[Iu]=!t}const Gm=Symbol(""),Jm=/(^|;)\s*display\s*:/;function Qm(e,t,n){const o=e.style,a=St(n);let r=!1;if(n&&!a){if(t)if(St(t))for(const i of t.split(";")){const l=i.slice(0,i.indexOf(":")).trim();n[l]==null&&pa(o,l,"")}else for(const i in t)n[i]==null&&pa(o,i,"");for(const i in n)i==="display"&&(r=!0),pa(o,i,n[i])}else if(a){if(t!==n){const i=o[Gm];i&&(n+=";"+i),o.cssText=n,r=Jm.test(n)}}else t&&e.removeAttribute("style");Aa in e&&(e[Aa]=r?o.display:"",e[Iu]&&(o.display="none"))}const Cl=/\s*!important$/;function pa(e,t,n){if(He(n))n.forEach(o=>pa(e,t,o));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const o=Zm(e,t);Cl.test(n)?e.setProperty(so(o),n.replace(Cl,""),"important"):e[o]=n}}const xl=["Webkit","Moz","ms"],_r={};function Zm(e,t){const n=_r[t];if(n)return n;let o=un(t);if(o!=="filter"&&o in e)return _r[t]=o;o=Ya(o);for(let a=0;a<xl.length;a++){const r=xl[a]+o;if(r in e)return _r[t]=r}return t}const _l="http://www.w3.org/1999/xlink";function kl(e,t,n,o,a,r=ap(t)){o&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(_l,t.slice(6,t.length)):e.setAttributeNS(_l,t,n):n==null||r&&!$c(n)?e.removeAttribute(t):e.setAttribute(t,r?"":$n(n)?String(n):n)}function Sl(e,t,n,o,a){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Au(n):n);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const l=r==="OPTION"?e.getAttribute("value")||"":e.value,c=n==null?e.type==="checkbox"?"on":"":String(n);(l!==c||!("_value"in e))&&(e.value=c),n==null&&e.removeAttribute(t),e._value=n;return}let i=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=$c(n):n==null&&l==="string"?(n="",i=!0):l==="number"&&(n=0,i=!0)}try{e[t]=n}catch{}i&&e.removeAttribute(a||t)}function Jn(e,t,n,o){e.addEventListener(t,n,o)}function eh(e,t,n,o){e.removeEventListener(t,n,o)}const $l=Symbol("_vei");function th(e,t,n,o,a=null){const r=e[$l]||(e[$l]={}),i=r[t];if(o&&i)i.value=o;else{const[l,c]=nh(t);if(o){const u=r[t]=ah(o,a);Jn(e,l,u,c)}else i&&(eh(e,l,i,c),r[t]=void 0)}}const El=/(?:Once|Passive|Capture)$/;function nh(e){let t;if(El.test(e)){t={};let o;for(;o=e.match(El);)e=e.slice(0,e.length-o[0].length),t[o[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):so(e.slice(2)),t]}let kr=0;const oh=Promise.resolve(),sh=()=>kr||(oh.then(()=>kr=0),kr=Date.now());function ah(e,t){const n=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=n.attached)return;En(rh(o,n.value),t,5,[o])};return n.value=e,n.attached=sh(),n}function rh(e,t){if(He(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(o=>a=>!a._stopped&&o&&o(a))}else return t}const Dl=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,ih=(e,t,n,o,a,r)=>{const i=a==="svg";t==="class"?Xm(e,o,i):t==="style"?Qm(e,n,o):Wa(t)?pi(t)||th(e,t,n,o,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):lh(e,t,o,i))?(Sl(e,t,o),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&kl(e,t,o,i,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!St(o))?Sl(e,un(t),o,r,t):(t==="true-value"?e._trueValue=o:t==="false-value"&&(e._falseValue=o),kl(e,t,o,i))};function lh(e,t,n,o){if(o)return!!(t==="innerHTML"||t==="textContent"||t in e&&Dl(t)&&Ve(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const a=e.tagName;if(a==="IMG"||a==="VIDEO"||a==="CANVAS"||a==="SOURCE")return!1}return Dl(t)&&St(n)?!1:t in e}const Wo=e=>{const t=e.props["onUpdate:modelValue"]||!1;return He(t)?n=>ca(t,n):t};function ch(e){e.target.composing=!0}function Tl(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Mn=Symbol("_assign"),ge={created(e,{modifiers:{lazy:t,trim:n,number:o}},a){e[Mn]=Wo(a);const r=o||a.props&&a.props.type==="number";Jn(e,t?"change":"input",i=>{if(i.target.composing)return;let l=e.value;n&&(l=l.trim()),r&&(l=Ca(l)),e[Mn](l)}),n&&Jn(e,"change",()=>{e.value=e.value.trim()}),t||(Jn(e,"compositionstart",ch),Jn(e,"compositionend",Tl),Jn(e,"change",Tl))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:o,trim:a,number:r}},i){if(e[Mn]=Wo(i),e.composing)return;const l=(r||e.type==="number")&&!/^0\d/.test(e.value)?Ca(e.value):e.value,c=t??"";l!==c&&(document.activeElement===e&&e.type!=="range"&&(o&&t===n||a&&e.value.trim()===c)||(e.value=c))}},ws={deep:!0,created(e,t,n){e[Mn]=Wo(n),Jn(e,"change",()=>{const o=e._modelValue,a=Hs(e),r=e.checked,i=e[Mn];if(He(o)){const l=gi(o,a),c=l!==-1;if(r&&!c)i(o.concat(a));else if(!r&&c){const u=[...o];u.splice(l,1),i(u)}}else if(Qo(o)){const l=new Set(o);r?l.add(a):l.delete(a),i(l)}else i(Ru(e,r))})},mounted:Al,beforeUpdate(e,t,n){e[Mn]=Wo(n),Al(e,t,n)}};function Al(e,{value:t,oldValue:n},o){e._modelValue=t;let a;if(He(t))a=gi(t,o.props.value)>-1;else if(Qo(t))a=t.has(o.props.value);else{if(t===n)return;a=Ls(t,Ru(e,!0))}e.checked!==a&&(e.checked=a)}const Ht={deep:!0,created(e,{value:t,modifiers:{number:n}},o){const a=Qo(t);Jn(e,"change",()=>{const r=Array.prototype.filter.call(e.options,i=>i.selected).map(i=>n?Ca(Hs(i)):Hs(i));e[Mn](e.multiple?a?new Set(r):r:r[0]),e._assigning=!0,$o(()=>{e._assigning=!1})}),e[Mn]=Wo(o)},mounted(e,{value:t}){Il(e,t)},beforeUpdate(e,t,n){e[Mn]=Wo(n)},updated(e,{value:t}){e._assigning||Il(e,t)}};function Il(e,t){const n=e.multiple,o=He(t);if(!(n&&!o&&!Qo(t))){for(let a=0,r=e.options.length;a<r;a++){const i=e.options[a],l=Hs(i);if(n)if(o){const c=typeof l;c==="string"||c==="number"?i.selected=t.some(u=>String(u)===String(l)):i.selected=gi(t,l)>-1}else i.selected=t.has(l);else if(Ls(Hs(i),t)){e.selectedIndex!==a&&(e.selectedIndex=a);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Hs(e){return"_value"in e?e._value:e.value}function Ru(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const uh=["ctrl","shift","alt","meta"],dh={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>uh.some(n=>e[`${n}Key`]&&!t.includes(n))},Ge=(e,t)=>{const n=e._withMods||(e._withMods={}),o=t.join(".");return n[o]||(n[o]=(a,...r)=>{for(let i=0;i<t.length;i++){const l=dh[t[i]];if(l&&l(a,t))return}return e(a,...r)})},fh={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},xn=(e,t)=>{const n=e._withKeys||(e._withKeys={}),o=t.join(".");return n[o]||(n[o]=a=>{if(!("key"in a))return;const r=so(a.key);if(t.some(i=>i===r||fh[i]===r))return e(a)})},ph=Lt({patchProp:ih},Km);let Rl;function mh(){return Rl||(Rl=vm(ph))}const hh=(...e)=>{const t=mh().createApp(...e),{mount:n}=t;return t.mount=o=>{const a=vh(o);if(!a)return;const r=t._component;!Ve(r)&&!r.render&&!r.template&&(r.template=a.innerHTML),a.nodeType===1&&(a.textContent="");const i=n(a,!1,gh(a));return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),i},t};function gh(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function vh(e){return St(e)?document.querySelector(e):e}/*!
 * pinia v3.0.2
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Pu;const nr=e=>Pu=e,Hu=Symbol();function Zr(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var ys;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(ys||(ys={}));function bh(){const e=Ac(!0),t=e.run(()=>pe({}));let n=[],o=[];const a=ki({install(r){nr(a),a._a=r,r.provide(Hu,a),r.config.globalProperties.$pinia=a,o.forEach(i=>n.push(i)),o=[]},use(r){return this._a?n.push(r):o.push(r),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return a}const Ou=()=>{};function Pl(e,t,n,o=Ou){e.push(t);const a=()=>{const r=e.indexOf(t);r>-1&&(e.splice(r,1),o())};return!n&&Ic()&&ip(a),a}function Ro(e,...t){e.slice().forEach(n=>{n(...t)})}const wh=e=>e(),Hl=Symbol(),Sr=Symbol();function ei(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,o)=>e.set(o,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const o=t[n],a=e[n];Zr(a)&&Zr(o)&&e.hasOwnProperty(n)&&!gt(o)&&!Bn(o)?e[n]=ei(a,o):e[n]=o}return e}const yh=Symbol();function Ch(e){return!Zr(e)||!Object.prototype.hasOwnProperty.call(e,yh)}const{assign:qn}=Object;function xh(e){return!!(gt(e)&&e.effect)}function _h(e,t,n,o){const{state:a,actions:r,getters:i}=t,l=n.state.value[e];let c;function u(){l||(n.state.value[e]=a?a():{});const p=Ap(n.state.value[e]);return qn(p,r,Object.keys(i||{}).reduce((d,m)=>(d[m]=ki(Je(()=>{nr(n);const v=n._s.get(e);return i[m].call(v,v)})),d),{}))}return c=Bu(e,u,t,n,o,!0),c}function Bu(e,t,n={},o,a,r){let i;const l=qn({actions:{}},n),c={deep:!0};let u,p,d=[],m=[],v;const C=o.state.value[e];!r&&!C&&(o.state.value[e]={}),pe({});let w;function g(ae){let j;u=p=!1,typeof ae=="function"?(ae(o.state.value[e]),j={type:ys.patchFunction,storeId:e,events:v}):(ei(o.state.value[e],ae),j={type:ys.patchObject,payload:ae,storeId:e,events:v});const H=w=Symbol();$o().then(()=>{w===H&&(u=!0)}),p=!0,Ro(d,j,o.state.value[e])}const S=r?function(){const{state:j}=n,H=j?j():{};this.$patch(N=>{qn(N,H)})}:Ou;function L(){i.stop(),d=[],m=[],o._s.delete(e)}const B=(ae,j="")=>{if(Hl in ae)return ae[Sr]=j,ae;const H=function(){nr(o);const N=Array.from(arguments),R=[],E=[];function K(Z){R.push(Z)}function $e(Z){E.push(Z)}Ro(m,{args:N,name:H[Sr],store:T,after:K,onError:$e});let se;try{se=ae.apply(this&&this.$id===e?this:T,N)}catch(Z){throw Ro(E,Z),Z}return se instanceof Promise?se.then(Z=>(Ro(R,Z),Z)).catch(Z=>(Ro(E,Z),Promise.reject(Z))):(Ro(R,se),se)};return H[Hl]=!0,H[Sr]=j,H},V={_p:o,$id:e,$onAction:Pl.bind(null,m),$patch:g,$reset:S,$subscribe(ae,j={}){const H=Pl(d,ae,j.detached,()=>N()),N=i.run(()=>cn(()=>o.state.value[e],R=>{(j.flush==="sync"?p:u)&&ae({storeId:e,type:ys.direct,events:v},R)},qn({},c,j)));return H},$dispose:L},T=dn(V);o._s.set(e,T);const ee=(o._a&&o._a.runWithContext||wh)(()=>o._e.run(()=>(i=Ac()).run(()=>t({action:B}))));for(const ae in ee){const j=ee[ae];if(gt(j)&&!xh(j)||Bn(j))r||(C&&Ch(j)&&(gt(j)?j.value=C[ae]:ei(j,C[ae])),o.state.value[e][ae]=j);else if(typeof j=="function"){const H=B(j,ae);ee[ae]=H,l.actions[ae]=j}}return qn(T,ee),qn(Xe(T),ee),Object.defineProperty(T,"$state",{get:()=>o.state.value[e],set:ae=>{g(j=>{qn(j,ae)})}}),o._p.forEach(ae=>{qn(T,i.run(()=>ae({store:T,app:o._a,pinia:o,options:l})))}),C&&r&&n.hydrate&&n.hydrate(T.$state,C),u=!0,p=!0,T}/*! #__NO_SIDE_EFFECTS__ */function lo(e,t,n){let o;const a=typeof t=="function";o=a?n:t;function r(i,l){const c=um();return i=i||(c?gn(Hu,null):null),i&&nr(i),i=Pu,i._s.has(e)||(a?Bu(e,t,o,i):_h(e,o,i)),i._s.get(e)}return r.$id=e,r}function _o(e){const t=Xe(e),n={};for(const o in t){const a=t[o];a.effect?n[o]=Je({get:()=>e[o],set(r){e[o]=r}}):(gt(a)||Bn(a))&&(n[o]=Gc(e,o))}return n}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Bo=typeof document<"u";function Mu(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function kh(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Mu(e.default)}const nt=Object.assign;function $r(e,t){const n={};for(const o in t){const a=t[o];n[o]=vn(a)?a.map(e):e(a)}return n}const Cs=()=>{},vn=Array.isArray,Lu=/#/g,Sh=/&/g,$h=/\//g,Eh=/=/g,Dh=/\?/g,Nu=/\+/g,Th=/%5B/g,Ah=/%5D/g,Vu=/%5E/g,Ih=/%60/g,ju=/%7B/g,Rh=/%7C/g,Fu=/%7D/g,Ph=/%20/g;function Ai(e){return encodeURI(""+e).replace(Rh,"|").replace(Th,"[").replace(Ah,"]")}function Hh(e){return Ai(e).replace(ju,"{").replace(Fu,"}").replace(Vu,"^")}function ti(e){return Ai(e).replace(Nu,"%2B").replace(Ph,"+").replace(Lu,"%23").replace(Sh,"%26").replace(Ih,"`").replace(ju,"{").replace(Fu,"}").replace(Vu,"^")}function Oh(e){return ti(e).replace(Eh,"%3D")}function Bh(e){return Ai(e).replace(Lu,"%23").replace(Dh,"%3F")}function Mh(e){return e==null?"":Bh(e).replace($h,"%2F")}function Os(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const Lh=/\/$/,Nh=e=>e.replace(Lh,"");function Er(e,t,n="/"){let o,a={},r="",i="";const l=t.indexOf("#");let c=t.indexOf("?");return l<c&&l>=0&&(c=-1),c>-1&&(o=t.slice(0,c),r=t.slice(c+1,l>-1?l:t.length),a=e(r)),l>-1&&(o=o||t.slice(0,l),i=t.slice(l,t.length)),o=Uh(o??t,n),{fullPath:o+(r&&"?")+r+i,path:o,query:a,hash:Os(i)}}function Vh(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Ol(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function jh(e,t,n){const o=t.matched.length-1,a=n.matched.length-1;return o>-1&&o===a&&Ko(t.matched[o],n.matched[a])&&Uu(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Ko(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Uu(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!Fh(e[n],t[n]))return!1;return!0}function Fh(e,t){return vn(e)?Bl(e,t):vn(t)?Bl(t,e):e===t}function Bl(e,t){return vn(t)?e.length===t.length&&e.every((n,o)=>n===t[o]):e.length===1&&e[0]===t}function Uh(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),o=e.split("/"),a=o[o.length-1];(a===".."||a===".")&&o.push("");let r=n.length-1,i,l;for(i=0;i<o.length;i++)if(l=o[i],l!==".")if(l==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+o.slice(i).join("/")}const zn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Bs;(function(e){e.pop="pop",e.push="push"})(Bs||(Bs={}));var xs;(function(e){e.back="back",e.forward="forward",e.unknown=""})(xs||(xs={}));function zh(e){if(!e)if(Bo){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Nh(e)}const qh=/^[^#]+#/;function Wh(e,t){return e.replace(qh,"#")+t}function Kh(e,t){const n=document.documentElement.getBoundingClientRect(),o=e.getBoundingClientRect();return{behavior:t.behavior,left:o.left-n.left-(t.left||0),top:o.top-n.top-(t.top||0)}}const or=()=>({left:window.scrollX,top:window.scrollY});function Yh(e){let t;if("el"in e){const n=e.el,o=typeof n=="string"&&n.startsWith("#"),a=typeof n=="string"?o?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!a)return;t=Kh(a,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Ml(e,t){return(history.state?history.state.position-t:-1)+e}const ni=new Map;function Xh(e,t){ni.set(e,t)}function Gh(e){const t=ni.get(e);return ni.delete(e),t}let Jh=()=>location.protocol+"//"+location.host;function zu(e,t){const{pathname:n,search:o,hash:a}=t,r=e.indexOf("#");if(r>-1){let l=a.includes(e.slice(r))?e.slice(r).length:1,c=a.slice(l);return c[0]!=="/"&&(c="/"+c),Ol(c,"")}return Ol(n,e)+o+a}function Qh(e,t,n,o){let a=[],r=[],i=null;const l=({state:m})=>{const v=zu(e,location),C=n.value,w=t.value;let g=0;if(m){if(n.value=v,t.value=m,i&&i===C){i=null;return}g=w?m.position-w.position:0}else o(v);a.forEach(S=>{S(n.value,C,{delta:g,type:Bs.pop,direction:g?g>0?xs.forward:xs.back:xs.unknown})})};function c(){i=n.value}function u(m){a.push(m);const v=()=>{const C=a.indexOf(m);C>-1&&a.splice(C,1)};return r.push(v),v}function p(){const{history:m}=window;m.state&&m.replaceState(nt({},m.state,{scroll:or()}),"")}function d(){for(const m of r)m();r=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",p)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",p,{passive:!0}),{pauseListeners:c,listen:u,destroy:d}}function Ll(e,t,n,o=!1,a=!1){return{back:e,current:t,forward:n,replaced:o,position:window.history.length,scroll:a?or():null}}function Zh(e){const{history:t,location:n}=window,o={value:zu(e,n)},a={value:t.state};a.value||r(o.value,{back:null,current:o.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(c,u,p){const d=e.indexOf("#"),m=d>-1?(n.host&&document.querySelector("base")?e:e.slice(d))+c:Jh()+e+c;try{t[p?"replaceState":"pushState"](u,"",m),a.value=u}catch(v){console.error(v),n[p?"replace":"assign"](m)}}function i(c,u){const p=nt({},t.state,Ll(a.value.back,c,a.value.forward,!0),u,{position:a.value.position});r(c,p,!0),o.value=c}function l(c,u){const p=nt({},a.value,t.state,{forward:c,scroll:or()});r(p.current,p,!0);const d=nt({},Ll(o.value,c,null),{position:p.position+1},u);r(c,d,!1),o.value=c}return{location:o,state:a,push:l,replace:i}}function eg(e){e=zh(e);const t=Zh(e),n=Qh(e,t.state,t.location,t.replace);function o(r,i=!0){i||n.pauseListeners(),history.go(r)}const a=nt({location:"",base:e,go:o,createHref:Wh.bind(null,e)},t,n);return Object.defineProperty(a,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(a,"state",{enumerable:!0,get:()=>t.state.value}),a}function tg(e){return typeof e=="string"||e&&typeof e=="object"}function qu(e){return typeof e=="string"||typeof e=="symbol"}const Wu=Symbol("");var Nl;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(Nl||(Nl={}));function Yo(e,t){return nt(new Error,{type:e,[Wu]:!0},t)}function In(e,t){return e instanceof Error&&Wu in e&&(t==null||!!(e.type&t))}const Vl="[^/]+?",ng={sensitive:!1,strict:!1,start:!0,end:!0},og=/[.+*?^${}()[\]/\\]/g;function sg(e,t){const n=nt({},ng,t),o=[];let a=n.start?"^":"";const r=[];for(const u of e){const p=u.length?[]:[90];n.strict&&!u.length&&(a+="/");for(let d=0;d<u.length;d++){const m=u[d];let v=40+(n.sensitive?.25:0);if(m.type===0)d||(a+="/"),a+=m.value.replace(og,"\\$&"),v+=40;else if(m.type===1){const{value:C,repeatable:w,optional:g,regexp:S}=m;r.push({name:C,repeatable:w,optional:g});const L=S||Vl;if(L!==Vl){v+=10;try{new RegExp(`(${L})`)}catch(V){throw new Error(`Invalid custom RegExp for param "${C}" (${L}): `+V.message)}}let B=w?`((?:${L})(?:/(?:${L}))*)`:`(${L})`;d||(B=g&&u.length<2?`(?:/${B})`:"/"+B),g&&(B+="?"),a+=B,v+=20,g&&(v+=-8),w&&(v+=-20),L===".*"&&(v+=-50)}p.push(v)}o.push(p)}if(n.strict&&n.end){const u=o.length-1;o[u][o[u].length-1]+=.7000000000000001}n.strict||(a+="/?"),n.end?a+="$":n.strict&&!a.endsWith("/")&&(a+="(?:/|$)");const i=new RegExp(a,n.sensitive?"":"i");function l(u){const p=u.match(i),d={};if(!p)return null;for(let m=1;m<p.length;m++){const v=p[m]||"",C=r[m-1];d[C.name]=v&&C.repeatable?v.split("/"):v}return d}function c(u){let p="",d=!1;for(const m of e){(!d||!p.endsWith("/"))&&(p+="/"),d=!1;for(const v of m)if(v.type===0)p+=v.value;else if(v.type===1){const{value:C,repeatable:w,optional:g}=v,S=C in u?u[C]:"";if(vn(S)&&!w)throw new Error(`Provided param "${C}" is an array but it is not repeatable (* or + modifiers)`);const L=vn(S)?S.join("/"):S;if(!L)if(g)m.length<2&&(p.endsWith("/")?p=p.slice(0,-1):d=!0);else throw new Error(`Missing required param "${C}"`);p+=L}}return p||"/"}return{re:i,score:o,keys:r,parse:l,stringify:c}}function ag(e,t){let n=0;for(;n<e.length&&n<t.length;){const o=t[n]-e[n];if(o)return o;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Ku(e,t){let n=0;const o=e.score,a=t.score;for(;n<o.length&&n<a.length;){const r=ag(o[n],a[n]);if(r)return r;n++}if(Math.abs(a.length-o.length)===1){if(jl(o))return 1;if(jl(a))return-1}return a.length-o.length}function jl(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const rg={type:0,value:""},ig=/[a-zA-Z0-9_]/;function lg(e){if(!e)return[[]];if(e==="/")return[[rg]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(v){throw new Error(`ERR (${n})/"${u}": ${v}`)}let n=0,o=n;const a=[];let r;function i(){r&&a.push(r),r=[]}let l=0,c,u="",p="";function d(){u&&(n===0?r.push({type:0,value:u}):n===1||n===2||n===3?(r.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:u,regexp:p,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),u="")}function m(){u+=c}for(;l<e.length;){if(c=e[l++],c==="\\"&&n!==2){o=n,n=4;continue}switch(n){case 0:c==="/"?(u&&d(),i()):c===":"?(d(),n=1):m();break;case 4:m(),n=o;break;case 1:c==="("?n=2:ig.test(c)?m():(d(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&l--);break;case 2:c===")"?p[p.length-1]=="\\"?p=p.slice(0,-1)+c:n=3:p+=c;break;case 3:d(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&l--,p="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${u}"`),d(),i(),a}function cg(e,t,n){const o=sg(lg(e.path),n),a=nt(o,{record:e,parent:t,children:[],alias:[]});return t&&!a.record.aliasOf==!t.record.aliasOf&&t.children.push(a),a}function ug(e,t){const n=[],o=new Map;t=ql({strict:!1,end:!0,sensitive:!1},t);function a(d){return o.get(d)}function r(d,m,v){const C=!v,w=Ul(d);w.aliasOf=v&&v.record;const g=ql(t,d),S=[w];if("alias"in d){const V=typeof d.alias=="string"?[d.alias]:d.alias;for(const T of V)S.push(Ul(nt({},w,{components:v?v.record.components:w.components,path:T,aliasOf:v?v.record:w})))}let L,B;for(const V of S){const{path:T}=V;if(m&&T[0]!=="/"){const te=m.record.path,ee=te[te.length-1]==="/"?"":"/";V.path=m.record.path+(T&&ee+T)}if(L=cg(V,m,g),v?v.alias.push(L):(B=B||L,B!==L&&B.alias.push(L),C&&d.name&&!zl(L)&&i(d.name)),Yu(L)&&c(L),w.children){const te=w.children;for(let ee=0;ee<te.length;ee++)r(te[ee],L,v&&v.children[ee])}v=v||L}return B?()=>{i(B)}:Cs}function i(d){if(qu(d)){const m=o.get(d);m&&(o.delete(d),n.splice(n.indexOf(m),1),m.children.forEach(i),m.alias.forEach(i))}else{const m=n.indexOf(d);m>-1&&(n.splice(m,1),d.record.name&&o.delete(d.record.name),d.children.forEach(i),d.alias.forEach(i))}}function l(){return n}function c(d){const m=pg(d,n);n.splice(m,0,d),d.record.name&&!zl(d)&&o.set(d.record.name,d)}function u(d,m){let v,C={},w,g;if("name"in d&&d.name){if(v=o.get(d.name),!v)throw Yo(1,{location:d});g=v.record.name,C=nt(Fl(m.params,v.keys.filter(B=>!B.optional).concat(v.parent?v.parent.keys.filter(B=>B.optional):[]).map(B=>B.name)),d.params&&Fl(d.params,v.keys.map(B=>B.name))),w=v.stringify(C)}else if(d.path!=null)w=d.path,v=n.find(B=>B.re.test(w)),v&&(C=v.parse(w),g=v.record.name);else{if(v=m.name?o.get(m.name):n.find(B=>B.re.test(m.path)),!v)throw Yo(1,{location:d,currentLocation:m});g=v.record.name,C=nt({},m.params,d.params),w=v.stringify(C)}const S=[];let L=v;for(;L;)S.unshift(L.record),L=L.parent;return{name:g,path:w,params:C,matched:S,meta:fg(S)}}e.forEach(d=>r(d));function p(){n.length=0,o.clear()}return{addRoute:r,resolve:u,removeRoute:i,clearRoutes:p,getRoutes:l,getRecordMatcher:a}}function Fl(e,t){const n={};for(const o of t)o in e&&(n[o]=e[o]);return n}function Ul(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:dg(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function dg(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const o in e.components)t[o]=typeof n=="object"?n[o]:n;return t}function zl(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function fg(e){return e.reduce((t,n)=>nt(t,n.meta),{})}function ql(e,t){const n={};for(const o in e)n[o]=o in t?t[o]:e[o];return n}function pg(e,t){let n=0,o=t.length;for(;n!==o;){const r=n+o>>1;Ku(e,t[r])<0?o=r:n=r+1}const a=mg(e);return a&&(o=t.lastIndexOf(a,o-1)),o}function mg(e){let t=e;for(;t=t.parent;)if(Yu(t)&&Ku(e,t)===0)return t}function Yu({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function hg(e){const t={};if(e===""||e==="?")return t;const o=(e[0]==="?"?e.slice(1):e).split("&");for(let a=0;a<o.length;++a){const r=o[a].replace(Nu," "),i=r.indexOf("="),l=Os(i<0?r:r.slice(0,i)),c=i<0?null:Os(r.slice(i+1));if(l in t){let u=t[l];vn(u)||(u=t[l]=[u]),u.push(c)}else t[l]=c}return t}function Wl(e){let t="";for(let n in e){const o=e[n];if(n=Oh(n),o==null){o!==void 0&&(t+=(t.length?"&":"")+n);continue}(vn(o)?o.map(r=>r&&ti(r)):[o&&ti(o)]).forEach(r=>{r!==void 0&&(t+=(t.length?"&":"")+n,r!=null&&(t+="="+r))})}return t}function gg(e){const t={};for(const n in e){const o=e[n];o!==void 0&&(t[n]=vn(o)?o.map(a=>a==null?null:""+a):o==null?o:""+o)}return t}const vg=Symbol(""),Kl=Symbol(""),sr=Symbol(""),Xu=Symbol(""),oi=Symbol("");function ls(){let e=[];function t(o){return e.push(o),()=>{const a=e.indexOf(o);a>-1&&e.splice(a,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function Xn(e,t,n,o,a,r=i=>i()){const i=o&&(o.enterCallbacks[a]=o.enterCallbacks[a]||[]);return()=>new Promise((l,c)=>{const u=m=>{m===!1?c(Yo(4,{from:n,to:t})):m instanceof Error?c(m):tg(m)?c(Yo(2,{from:t,to:m})):(i&&o.enterCallbacks[a]===i&&typeof m=="function"&&i.push(m),l())},p=r(()=>e.call(o&&o.instances[a],t,n,u));let d=Promise.resolve(p);e.length<3&&(d=d.then(u)),d.catch(m=>c(m))})}function Dr(e,t,n,o,a=r=>r()){const r=[];for(const i of e)for(const l in i.components){let c=i.components[l];if(!(t!=="beforeRouteEnter"&&!i.instances[l]))if(Mu(c)){const p=(c.__vccOpts||c)[t];p&&r.push(Xn(p,n,o,i,l,a))}else{let u=c();r.push(()=>u.then(p=>{if(!p)throw new Error(`Couldn't resolve component "${l}" at "${i.path}"`);const d=kh(p)?p.default:p;i.mods[l]=p,i.components[l]=d;const v=(d.__vccOpts||d)[t];return v&&Xn(v,n,o,i,l,a)()}))}}return r}function Yl(e){const t=gn(sr),n=gn(Xu),o=Je(()=>{const c=ue(e.to);return t.resolve(c)}),a=Je(()=>{const{matched:c}=o.value,{length:u}=c,p=c[u-1],d=n.matched;if(!p||!d.length)return-1;const m=d.findIndex(Ko.bind(null,p));if(m>-1)return m;const v=Xl(c[u-2]);return u>1&&Xl(p)===v&&d[d.length-1].path!==v?d.findIndex(Ko.bind(null,c[u-2])):m}),r=Je(()=>a.value>-1&&xg(n.params,o.value.params)),i=Je(()=>a.value>-1&&a.value===n.matched.length-1&&Uu(n.params,o.value.params));function l(c={}){if(Cg(c)){const u=t[ue(e.replace)?"replace":"push"](ue(e.to)).catch(Cs);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:o,href:Je(()=>o.value.href),isActive:r,isExactActive:i,navigate:l}}function bg(e){return e.length===1?e[0]:e}const wg=ou({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Yl,setup(e,{slots:t}){const n=dn(Yl(e)),{options:o}=gn(sr),a=Je(()=>({[Gl(e.activeClass,o.linkActiveClass,"router-link-active")]:n.isActive,[Gl(e.exactActiveClass,o.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=t.default&&bg(t.default(n));return e.custom?r:Tu("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:a.value},r)}}}),yg=wg;function Cg(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function xg(e,t){for(const n in t){const o=t[n],a=e[n];if(typeof o=="string"){if(o!==a)return!1}else if(!vn(a)||a.length!==o.length||o.some((r,i)=>r!==a[i]))return!1}return!0}function Xl(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Gl=(e,t,n)=>e??t??n,_g=ou({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const o=gn(oi),a=Je(()=>e.route||o.value),r=gn(Kl,0),i=Je(()=>{let u=ue(r);const{matched:p}=a.value;let d;for(;(d=p[u])&&!d.components;)u++;return u}),l=Je(()=>a.value.matched[i.value]);ua(Kl,Je(()=>i.value+1)),ua(vg,l),ua(oi,a);const c=pe();return cn(()=>[c.value,l.value,e.name],([u,p,d],[m,v,C])=>{p&&(p.instances[d]=u,v&&v!==p&&u&&u===m&&(p.leaveGuards.size||(p.leaveGuards=v.leaveGuards),p.updateGuards.size||(p.updateGuards=v.updateGuards))),u&&p&&(!v||!Ko(p,v)||!m)&&(p.enterCallbacks[d]||[]).forEach(w=>w(u))},{flush:"post"}),()=>{const u=a.value,p=e.name,d=l.value,m=d&&d.components[p];if(!m)return Jl(n.default,{Component:m,route:u});const v=d.props[p],C=v?v===!0?u.params:typeof v=="function"?v(u):v:null,g=Tu(m,nt({},C,t,{onVnodeUnmounted:S=>{S.component.isUnmounted&&(d.instances[p]=null)},ref:c}));return Jl(n.default,{Component:g,route:u})||g}}});function Jl(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const kg=_g;function Sg(e){const t=ug(e.routes,e),n=e.parseQuery||hg,o=e.stringifyQuery||Wl,a=e.history,r=ls(),i=ls(),l=ls(),c=Ep(zn);let u=zn;Bo&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const p=$r.bind(null,G=>""+G),d=$r.bind(null,Mh),m=$r.bind(null,Os);function v(G,Se){let Ce,Ae;return qu(G)?(Ce=t.getRecordMatcher(G),Ae=Se):Ae=G,t.addRoute(Ae,Ce)}function C(G){const Se=t.getRecordMatcher(G);Se&&t.removeRoute(Se)}function w(){return t.getRoutes().map(G=>G.record)}function g(G){return!!t.getRecordMatcher(G)}function S(G,Se){if(Se=nt({},Se||c.value),typeof G=="string"){const P=Er(n,G,Se.path),X=t.resolve({path:P.path},Se),ne=a.createHref(P.fullPath);return nt(P,X,{params:m(X.params),hash:Os(P.hash),redirectedFrom:void 0,href:ne})}let Ce;if(G.path!=null)Ce=nt({},G,{path:Er(n,G.path,Se.path).path});else{const P=nt({},G.params);for(const X in P)P[X]==null&&delete P[X];Ce=nt({},G,{params:d(P)}),Se.params=d(Se.params)}const Ae=t.resolve(Ce,Se),Ze=G.hash||"";Ae.params=p(m(Ae.params));const x=Vh(o,nt({},G,{hash:Hh(Ze),path:Ae.path})),_=a.createHref(x);return nt({fullPath:x,hash:Ze,query:o===Wl?gg(G.query):G.query||{}},Ae,{redirectedFrom:void 0,href:_})}function L(G){return typeof G=="string"?Er(n,G,c.value.path):nt({},G)}function B(G,Se){if(u!==G)return Yo(8,{from:Se,to:G})}function V(G){return ee(G)}function T(G){return V(nt(L(G),{replace:!0}))}function te(G){const Se=G.matched[G.matched.length-1];if(Se&&Se.redirect){const{redirect:Ce}=Se;let Ae=typeof Ce=="function"?Ce(G):Ce;return typeof Ae=="string"&&(Ae=Ae.includes("?")||Ae.includes("#")?Ae=L(Ae):{path:Ae},Ae.params={}),nt({query:G.query,hash:G.hash,params:Ae.path!=null?{}:G.params},Ae)}}function ee(G,Se){const Ce=u=S(G),Ae=c.value,Ze=G.state,x=G.force,_=G.replace===!0,P=te(Ce);if(P)return ee(nt(L(P),{state:typeof P=="object"?nt({},Ze,P.state):Ze,force:x,replace:_}),Se||Ce);const X=Ce;X.redirectedFrom=Se;let ne;return!x&&jh(o,Ae,Ce)&&(ne=Yo(16,{to:X,from:Ae}),M(Ae,Ae,!0,!1)),(ne?Promise.resolve(ne):H(X,Ae)).catch(Q=>In(Q)?In(Q,2)?Q:z(Q):Ee(Q,X,Ae)).then(Q=>{if(Q){if(In(Q,2))return ee(nt({replace:_},L(Q.to),{state:typeof Q.to=="object"?nt({},Ze,Q.to.state):Ze,force:x}),Se||X)}else Q=R(X,Ae,!0,_,Ze);return N(X,Ae,Q),Q})}function ae(G,Se){const Ce=B(G,Se);return Ce?Promise.reject(Ce):Promise.resolve()}function j(G){const Se=ce.values().next().value;return Se&&typeof Se.runWithContext=="function"?Se.runWithContext(G):G()}function H(G,Se){let Ce;const[Ae,Ze,x]=$g(G,Se);Ce=Dr(Ae.reverse(),"beforeRouteLeave",G,Se);for(const P of Ae)P.leaveGuards.forEach(X=>{Ce.push(Xn(X,G,Se))});const _=ae.bind(null,G,Se);return Ce.push(_),dt(Ce).then(()=>{Ce=[];for(const P of r.list())Ce.push(Xn(P,G,Se));return Ce.push(_),dt(Ce)}).then(()=>{Ce=Dr(Ze,"beforeRouteUpdate",G,Se);for(const P of Ze)P.updateGuards.forEach(X=>{Ce.push(Xn(X,G,Se))});return Ce.push(_),dt(Ce)}).then(()=>{Ce=[];for(const P of x)if(P.beforeEnter)if(vn(P.beforeEnter))for(const X of P.beforeEnter)Ce.push(Xn(X,G,Se));else Ce.push(Xn(P.beforeEnter,G,Se));return Ce.push(_),dt(Ce)}).then(()=>(G.matched.forEach(P=>P.enterCallbacks={}),Ce=Dr(x,"beforeRouteEnter",G,Se,j),Ce.push(_),dt(Ce))).then(()=>{Ce=[];for(const P of i.list())Ce.push(Xn(P,G,Se));return Ce.push(_),dt(Ce)}).catch(P=>In(P,8)?P:Promise.reject(P))}function N(G,Se,Ce){l.list().forEach(Ae=>j(()=>Ae(G,Se,Ce)))}function R(G,Se,Ce,Ae,Ze){const x=B(G,Se);if(x)return x;const _=Se===zn,P=Bo?history.state:{};Ce&&(Ae||_?a.replace(G.fullPath,nt({scroll:_&&P&&P.scroll},Ze)):a.push(G.fullPath,Ze)),c.value=G,M(G,Se,Ce,_),z()}let E;function K(){E||(E=a.listen((G,Se,Ce)=>{if(!De.listening)return;const Ae=S(G),Ze=te(Ae);if(Ze){ee(nt(Ze,{replace:!0,force:!0}),Ae).catch(Cs);return}u=Ae;const x=c.value;Bo&&Xh(Ml(x.fullPath,Ce.delta),or()),H(Ae,x).catch(_=>In(_,12)?_:In(_,2)?(ee(nt(L(_.to),{force:!0}),Ae).then(P=>{In(P,20)&&!Ce.delta&&Ce.type===Bs.pop&&a.go(-1,!1)}).catch(Cs),Promise.reject()):(Ce.delta&&a.go(-Ce.delta,!1),Ee(_,Ae,x))).then(_=>{_=_||R(Ae,x,!1),_&&(Ce.delta&&!In(_,8)?a.go(-Ce.delta,!1):Ce.type===Bs.pop&&In(_,20)&&a.go(-1,!1)),N(Ae,x,_)}).catch(Cs)}))}let $e=ls(),se=ls(),Z;function Ee(G,Se,Ce){z(G);const Ae=se.list();return Ae.length?Ae.forEach(Ze=>Ze(G,Se,Ce)):console.error(G),Promise.reject(G)}function je(){return Z&&c.value!==zn?Promise.resolve():new Promise((G,Se)=>{$e.add([G,Se])})}function z(G){return Z||(Z=!G,K(),$e.list().forEach(([Se,Ce])=>G?Ce(G):Se()),$e.reset()),G}function M(G,Se,Ce,Ae){const{scrollBehavior:Ze}=e;if(!Bo||!Ze)return Promise.resolve();const x=!Ce&&Gh(Ml(G.fullPath,0))||(Ae||!Ce)&&history.state&&history.state.scroll||null;return $o().then(()=>Ze(G,Se,x)).then(_=>_&&Yh(_)).catch(_=>Ee(_,G,Se))}const Y=G=>a.go(G);let U;const ce=new Set,De={currentRoute:c,listening:!0,addRoute:v,removeRoute:C,clearRoutes:t.clearRoutes,hasRoute:g,getRoutes:w,resolve:S,options:e,push:V,replace:T,go:Y,back:()=>Y(-1),forward:()=>Y(1),beforeEach:r.add,beforeResolve:i.add,afterEach:l.add,onError:se.add,isReady:je,install(G){const Se=this;G.component("RouterLink",yg),G.component("RouterView",kg),G.config.globalProperties.$router=Se,Object.defineProperty(G.config.globalProperties,"$route",{enumerable:!0,get:()=>ue(c)}),Bo&&!U&&c.value===zn&&(U=!0,V(a.location).catch(Ze=>{}));const Ce={};for(const Ze in zn)Object.defineProperty(Ce,Ze,{get:()=>c.value[Ze],enumerable:!0});G.provide(sr,Se),G.provide(Xu,Wc(Ce)),G.provide(oi,c);const Ae=G.unmount;ce.add(G),G.unmount=function(){ce.delete(G),ce.size<1&&(u=zn,E&&E(),E=null,c.value=zn,U=!1,Z=!1),Ae()}}};function dt(G){return G.reduce((Se,Ce)=>Se.then(()=>j(Ce)),Promise.resolve())}return De}function $g(e,t){const n=[],o=[],a=[],r=Math.max(t.matched.length,e.matched.length);for(let i=0;i<r;i++){const l=t.matched[i];l&&(e.matched.find(u=>Ko(u,l))?o.push(l):n.push(l));const c=e.matched[i];c&&(t.matched.find(u=>Ko(u,c))||a.push(c))}return[n,o,a]}function js(){return gn(sr)}const It=[];for(let e=0;e<256;++e)It.push((e+256).toString(16).slice(1));function Eg(e,t=0){return(It[e[t+0]]+It[e[t+1]]+It[e[t+2]]+It[e[t+3]]+"-"+It[e[t+4]]+It[e[t+5]]+"-"+It[e[t+6]]+It[e[t+7]]+"-"+It[e[t+8]]+It[e[t+9]]+"-"+It[e[t+10]]+It[e[t+11]]+It[e[t+12]]+It[e[t+13]]+It[e[t+14]]+It[e[t+15]]).toLowerCase()}let Tr;const Dg=new Uint8Array(16);function Tg(){if(!Tr){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Tr=crypto.getRandomValues.bind(crypto)}return Tr(Dg)}const Ag=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ql={randomUUID:Ag};function Ig(e,t,n){var a;e=e||{};const o=e.random??((a=e.rng)==null?void 0:a.call(e))??Tg();if(o.length<16)throw new Error("Random bytes length must be >= 16");return o[6]=o[6]&15|64,o[8]=o[8]&63|128,Eg(o)}function ht(e,t,n){return Ql.randomUUID?Ql.randomUUID():Ig(e)}const yt=lo("account",{state:()=>({accountData:{version:2,characters:[],activeCharacterId:null,dm:null,players:null,characterFolds:null,diceHistory:null,dmTodoItems:null,dmCollapsedCharacters:null},migrationCompleted:!1,isLoading:!0}),getters:{characters:e=>e.accountData.characters,isDataLoading:e=>e.isLoading},actions:{loadInitialData(){try{const e=localStorage.getItem("dnd-account-data");let t,n=!1;if(e){t=JSON.parse(e);const o=!t.characters||t.characters.length===0,a=localStorage.getItem("dnd-character-data")!==null;o&&a&&(n=!0)}else n=!0;if(n){const o=this._migrateDataFromLegacyLocalStorage();o&&(t=o,this.clearOldLocalStorageData(),console.log("Datos antiguos de localStorage cargados para migracin."))}t&&(!t.version||t.version<2?(this.accountData=this._migrateV1toV2(t),console.log("Migracin de V1 a V2 completada."),this.saveDataToLocalStorage()):this.accountData=t)}catch(e){console.error("Error al cargar o migrar los datos. Empezando con un estado limpio.",e),localStorage.removeItem("dnd-account-data")}finally{this.migrationCompleted=!0,this.isLoading=!1}},_migrateV1toV2(e){const t={version:2,characters:[],activeCharacterId:null,dm:e.dm||null,players:e.players||null,characterFolds:e.characterFolds||null,diceHistory:e.diceHistory||null,dmTodoItems:e.dmTodoItems||null,dmCollapsedCharacters:e.dmCollapsedCharacters||null};if(e.character){const n=ht();let o=[],a={rule:"default",characterLevel:1};e.attacks&&(Array.isArray(e.attacks)?o=e.attacks:(o=e.attacks.attacks||[],e.attacks.criticalHit&&(a=e.attacks.criticalHit))),console.log(" Normalizando ataques. Total:",o.length),o=o.map((i,l)=>{var p;console.log(` Ataque ${l+1} (${i.name}):`,{tieneId:!!i.id,tieneRerollDice:!!i.rerollDice,tieneLifeStealAntiguo:!!i.lifeSteal,damageRollsCount:((p=i.damageRolls)==null?void 0:p.length)||0});const c=i.lifeSteal&&i.lifeSteal.percentage>0?i.lifeSteal.percentage:0;c>0&&console.log(`   Migrando lifeSteal antiguo (${c}%) a damageRolls`);const u={...i,id:i.id||ht(),rerollDice:i.rerollDice||[],damageRolls:(i.damageRolls||[]).map(d=>({...d,lifeSteal:d.lifeSteal||{percentage:c}}))};return delete u.lifeSteal,console.log("   Ataque normalizado:",{id:u.id,rerollDiceCount:u.rerollDice.length,damageRollsWithLifeSteal:u.damageRolls.filter(d=>{var m;return((m=d.lifeSteal)==null?void 0:m.percentage)>0}).length}),u}),console.log(" Normalizacin de ataques completada"),e.criticalHitConfig&&(!e.attacks||!e.attacks.criticalHit)&&(a=e.criticalHitConfig);const r={id:n,characterData:e.character,attacks:o,criticalHit:a,passiveDamages:e.passiveDamages||[],counters:e.counters?e.counters.counters:[],characterState:e.counters?e.counters.states:[]};t.characters.push(r),t.activeCharacterId=n}return t},_migrateDataFromLegacyLocalStorage(){const e=a=>{const r=localStorage.getItem(a);try{return r?JSON.parse(r):null}catch(i){return console.error(`Error parsing ${a} from localStorage:`,i),null}},t=e("dnd-character-data");if(!t)return null;const n=e("dnd-attacks-data");return console.log(" Migrando datos antiguos de localStorage"),console.log(" Ataques encontrados en dnd-attacks-data:",n),{version:1,character:t,dm:e("dnd-dm-data"),players:e("dnd-player-data"),attacks:n,criticalHitConfig:e("dnd-critical-hit-config"),passiveDamages:e("dnd-passive-damages-data"),counters:{counters:e("dnd-counters"),states:e("dnd-states")},characterFolds:e("dnd-character-folds"),diceHistory:e("dice-roller-history"),dmTodoItems:e("dnd-todo-items"),dmCollapsedCharacters:e("collapsedCharacters")}},clearOldLocalStorageData(){localStorage.removeItem("dnd-character-data"),localStorage.removeItem("dnd-dm-data"),localStorage.removeItem("dnd-player-data"),localStorage.removeItem("dnd-attacks-data"),localStorage.removeItem("dnd-passive-damages-data"),localStorage.removeItem("dnd-counters"),localStorage.removeItem("dnd-states"),localStorage.removeItem("a_very_long_list_of_items_that_is_used_now_in_the_new_version"),localStorage.removeItem("dnd-character-folds"),localStorage.removeItem("dice-roller-history"),localStorage.removeItem("dnd-todo-items"),localStorage.removeItem("collapsedCharacters"),localStorage.removeItem("dnd-critical-hit-config")},saveDataToLocalStorage(){localStorage.setItem("dnd-account-data",JSON.stringify(this.accountData))},updateSection(e,t){this.accountData.hasOwnProperty(e)?(this.accountData[e]=t,this.saveDataToLocalStorage()):console.warn(`La clave '${e}' no existe en accountData.`)},getSection(e){return this.accountData[e]},exportData(){return JSON.stringify(this.accountData,null,2)},importData(e){try{const t=JSON.parse(e);return t&&typeof t=="object"&&"version"in t?(this.accountData=t,this.saveDataToLocalStorage(),window.location.reload(),{success:!0}):{success:!1,error:"El archivo no tiene el formato esperado."}}catch(t){return console.error("Error importando datos:",t),{success:!1,error:"El archivo JSON no es vlido."}}},clearAllData(){this.$reset(),localStorage.removeItem("dnd-account-data"),this.clearOldLocalStorageData(),window.location.reload()}}}),Tt=(e,t)=>{const n=e.__vccOpts||e;for(const[o,a]of t)n[o]=a;return n},Rg={class:"home-container fade-in"},Pg={class:"welcome-card"},Hg={key:0,class:"loading-spinner"},Og={key:1,class:"welcome-content"},Bg={class:"action-buttons"},Mg={__name:"HomeView",setup(e){const t=js(),n=yt(),o=Je(()=>n.characters),a=Je(()=>n.isDataLoading),r=Je(()=>o.value&&o.value.length>0),i=()=>{t.push("/config")},l=()=>{t.push("/character-manager")},c=()=>{t.push("/dm")};return(u,p)=>($(),D("div",Rg,[s("div",Pg,[p[5]||(p[5]=s("h1",{class:"welcome-title"}," D&D Life Tracker",-1)),p[6]||(p[6]=s("p",{class:"welcome-subtitle"},"Control de vida para personajes de Dungeons & Dragons",-1)),a.value?($(),D("div",Hg,p[0]||(p[0]=[s("div",{class:"spinner"},null,-1),s("p",null,"Cargando...",-1)]))):($(),D("div",Og,[p[4]||(p[4]=oo('<div class="feature-list" data-v-e90a96d5><div class="feature-item" data-v-e90a96d5><span class="feature-icon" data-v-e90a96d5></span><span class="feature-text" data-v-e90a96d5>Control de vida mxima y actual</span></div><div class="feature-item" data-v-e90a96d5><span class="feature-icon" data-v-e90a96d5></span><span class="feature-text" data-v-e90a96d5>Vida temporal que se consume primero</span></div><div class="feature-item" data-v-e90a96d5><span class="feature-icon" data-v-e90a96d5></span><span class="feature-text" data-v-e90a96d5>Regeneracin pasiva por turno</span></div><div class="feature-item" data-v-e90a96d5><span class="feature-icon" data-v-e90a96d5></span><span class="feature-text" data-v-e90a96d5>Panel del DM para gestionar mltiples personajes</span></div></div>',1)),s("div",Bg,[s("button",{onClick:i,class:"btn btn-primary"},p[1]||(p[1]=[s("span",{class:"btn-icon"},"",-1),s("span",{class:"btn-text"},"Crear Nuevo Personaje",-1)])),r.value?($(),D("button",{key:0,onClick:l,class:"btn btn-secondary"},p[2]||(p[2]=[s("span",{class:"btn-icon"},"",-1),s("span",{class:"btn-text"},"Gestionar Personajes",-1)]))):we("",!0),s("button",{onClick:c,class:"btn btn-success"},p[3]||(p[3]=[s("span",{class:"btn-icon"},"",-1),s("span",{class:"btn-text"},"Panel del DM",-1)]))])]))])]))}},Lg=Tt(Mg,[["__scopeId","data-v-e90a96d5"]]),ma=lo("passiveDamage",{state:()=>({passiveDamages:[]}),actions:{loadData(){const e=yt(),t=e.accountData.activeCharacterId;if(!t){this.passiveDamages=[];return}const n=e.accountData.characters.find(o=>o.id===t);n&&n.passiveDamages?this.passiveDamages=n.passiveDamages.map(o=>({...o,id:o.id||ht(),duration:o.duration!==void 0?o.duration:0,damageRolls:o.damageRolls||[]})):this.passiveDamages=[]},saveData(){const e=yt(),t=e.accountData.activeCharacterId;if(!t)return;const n=e.accountData.characters.findIndex(o=>o.id===t);n!==-1&&(e.accountData.characters[n].passiveDamages=this.passiveDamages,e.saveDataToLocalStorage())},addPassiveDamage(e){const t={...e,id:ht()};this.passiveDamages.push(t),this.saveData()},updatePassiveDamage(e){const t=this.passiveDamages.findIndex(n=>n.id===e.id);t!==-1&&(this.passiveDamages[t]=e,this.saveData())},duplicatePassiveDamage(e){const t=this.passiveDamages.find(n=>n.id===e);if(t){const n=JSON.parse(JSON.stringify(t));n.id=ht(),n.name=`${t.name} (Copia)`;const o=this.passiveDamages.findIndex(a=>a.id===e);this.passiveDamages.splice(o+1,0,n),this.saveData()}},deletePassiveDamage(e){this.passiveDamages=this.passiveDamages.filter(t=>t.id!==e),this.saveData()},decrementDurations(){let e=!1;this.passiveDamages.forEach(n=>{n.duration>0&&(n.duration--,e=!0)});const t=this.passiveDamages.length;this.passiveDamages=this.passiveDamages.filter(n=>n.duration!==0),(e||this.passiveDamages.length!==t)&&this.saveData()}}});function Ng(e,t,n){let o=0;for(let a=0;a<e;a++)o+=Math.floor(Math.random()*t)+1;return o+n}const ko=[{id:"bludgeoning",name:"Contundente",color:"#a1887f"},{id:"piercing",name:"Perforante",color:"#757575"},{id:"slashing",name:"Cortante",color:"#bdbdbd"},{id:"acid",name:"cido",color:"#8bc34a"},{id:"cold",name:"Fro",color:"#26c6da"},{id:"fire",name:"Fuego",color:"#ff7043"},{id:"force",name:"Fuerza",color:"#ab47bc"},{id:"lightning",name:"Elctrico",color:"#ffca28"},{id:"necrotic",name:"Necrtico",color:"#546e7a"},{id:"poison",name:"Veneno",color:"#66bb6a"},{id:"psychic",name:"Psquico",color:"#ec407a"},{id:"radiant",name:"Radiante",color:"#ffee58"},{id:"thunder",name:"Trueno",color:"#7e57c2"}],Gu=e=>{const t=ko.find(n=>n.id===e);return t?t.color:"#ffffff"},Ju=lo("attack",{state:()=>({attacks:[],criticalHit:{rule:"default",characterLevel:1}}),actions:{loadData(){const e=yt(),t=e.accountData.activeCharacterId;if(!t){this.attacks=[],this.criticalHit={rule:"default",characterLevel:1};return}const n=e.accountData.characters.find(o=>o.id===t);n?(this.attacks=(n.attacks||[]).map(o=>({...o,id:o.id||ht(),rerollDice:o.rerollDice||[],damageRolls:(o.damageRolls||[]).map(a=>({...a,lifeSteal:a.lifeSteal||{percentage:0}}))})),this.criticalHit=n.criticalHit||{rule:"default",characterLevel:1}):(this.attacks=[],this.criticalHit={rule:"default",characterLevel:1})},saveData(){const e=yt(),t=e.accountData.activeCharacterId;if(!t)return;const n=e.accountData.characters.findIndex(o=>o.id===t);n!==-1&&(e.accountData.characters[n].attacks=this.attacks,e.accountData.characters[n].criticalHit=this.criticalHit,e.saveDataToLocalStorage())},updateCriticalHitConfig(e){this.criticalHit={...this.criticalHit,...e},this.saveData()},addAttack(e){const t={...e,id:ht()};this.attacks.push(t),this.saveData()},updateAttack(e){const t=this.attacks.findIndex(n=>n.id===e.id);t!==-1&&(this.attacks[t]=e,this.saveData())},duplicateAttack(e){const t=this.attacks.find(n=>n.id===e);if(t){const n=JSON.parse(JSON.stringify(t));n.id=ht(),n.name=`${t.name} (Copia)`;const o=this.attacks.findIndex(a=>a.id===e);this.attacks.splice(o+1,0,n),this.saveData()}},deleteAttack(e){this.attacks=this.attacks.filter(t=>t.id!==e),this.saveData()},getAttackById(e){return this.attacks.find(t=>t.id===e)},updateAttackOrder(e){this.attacks=e.map(t=>this.attacks.find(n=>n.id===t)).filter(Boolean),this.saveData()}}});var na=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function oa(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ar={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/var Zl;function jg(){return Zl||(Zl=1,function(e,t){(function(n){e.exports=n()})(function(){return function n(o,a,r){function i(u,p){if(!a[u]){if(!o[u]){var d=typeof oa=="function"&&oa;if(!p&&d)return d(u,!0);if(l)return l(u,!0);var m=new Error("Cannot find module '"+u+"'");throw m.code="MODULE_NOT_FOUND",m}var v=a[u]={exports:{}};o[u][0].call(v.exports,function(C){var w=o[u][1][C];return i(w||C)},v,v.exports,n,o,a,r)}return a[u].exports}for(var l=typeof oa=="function"&&oa,c=0;c<r.length;c++)i(r[c]);return i}({1:[function(n,o,a){(function(r){var i=r.MutationObserver||r.WebKitMutationObserver,l;if(i){var c=0,u=new i(C),p=r.document.createTextNode("");u.observe(p,{characterData:!0}),l=function(){p.data=c=++c%2}}else if(!r.setImmediate&&typeof r.MessageChannel<"u"){var d=new r.MessageChannel;d.port1.onmessage=C,l=function(){d.port2.postMessage(0)}}else"document"in r&&"onreadystatechange"in r.document.createElement("script")?l=function(){var g=r.document.createElement("script");g.onreadystatechange=function(){C(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},r.document.documentElement.appendChild(g)}:l=function(){setTimeout(C,0)};var m,v=[];function C(){m=!0;for(var g,S,L=v.length;L;){for(S=v,v=[],g=-1;++g<L;)S[g]();L=v.length}m=!1}o.exports=w;function w(g){v.push(g)===1&&!m&&l()}}).call(this,typeof na<"u"?na:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,o,a){var r=n(1);function i(){}var l={},c=["REJECTED"],u=["FULFILLED"],p=["PENDING"];o.exports=d;function d(T){if(typeof T!="function")throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,T!==i&&w(this,T)}d.prototype.catch=function(T){return this.then(null,T)},d.prototype.then=function(T,te){if(typeof T!="function"&&this.state===u||typeof te!="function"&&this.state===c)return this;var ee=new this.constructor(i);if(this.state!==p){var ae=this.state===u?T:te;v(ee,ae,this.outcome)}else this.queue.push(new m(ee,T,te));return ee};function m(T,te,ee){this.promise=T,typeof te=="function"&&(this.onFulfilled=te,this.callFulfilled=this.otherCallFulfilled),typeof ee=="function"&&(this.onRejected=ee,this.callRejected=this.otherCallRejected)}m.prototype.callFulfilled=function(T){l.resolve(this.promise,T)},m.prototype.otherCallFulfilled=function(T){v(this.promise,this.onFulfilled,T)},m.prototype.callRejected=function(T){l.reject(this.promise,T)},m.prototype.otherCallRejected=function(T){v(this.promise,this.onRejected,T)};function v(T,te,ee){r(function(){var ae;try{ae=te(ee)}catch(j){return l.reject(T,j)}ae===T?l.reject(T,new TypeError("Cannot resolve promise with itself")):l.resolve(T,ae)})}l.resolve=function(T,te){var ee=g(C,te);if(ee.status==="error")return l.reject(T,ee.value);var ae=ee.value;if(ae)w(T,ae);else{T.state=u,T.outcome=te;for(var j=-1,H=T.queue.length;++j<H;)T.queue[j].callFulfilled(te)}return T},l.reject=function(T,te){T.state=c,T.outcome=te;for(var ee=-1,ae=T.queue.length;++ee<ae;)T.queue[ee].callRejected(te);return T};function C(T){var te=T&&T.then;if(T&&(typeof T=="object"||typeof T=="function")&&typeof te=="function")return function(){te.apply(T,arguments)}}function w(T,te){var ee=!1;function ae(R){ee||(ee=!0,l.reject(T,R))}function j(R){ee||(ee=!0,l.resolve(T,R))}function H(){te(j,ae)}var N=g(H);N.status==="error"&&ae(N.value)}function g(T,te){var ee={};try{ee.value=T(te),ee.status="success"}catch(ae){ee.status="error",ee.value=ae}return ee}d.resolve=S;function S(T){return T instanceof this?T:l.resolve(new this(i),T)}d.reject=L;function L(T){var te=new this(i);return l.reject(te,T)}d.all=B;function B(T){var te=this;if(Object.prototype.toString.call(T)!=="[object Array]")return this.reject(new TypeError("must be an array"));var ee=T.length,ae=!1;if(!ee)return this.resolve([]);for(var j=new Array(ee),H=0,N=-1,R=new this(i);++N<ee;)E(T[N],N);return R;function E(K,$e){te.resolve(K).then(se,function(Z){ae||(ae=!0,l.reject(R,Z))});function se(Z){j[$e]=Z,++H===ee&&!ae&&(ae=!0,l.resolve(R,j))}}}d.race=V;function V(T){var te=this;if(Object.prototype.toString.call(T)!=="[object Array]")return this.reject(new TypeError("must be an array"));var ee=T.length,ae=!1;if(!ee)return this.resolve([]);for(var j=-1,H=new this(i);++j<ee;)N(T[j]);return H;function N(R){te.resolve(R).then(function(E){ae||(ae=!0,l.resolve(H,E))},function(E){ae||(ae=!0,l.reject(H,E))})}}},{1:1}],3:[function(n,o,a){(function(r){typeof r.Promise!="function"&&(r.Promise=n(2))}).call(this,typeof na<"u"?na:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,o,a){var r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h};function i(h,k){if(!(h instanceof k))throw new TypeError("Cannot call a class as a function")}function l(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var c=l();function u(){try{if(!c||!c.open)return!1;var h=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),k=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!h||k)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function p(h,k){h=h||[],k=k||{};try{return new Blob(h,k)}catch(A){if(A.name!=="TypeError")throw A;for(var b=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,I=new b,O=0;O<h.length;O+=1)I.append(h[O]);return I.getBlob(k.type)}}typeof Promise>"u"&&n(3);var d=Promise;function m(h,k){k&&h.then(function(b){k(null,b)},function(b){k(b)})}function v(h,k,b){typeof k=="function"&&h.then(k),typeof b=="function"&&h.catch(b)}function C(h){return typeof h!="string"&&(console.warn(h+" used as a key, but it is not a string."),h=String(h)),h}function w(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",S=void 0,L={},B=Object.prototype.toString,V="readonly",T="readwrite";function te(h){for(var k=h.length,b=new ArrayBuffer(k),I=new Uint8Array(b),O=0;O<k;O++)I[O]=h.charCodeAt(O);return b}function ee(h){return new d(function(k){var b=h.transaction(g,T),I=p([""]);b.objectStore(g).put(I,"key"),b.onabort=function(O){O.preventDefault(),O.stopPropagation(),k(!1)},b.oncomplete=function(){var O=navigator.userAgent.match(/Chrome\/(\d+)/),A=navigator.userAgent.match(/Edge\//);k(A||!O||parseInt(O[1],10)>=43)}}).catch(function(){return!1})}function ae(h){return typeof S=="boolean"?d.resolve(S):ee(h).then(function(k){return S=k,S})}function j(h){var k=L[h.name],b={};b.promise=new d(function(I,O){b.resolve=I,b.reject=O}),k.deferredOperations.push(b),k.dbReady?k.dbReady=k.dbReady.then(function(){return b.promise}):k.dbReady=b.promise}function H(h){var k=L[h.name],b=k.deferredOperations.pop();if(b)return b.resolve(),b.promise}function N(h,k){var b=L[h.name],I=b.deferredOperations.pop();if(I)return I.reject(k),I.promise}function R(h,k){return new d(function(b,I){if(L[h.name]=L[h.name]||Y(),h.db)if(k)j(h),h.db.close();else return b(h.db);var O=[h.name];k&&O.push(h.version);var A=c.open.apply(c,O);k&&(A.onupgradeneeded=function(J){var ie=A.result;try{ie.createObjectStore(h.storeName),J.oldVersion<=1&&ie.createObjectStore(g)}catch(de){if(de.name==="ConstraintError")console.warn('The database "'+h.name+'" has been upgraded from version '+J.oldVersion+" to version "+J.newVersion+', but the storage "'+h.storeName+'" already exists.');else throw de}}),A.onerror=function(J){J.preventDefault(),I(A.error)},A.onsuccess=function(){var J=A.result;J.onversionchange=function(ie){ie.target.close()},b(J),H(h)}})}function E(h){return R(h,!1)}function K(h){return R(h,!0)}function $e(h,k){if(!h.db)return!0;var b=!h.db.objectStoreNames.contains(h.storeName),I=h.version<h.db.version,O=h.version>h.db.version;if(I&&(h.version!==k&&console.warn('The database "'+h.name+`" can't be downgraded from version `+h.db.version+" to version "+h.version+"."),h.version=h.db.version),O||b){if(b){var A=h.db.version+1;A>h.version&&(h.version=A)}return!0}return!1}function se(h){return new d(function(k,b){var I=new FileReader;I.onerror=b,I.onloadend=function(O){var A=btoa(O.target.result||"");k({__local_forage_encoded_blob:!0,data:A,type:h.type})},I.readAsBinaryString(h)})}function Z(h){var k=te(atob(h.data));return p([k],{type:h.type})}function Ee(h){return h&&h.__local_forage_encoded_blob}function je(h){var k=this,b=k._initReady().then(function(){var I=L[k._dbInfo.name];if(I&&I.dbReady)return I.dbReady});return v(b,h,h),b}function z(h){j(h);for(var k=L[h.name],b=k.forages,I=0;I<b.length;I++){var O=b[I];O._dbInfo.db&&(O._dbInfo.db.close(),O._dbInfo.db=null)}return h.db=null,E(h).then(function(A){return h.db=A,$e(h)?K(h):A}).then(function(A){h.db=k.db=A;for(var J=0;J<b.length;J++)b[J]._dbInfo.db=A}).catch(function(A){throw N(h,A),A})}function M(h,k,b,I){I===void 0&&(I=1);try{var O=h.db.transaction(h.storeName,k);b(null,O)}catch(A){if(I>0&&(!h.db||A.name==="InvalidStateError"||A.name==="NotFoundError"))return d.resolve().then(function(){if(!h.db||A.name==="NotFoundError"&&!h.db.objectStoreNames.contains(h.storeName)&&h.version<=h.db.version)return h.db&&(h.version=h.db.version+1),K(h)}).then(function(){return z(h).then(function(){M(h,k,b,I-1)})}).catch(b);b(A)}}function Y(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function U(h){var k=this,b={db:null};if(h)for(var I in h)b[I]=h[I];var O=L[b.name];O||(O=Y(),L[b.name]=O),O.forages.push(k),k._initReady||(k._initReady=k.ready,k.ready=je);var A=[];function J(){return d.resolve()}for(var ie=0;ie<O.forages.length;ie++){var de=O.forages[ie];de!==k&&A.push(de._initReady().catch(J))}var fe=O.forages.slice(0);return d.all(A).then(function(){return b.db=O.db,E(b)}).then(function(ve){return b.db=ve,$e(b,k._defaultConfig.version)?K(b):ve}).then(function(ve){b.db=O.db=ve,k._dbInfo=b;for(var Ie=0;Ie<fe.length;Ie++){var Ue=fe[Ie];Ue!==k&&(Ue._dbInfo.db=b.db,Ue._dbInfo.version=b.version)}})}function ce(h,k){var b=this;h=C(h);var I=new d(function(O,A){b.ready().then(function(){M(b._dbInfo,V,function(J,ie){if(J)return A(J);try{var de=ie.objectStore(b._dbInfo.storeName),fe=de.get(h);fe.onsuccess=function(){var ve=fe.result;ve===void 0&&(ve=null),Ee(ve)&&(ve=Z(ve)),O(ve)},fe.onerror=function(){A(fe.error)}}catch(ve){A(ve)}})}).catch(A)});return m(I,k),I}function De(h,k){var b=this,I=new d(function(O,A){b.ready().then(function(){M(b._dbInfo,V,function(J,ie){if(J)return A(J);try{var de=ie.objectStore(b._dbInfo.storeName),fe=de.openCursor(),ve=1;fe.onsuccess=function(){var Ie=fe.result;if(Ie){var Ue=Ie.value;Ee(Ue)&&(Ue=Z(Ue));var tt=h(Ue,Ie.key,ve++);tt!==void 0?O(tt):Ie.continue()}else O()},fe.onerror=function(){A(fe.error)}}catch(Ie){A(Ie)}})}).catch(A)});return m(I,k),I}function dt(h,k,b){var I=this;h=C(h);var O=new d(function(A,J){var ie;I.ready().then(function(){return ie=I._dbInfo,B.call(k)==="[object Blob]"?ae(ie.db).then(function(de){return de?k:se(k)}):k}).then(function(de){M(I._dbInfo,T,function(fe,ve){if(fe)return J(fe);try{var Ie=ve.objectStore(I._dbInfo.storeName);de===null&&(de=void 0);var Ue=Ie.put(de,h);ve.oncomplete=function(){de===void 0&&(de=null),A(de)},ve.onabort=ve.onerror=function(){var tt=Ue.error?Ue.error:Ue.transaction.error;J(tt)}}catch(tt){J(tt)}})}).catch(J)});return m(O,b),O}function G(h,k){var b=this;h=C(h);var I=new d(function(O,A){b.ready().then(function(){M(b._dbInfo,T,function(J,ie){if(J)return A(J);try{var de=ie.objectStore(b._dbInfo.storeName),fe=de.delete(h);ie.oncomplete=function(){O()},ie.onerror=function(){A(fe.error)},ie.onabort=function(){var ve=fe.error?fe.error:fe.transaction.error;A(ve)}}catch(ve){A(ve)}})}).catch(A)});return m(I,k),I}function Se(h){var k=this,b=new d(function(I,O){k.ready().then(function(){M(k._dbInfo,T,function(A,J){if(A)return O(A);try{var ie=J.objectStore(k._dbInfo.storeName),de=ie.clear();J.oncomplete=function(){I()},J.onabort=J.onerror=function(){var fe=de.error?de.error:de.transaction.error;O(fe)}}catch(fe){O(fe)}})}).catch(O)});return m(b,h),b}function Ce(h){var k=this,b=new d(function(I,O){k.ready().then(function(){M(k._dbInfo,V,function(A,J){if(A)return O(A);try{var ie=J.objectStore(k._dbInfo.storeName),de=ie.count();de.onsuccess=function(){I(de.result)},de.onerror=function(){O(de.error)}}catch(fe){O(fe)}})}).catch(O)});return m(b,h),b}function Ae(h,k){var b=this,I=new d(function(O,A){if(h<0){O(null);return}b.ready().then(function(){M(b._dbInfo,V,function(J,ie){if(J)return A(J);try{var de=ie.objectStore(b._dbInfo.storeName),fe=!1,ve=de.openKeyCursor();ve.onsuccess=function(){var Ie=ve.result;if(!Ie){O(null);return}h===0||fe?O(Ie.key):(fe=!0,Ie.advance(h))},ve.onerror=function(){A(ve.error)}}catch(Ie){A(Ie)}})}).catch(A)});return m(I,k),I}function Ze(h){var k=this,b=new d(function(I,O){k.ready().then(function(){M(k._dbInfo,V,function(A,J){if(A)return O(A);try{var ie=J.objectStore(k._dbInfo.storeName),de=ie.openKeyCursor(),fe=[];de.onsuccess=function(){var ve=de.result;if(!ve){I(fe);return}fe.push(ve.key),ve.continue()},de.onerror=function(){O(de.error)}}catch(ve){O(ve)}})}).catch(O)});return m(b,h),b}function x(h,k){k=w.apply(this,arguments);var b=this.config();h=typeof h!="function"&&h||{},h.name||(h.name=h.name||b.name,h.storeName=h.storeName||b.storeName);var I=this,O;if(!h.name)O=d.reject("Invalid arguments");else{var A=h.name===b.name&&I._dbInfo.db,J=A?d.resolve(I._dbInfo.db):E(h).then(function(ie){var de=L[h.name],fe=de.forages;de.db=ie;for(var ve=0;ve<fe.length;ve++)fe[ve]._dbInfo.db=ie;return ie});h.storeName?O=J.then(function(ie){if(ie.objectStoreNames.contains(h.storeName)){var de=ie.version+1;j(h);var fe=L[h.name],ve=fe.forages;ie.close();for(var Ie=0;Ie<ve.length;Ie++){var Ue=ve[Ie];Ue._dbInfo.db=null,Ue._dbInfo.version=de}var tt=new d(function(st,xt){var bt=c.open(h.name,de);bt.onerror=function(an){var ss=bt.result;ss.close(),xt(an)},bt.onupgradeneeded=function(){var an=bt.result;an.deleteObjectStore(h.storeName)},bt.onsuccess=function(){var an=bt.result;an.close(),st(an)}});return tt.then(function(st){fe.db=st;for(var xt=0;xt<ve.length;xt++){var bt=ve[xt];bt._dbInfo.db=st,H(bt._dbInfo)}}).catch(function(st){throw(N(h,st)||d.resolve()).catch(function(){}),st})}}):O=J.then(function(ie){j(h);var de=L[h.name],fe=de.forages;ie.close();for(var ve=0;ve<fe.length;ve++){var Ie=fe[ve];Ie._dbInfo.db=null}var Ue=new d(function(tt,st){var xt=c.deleteDatabase(h.name);xt.onerror=function(){var bt=xt.result;bt&&bt.close(),st(xt.error)},xt.onblocked=function(){console.warn('dropInstance blocked for database "'+h.name+'" until all open connections are closed')},xt.onsuccess=function(){var bt=xt.result;bt&&bt.close(),tt(bt)}});return Ue.then(function(tt){de.db=tt;for(var st=0;st<fe.length;st++){var xt=fe[st];H(xt._dbInfo)}}).catch(function(tt){throw(N(h,tt)||d.resolve()).catch(function(){}),tt})})}return m(O,k),O}var _={_driver:"asyncStorage",_initStorage:U,_support:u(),iterate:De,getItem:ce,setItem:dt,removeItem:G,clear:Se,length:Ce,key:Ae,keys:Ze,dropInstance:x};function P(){return typeof openDatabase=="function"}var X="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ne="~~local_forage_type~",Q=/^~~local_forage_type~([^~]+)~/,ye="__lfsc__:",he=ye.length,me="arbf",re="blob",Re="si08",ke="ui08",Te="uic8",Oe="si16",Fe="si32",Ye="ur16",We="ui32",Et="fl32",$t="fl64",At=he+me.length,Vt=Object.prototype.toString;function F(h){var k=h.length*.75,b=h.length,I,O=0,A,J,ie,de;h[h.length-1]==="="&&(k--,h[h.length-2]==="="&&k--);var fe=new ArrayBuffer(k),ve=new Uint8Array(fe);for(I=0;I<b;I+=4)A=X.indexOf(h[I]),J=X.indexOf(h[I+1]),ie=X.indexOf(h[I+2]),de=X.indexOf(h[I+3]),ve[O++]=A<<2|J>>4,ve[O++]=(J&15)<<4|ie>>2,ve[O++]=(ie&3)<<6|de&63;return fe}function f(h){var k=new Uint8Array(h),b="",I;for(I=0;I<k.length;I+=3)b+=X[k[I]>>2],b+=X[(k[I]&3)<<4|k[I+1]>>4],b+=X[(k[I+1]&15)<<2|k[I+2]>>6],b+=X[k[I+2]&63];return k.length%3===2?b=b.substring(0,b.length-1)+"=":k.length%3===1&&(b=b.substring(0,b.length-2)+"=="),b}function y(h,k){var b="";if(h&&(b=Vt.call(h)),h&&(b==="[object ArrayBuffer]"||h.buffer&&Vt.call(h.buffer)==="[object ArrayBuffer]")){var I,O=ye;h instanceof ArrayBuffer?(I=h,O+=me):(I=h.buffer,b==="[object Int8Array]"?O+=Re:b==="[object Uint8Array]"?O+=ke:b==="[object Uint8ClampedArray]"?O+=Te:b==="[object Int16Array]"?O+=Oe:b==="[object Uint16Array]"?O+=Ye:b==="[object Int32Array]"?O+=Fe:b==="[object Uint32Array]"?O+=We:b==="[object Float32Array]"?O+=Et:b==="[object Float64Array]"?O+=$t:k(new Error("Failed to get type for BinaryArray"))),k(O+f(I))}else if(b==="[object Blob]"){var A=new FileReader;A.onload=function(){var J=ne+h.type+"~"+f(this.result);k(ye+re+J)},A.readAsArrayBuffer(h)}else try{k(JSON.stringify(h))}catch(J){console.error("Couldn't convert value into a JSON string: ",h),k(null,J)}}function _e(h){if(h.substring(0,he)!==ye)return JSON.parse(h);var k=h.substring(At),b=h.substring(he,At),I;if(b===re&&Q.test(k)){var O=k.match(Q);I=O[1],k=k.substring(O[0].length)}var A=F(k);switch(b){case me:return A;case re:return p([A],{type:I});case Re:return new Int8Array(A);case ke:return new Uint8Array(A);case Te:return new Uint8ClampedArray(A);case Oe:return new Int16Array(A);case Ye:return new Uint16Array(A);case Fe:return new Int32Array(A);case We:return new Uint32Array(A);case Et:return new Float32Array(A);case $t:return new Float64Array(A);default:throw new Error("Unkown type: "+b)}}var at={serialize:y,deserialize:_e,stringToBuffer:F,bufferToString:f};function co(h,k,b,I){h.executeSql("CREATE TABLE IF NOT EXISTS "+k.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],b,I)}function pf(h){var k=this,b={db:null};if(h)for(var I in h)b[I]=typeof h[I]!="string"?h[I].toString():h[I];var O=new d(function(A,J){try{b.db=openDatabase(b.name,String(b.version),b.description,b.size)}catch(ie){return J(ie)}b.db.transaction(function(ie){co(ie,b,function(){k._dbInfo=b,A()},function(de,fe){J(fe)})},J)});return b.serializer=at,O}function Un(h,k,b,I,O,A){h.executeSql(b,I,O,function(J,ie){ie.code===ie.SYNTAX_ERR?J.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[k.storeName],function(de,fe){fe.rows.length?A(de,ie):co(de,k,function(){de.executeSql(b,I,O,A)},A)},A):A(J,ie)},A)}function mf(h,k){var b=this;h=C(h);var I=new d(function(O,A){b.ready().then(function(){var J=b._dbInfo;J.db.transaction(function(ie){Un(ie,J,"SELECT * FROM "+J.storeName+" WHERE key = ? LIMIT 1",[h],function(de,fe){var ve=fe.rows.length?fe.rows.item(0).value:null;ve&&(ve=J.serializer.deserialize(ve)),O(ve)},function(de,fe){A(fe)})})}).catch(A)});return m(I,k),I}function hf(h,k){var b=this,I=new d(function(O,A){b.ready().then(function(){var J=b._dbInfo;J.db.transaction(function(ie){Un(ie,J,"SELECT * FROM "+J.storeName,[],function(de,fe){for(var ve=fe.rows,Ie=ve.length,Ue=0;Ue<Ie;Ue++){var tt=ve.item(Ue),st=tt.value;if(st&&(st=J.serializer.deserialize(st)),st=h(st,tt.key,Ue+1),st!==void 0){O(st);return}}O()},function(de,fe){A(fe)})})}).catch(A)});return m(I,k),I}function Ji(h,k,b,I){var O=this;h=C(h);var A=new d(function(J,ie){O.ready().then(function(){k===void 0&&(k=null);var de=k,fe=O._dbInfo;fe.serializer.serialize(k,function(ve,Ie){Ie?ie(Ie):fe.db.transaction(function(Ue){Un(Ue,fe,"INSERT OR REPLACE INTO "+fe.storeName+" (key, value) VALUES (?, ?)",[h,ve],function(){J(de)},function(tt,st){ie(st)})},function(Ue){if(Ue.code===Ue.QUOTA_ERR){if(I>0){J(Ji.apply(O,[h,de,b,I-1]));return}ie(Ue)}})})}).catch(ie)});return m(A,b),A}function gf(h,k,b){return Ji.apply(this,[h,k,b,1])}function vf(h,k){var b=this;h=C(h);var I=new d(function(O,A){b.ready().then(function(){var J=b._dbInfo;J.db.transaction(function(ie){Un(ie,J,"DELETE FROM "+J.storeName+" WHERE key = ?",[h],function(){O()},function(de,fe){A(fe)})})}).catch(A)});return m(I,k),I}function bf(h){var k=this,b=new d(function(I,O){k.ready().then(function(){var A=k._dbInfo;A.db.transaction(function(J){Un(J,A,"DELETE FROM "+A.storeName,[],function(){I()},function(ie,de){O(de)})})}).catch(O)});return m(b,h),b}function wf(h){var k=this,b=new d(function(I,O){k.ready().then(function(){var A=k._dbInfo;A.db.transaction(function(J){Un(J,A,"SELECT COUNT(key) as c FROM "+A.storeName,[],function(ie,de){var fe=de.rows.item(0).c;I(fe)},function(ie,de){O(de)})})}).catch(O)});return m(b,h),b}function yf(h,k){var b=this,I=new d(function(O,A){b.ready().then(function(){var J=b._dbInfo;J.db.transaction(function(ie){Un(ie,J,"SELECT key FROM "+J.storeName+" WHERE id = ? LIMIT 1",[h+1],function(de,fe){var ve=fe.rows.length?fe.rows.item(0).key:null;O(ve)},function(de,fe){A(fe)})})}).catch(A)});return m(I,k),I}function Cf(h){var k=this,b=new d(function(I,O){k.ready().then(function(){var A=k._dbInfo;A.db.transaction(function(J){Un(J,A,"SELECT key FROM "+A.storeName,[],function(ie,de){for(var fe=[],ve=0;ve<de.rows.length;ve++)fe.push(de.rows.item(ve).key);I(fe)},function(ie,de){O(de)})})}).catch(O)});return m(b,h),b}function xf(h){return new d(function(k,b){h.transaction(function(I){I.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(O,A){for(var J=[],ie=0;ie<A.rows.length;ie++)J.push(A.rows.item(ie).name);k({db:h,storeNames:J})},function(O,A){b(A)})},function(I){b(I)})})}function _f(h,k){k=w.apply(this,arguments);var b=this.config();h=typeof h!="function"&&h||{},h.name||(h.name=h.name||b.name,h.storeName=h.storeName||b.storeName);var I=this,O;return h.name?O=new d(function(A){var J;h.name===b.name?J=I._dbInfo.db:J=openDatabase(h.name,"","",0),h.storeName?A({db:J,storeNames:[h.storeName]}):A(xf(J))}).then(function(A){return new d(function(J,ie){A.db.transaction(function(de){function fe(tt){return new d(function(st,xt){de.executeSql("DROP TABLE IF EXISTS "+tt,[],function(){st()},function(bt,an){xt(an)})})}for(var ve=[],Ie=0,Ue=A.storeNames.length;Ie<Ue;Ie++)ve.push(fe(A.storeNames[Ie]));d.all(ve).then(function(){J()}).catch(function(tt){ie(tt)})},function(de){ie(de)})})}):O=d.reject("Invalid arguments"),m(O,k),O}var kf={_driver:"webSQLStorage",_initStorage:pf,_support:P(),iterate:hf,getItem:mf,setItem:gf,removeItem:vf,clear:bf,length:wf,key:yf,keys:Cf,dropInstance:_f};function Sf(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Qi(h,k){var b=h.name+"/";return h.storeName!==k.storeName&&(b+=h.storeName+"/"),b}function $f(){var h="_localforage_support_test";try{return localStorage.setItem(h,!0),localStorage.removeItem(h),!1}catch{return!0}}function Ef(){return!$f()||localStorage.length>0}function Df(h){var k=this,b={};if(h)for(var I in h)b[I]=h[I];return b.keyPrefix=Qi(h,k._defaultConfig),Ef()?(k._dbInfo=b,b.serializer=at,d.resolve()):d.reject()}function Tf(h){var k=this,b=k.ready().then(function(){for(var I=k._dbInfo.keyPrefix,O=localStorage.length-1;O>=0;O--){var A=localStorage.key(O);A.indexOf(I)===0&&localStorage.removeItem(A)}});return m(b,h),b}function Af(h,k){var b=this;h=C(h);var I=b.ready().then(function(){var O=b._dbInfo,A=localStorage.getItem(O.keyPrefix+h);return A&&(A=O.serializer.deserialize(A)),A});return m(I,k),I}function If(h,k){var b=this,I=b.ready().then(function(){for(var O=b._dbInfo,A=O.keyPrefix,J=A.length,ie=localStorage.length,de=1,fe=0;fe<ie;fe++){var ve=localStorage.key(fe);if(ve.indexOf(A)===0){var Ie=localStorage.getItem(ve);if(Ie&&(Ie=O.serializer.deserialize(Ie)),Ie=h(Ie,ve.substring(J),de++),Ie!==void 0)return Ie}}});return m(I,k),I}function Rf(h,k){var b=this,I=b.ready().then(function(){var O=b._dbInfo,A;try{A=localStorage.key(h)}catch{A=null}return A&&(A=A.substring(O.keyPrefix.length)),A});return m(I,k),I}function Pf(h){var k=this,b=k.ready().then(function(){for(var I=k._dbInfo,O=localStorage.length,A=[],J=0;J<O;J++){var ie=localStorage.key(J);ie.indexOf(I.keyPrefix)===0&&A.push(ie.substring(I.keyPrefix.length))}return A});return m(b,h),b}function Hf(h){var k=this,b=k.keys().then(function(I){return I.length});return m(b,h),b}function Of(h,k){var b=this;h=C(h);var I=b.ready().then(function(){var O=b._dbInfo;localStorage.removeItem(O.keyPrefix+h)});return m(I,k),I}function Bf(h,k,b){var I=this;h=C(h);var O=I.ready().then(function(){k===void 0&&(k=null);var A=k;return new d(function(J,ie){var de=I._dbInfo;de.serializer.serialize(k,function(fe,ve){if(ve)ie(ve);else try{localStorage.setItem(de.keyPrefix+h,fe),J(A)}catch(Ie){(Ie.name==="QuotaExceededError"||Ie.name==="NS_ERROR_DOM_QUOTA_REACHED")&&ie(Ie),ie(Ie)}})})});return m(O,b),O}function Mf(h,k){if(k=w.apply(this,arguments),h=typeof h!="function"&&h||{},!h.name){var b=this.config();h.name=h.name||b.name,h.storeName=h.storeName||b.storeName}var I=this,O;return h.name?O=new d(function(A){h.storeName?A(Qi(h,I._defaultConfig)):A(h.name+"/")}).then(function(A){for(var J=localStorage.length-1;J>=0;J--){var ie=localStorage.key(J);ie.indexOf(A)===0&&localStorage.removeItem(ie)}}):O=d.reject("Invalid arguments"),m(O,k),O}var Lf={_driver:"localStorageWrapper",_initStorage:Df,_support:Sf(),iterate:If,getItem:Af,setItem:Bf,removeItem:Of,clear:Tf,length:Hf,key:Rf,keys:Pf,dropInstance:Mf},Nf=function(k,b){return k===b||typeof k=="number"&&typeof b=="number"&&isNaN(k)&&isNaN(b)},Vf=function(k,b){for(var I=k.length,O=0;O<I;){if(Nf(k[O],b))return!0;O++}return!1},Zi=Array.isArray||function(h){return Object.prototype.toString.call(h)==="[object Array]"},os={},el={},Ao={INDEXEDDB:_,WEBSQL:kf,LOCALSTORAGE:Lf},jf=[Ao.INDEXEDDB._driver,Ao.WEBSQL._driver,Ao.LOCALSTORAGE._driver],Qs=["dropInstance"],dr=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Qs),Ff={description:"",driver:jf.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Uf(h,k){h[k]=function(){var b=arguments;return h.ready().then(function(){return h[k].apply(h,b)})}}function fr(){for(var h=1;h<arguments.length;h++){var k=arguments[h];if(k)for(var b in k)k.hasOwnProperty(b)&&(Zi(k[b])?arguments[0][b]=k[b].slice():arguments[0][b]=k[b])}return arguments[0]}var zf=function(){function h(k){i(this,h);for(var b in Ao)if(Ao.hasOwnProperty(b)){var I=Ao[b],O=I._driver;this[b]=O,os[O]||this.defineDriver(I)}this._defaultConfig=fr({},Ff),this._config=fr({},this._defaultConfig,k),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return h.prototype.config=function(b){if((typeof b>"u"?"undefined":r(b))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var I in b){if(I==="storeName"&&(b[I]=b[I].replace(/\W/g,"_")),I==="version"&&typeof b[I]!="number")return new Error("Database version must be a number.");this._config[I]=b[I]}return"driver"in b&&b.driver?this.setDriver(this._config.driver):!0}else return typeof b=="string"?this._config[b]:this._config},h.prototype.defineDriver=function(b,I,O){var A=new d(function(J,ie){try{var de=b._driver,fe=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!b._driver){ie(fe);return}for(var ve=dr.concat("_initStorage"),Ie=0,Ue=ve.length;Ie<Ue;Ie++){var tt=ve[Ie],st=!Vf(Qs,tt);if((st||b[tt])&&typeof b[tt]!="function"){ie(fe);return}}var xt=function(){for(var ss=function(Kf){return function(){var Yf=new Error("Method "+Kf+" is not implemented by the current driver"),tl=d.reject(Yf);return m(tl,arguments[arguments.length-1]),tl}},pr=0,Wf=Qs.length;pr<Wf;pr++){var mr=Qs[pr];b[mr]||(b[mr]=ss(mr))}};xt();var bt=function(ss){os[de]&&console.info("Redefining LocalForage driver: "+de),os[de]=b,el[de]=ss,J()};"_support"in b?b._support&&typeof b._support=="function"?b._support().then(bt,ie):bt(!!b._support):bt(!0)}catch(an){ie(an)}});return v(A,I,O),A},h.prototype.driver=function(){return this._driver||null},h.prototype.getDriver=function(b,I,O){var A=os[b]?d.resolve(os[b]):d.reject(new Error("Driver not found."));return v(A,I,O),A},h.prototype.getSerializer=function(b){var I=d.resolve(at);return v(I,b),I},h.prototype.ready=function(b){var I=this,O=I._driverSet.then(function(){return I._ready===null&&(I._ready=I._initDriver()),I._ready});return v(O,b,b),O},h.prototype.setDriver=function(b,I,O){var A=this;Zi(b)||(b=[b]);var J=this._getSupportedDrivers(b);function ie(){A._config.driver=A.driver()}function de(Ie){return A._extend(Ie),ie(),A._ready=A._initStorage(A._config),A._ready}function fe(Ie){return function(){var Ue=0;function tt(){for(;Ue<Ie.length;){var st=Ie[Ue];return Ue++,A._dbInfo=null,A._ready=null,A.getDriver(st).then(de).catch(tt)}ie();var xt=new Error("No available storage method found.");return A._driverSet=d.reject(xt),A._driverSet}return tt()}}var ve=this._driverSet!==null?this._driverSet.catch(function(){return d.resolve()}):d.resolve();return this._driverSet=ve.then(function(){var Ie=J[0];return A._dbInfo=null,A._ready=null,A.getDriver(Ie).then(function(Ue){A._driver=Ue._driver,ie(),A._wrapLibraryMethodsWithReady(),A._initDriver=fe(J)})}).catch(function(){ie();var Ie=new Error("No available storage method found.");return A._driverSet=d.reject(Ie),A._driverSet}),v(this._driverSet,I,O),this._driverSet},h.prototype.supports=function(b){return!!el[b]},h.prototype._extend=function(b){fr(this,b)},h.prototype._getSupportedDrivers=function(b){for(var I=[],O=0,A=b.length;O<A;O++){var J=b[O];this.supports(J)&&I.push(J)}return I},h.prototype._wrapLibraryMethodsWithReady=function(){for(var b=0,I=dr.length;b<I;b++)Uf(this,dr[b])},h.prototype.createInstance=function(b){return new h(b)},h}(),qf=new zf;o.exports=qf},{3:3}]},{},[4])(4)})}(Ar)),Ar.exports}var Fg=jg();const ha=Vg(Fg);ha.config({name:"DyDCharacterStates",storeName:"character_states",description:"Storage for character states and images"});const Fs=lo("characterState",()=>{const e=pe([]),t=pe(null),n=pe(!1),o=Us(),a=Je(()=>e.value.find(C=>C.id===t.value)||null);function r(){const C=yt(),w=C.accountData.activeCharacterId;if(!w)return;const g=C.accountData.characters.findIndex(S=>S.id===w);g!==-1&&(C.accountData.characters[g].characterState=e.value,C.accountData.characters[g].selectedCharacterStateId=t.value,C.saveDataToLocalStorage())}function i(){const C=yt(),w=C.accountData.activeCharacterId;if(!w){e.value=[],t.value=null;return}const g=C.accountData.characters.find(L=>L.id===w);let S=g&&Array.isArray(g.characterState)?g.characterState:[];S=S.map(L=>({...L,title:L.title||L.name||"Sin ttulo"})),e.value=S,t.value=(g==null?void 0:g.selectedCharacterStateId)||(S.length>0?S[0].id:null)}async function l(C,w){n.value=!0;try{const g=ht();if(typeof C=="object"&&C!==null){const S=C;e.value.push({id:ht(),name:S.name,linkedCounterId:S.linkedCounterId||null,discountOnActivate:S.discountOnActivate||0,discountType:S.discountType||"resta",active:!1,image:null})}else if(w instanceof File){const S=new Blob([await w.arrayBuffer()],{type:w.type}),L=`state_${g}`;await ha.setItem(L,S),e.value.push({id:g,name:C,title:C,linkedCounterId:null,discountOnActivate:0,discountType:"resta",active:!1,image:g})}else e.value.push({id:g,name:C,title:C,linkedCounterId:null,discountOnActivate:0,discountType:"resta",active:!1,image:null});!t.value&&e.value.length>0&&(t.value=e.value[0].id),r()}finally{n.value=!1}}function c(C){const w=e.value.find(g=>g.id===C);if(w){if(w.active=!w.active,w.active&&w.linkedCounterId){const g=Math.abs(w.discountOnActivate||1),S=w.discountType==="suma"?g:-g;o.updateCounterValue(w.linkedCounterId,S)}r()}}function u(C){e.value=e.value.filter(w=>w.id!==C),r()}async function p(C){const w=e.value.find(g=>g.id===C);if(w&&w.image)try{const g=`state_${w.image}`;await ha.removeItem(g)}catch(g){console.error("Error deleting state image:",g)}e.value=e.value.filter(g=>g.id!==C),t.value===C&&(t.value=e.value.length>0?e.value[0].id:null),r()}function d(C){t.value=C,r()}function m(){e.value.forEach(C=>{C.active=!1}),r()}async function v(C){try{const w=`state_${C}`;return await ha.getItem(w)}catch(w){return console.error("Error retrieving state image:",w),null}}return{states:e,selectedStateId:t,selectedState:a,isLoading:n,loadData:i,addState:l,removeState:u,deleteState:p,setSelectedState:d,toggleStateActive:c,resetStatesOnRest:m,getStateImage:v}}),Us=lo("counter",()=>{const e=pe([]);function t(){const c=yt(),u=c.accountData.activeCharacterId;if(!u)return;const p=c.accountData.characters.findIndex(d=>d.id===u);p!==-1&&(c.accountData.characters[p].counters=e.value,c.saveDataToLocalStorage())}function n(){const c=yt(),u=c.accountData.activeCharacterId;if(!u){e.value=[];return}const p=c.accountData.characters.find(d=>d.id===u);e.value=p&&Array.isArray(p.counters)?p.counters:[]}function o({name:c,initial:u,min:p,max:d,buttons:m,shortRest:v=0,longRest:C=0}){e.value.push({id:ht(),name:c,value:u,min:p,max:d,shortRest:v,shortRestReset:arguments[0].shortRestReset||!1,longRest:C,longRestReset:arguments[0].longRestReset||!1,buttons:m||[{label:"+1",increment:1},{label:"-1",increment:-1}]}),t()}function a(c,u){const p=e.value.find(m=>m.id===c);if(!p)return;let d=p.value+u;p.max!==void 0&&(d=Math.min(d,p.max)),p.min!==void 0&&(d=Math.max(d,p.min)),p.value=d,t()}function r(c){const u=e.value.find(p=>p.id===c);u&&u.max!==void 0&&(u.value=u.max,t())}function i(c){e.value=e.value.filter(u=>u.id!==c),t()}function l(c="short"){e.value.forEach(p=>{const d=c==="short"?"shortRest":"longRest";p[c==="short"?"shortRestReset":"longRestReset"]?p.value=p[d]:typeof p[d]=="number"&&(p.value=Math.min(p.max,p.value+p[d]))}),t(),Fs().resetStatesOnRest()}return{counters:e,loadData:n,addCounter:o,updateCounterValue:a,setCounterToMax:r,removeCounter:i,regenerateCountersByRest:l}}),Eo=lo("character",{state:()=>({character:{name:"",maxHp:0,originalMaxHp:0,currentHp:0,tempHp:0,regeneration:0,isConfigured:!1},turn:{current:0,isActive:!1},logs:[]}),getters:{hpPercentage:e=>e.character.maxHp===0?0:e.character.currentHp/e.character.maxHp*100,tempHpPercentage:e=>e.character.maxHp===0?0:e.character.tempHp/e.character.maxHp*100,hpBarColor:e=>{const t=e.character.currentHp/e.character.maxHp*100;return t>75?"success":t>50?"warning":t>25?"danger":"dark"},isAlive:e=>e.character.currentHp>0,hasTempHp:e=>e.character.tempHp>0,totalHp:e=>e.character.currentHp+e.character.tempHp,logsByTurn:e=>{const t={};return e.logs.forEach(n=>{t[n.turn]||(t[n.turn]=[]),t[n.turn].push(n)}),t},currentTurnLogs:e=>e.logs.filter(t=>t.turn===e.turn.current)},actions:{addLog(e,t,n=null){const o={id:ht(),timestamp:new Date().toLocaleTimeString(),turn:n!==null?n:this.turn.current,action:e,details:t,hpBefore:this.character.currentHp,hpAfter:this.character.currentHp,tempHpBefore:this.character.tempHp,tempHpAfter:this.character.tempHp};this.logs.unshift(o),this.logs.length>100&&(this.logs.length=100)},configureCharacter(e,t,n=0){this.character.name=e,this.character.maxHp=t,this.character.originalMaxHp=t,this.character.currentHp=t,this.character.tempHp=0,this.character.regeneration=n,this.character.isConfigured=!0,this.addLog("Configuracin",`${e} configurado con ${t} HP mximo${n>0?` y regeneracin de ${n} HP/turno`:""}`,0),this.saveData()},startTurn(){if(this.turn.current++,this.turn.isActive=!0,this.addLog("Inicio de Turno",`Turno ${this.turn.current} iniciado`,this.turn.current),this.character.regeneration>0){const o=this.character.currentHp,a=this.character.maxHp;let r=0;if(this.character.maxHp<this.character.originalMaxHp){const c=this.character.originalMaxHp-this.character.maxHp,u=Math.min(this.character.regeneration,c);u>0&&(this.character.maxHp=Math.min(this.character.originalMaxHp,this.character.maxHp+u),r=this.character.maxHp-a)}this.character.currentHp=Math.min(this.character.maxHp,this.character.currentHp+this.character.regeneration);const i=this.character.currentHp-o;let l="";r>0&&i>0?l=`+${i} HP (${o}  ${this.character.currentHp}) | HP mximo restaurado: +${r} (${a}  ${this.character.maxHp})`:r>0?l=`HP mximo restaurado: +${r} (${a}  ${this.character.maxHp})`:i>0&&(l=`+${i} HP (${o}  ${this.character.currentHp})`),l&&this.addLog("Regeneracin Automtica",l)}const e=ma();e.loadData();let t=0;const n=[];return e.passiveDamages.forEach(o=>{if(o.duration===0||o.duration>0){let a=0,r=[];if(o.damageRolls.forEach(i=>{const l=Ng(i.numDice,i.diceType,i.bonus);a+=l;const c=ko.find(u=>u.id===i.type);r.push(c?c.name:i.type)}),a>0){t+=a;const i=r.join(", ");n.push({name:o.name,damage:a,details:i})}}}),this.saveData(),t>0?{totalDamage:t,damageDetails:n}:null},applyPassiveDamage(e,t){this.takeDamage(e,!1);const n=t.map(o=>`${o.damage} por ${o.name}`).join("; ");this.addLog("Dao Pasivo",`-${e} HP en total. Desglose: ${n}`)},endTurn(){this.turn.isActive=!1,ma().decrementDurations(),this.addLog("Fin de Turno",`Turno ${this.turn.current} finalizado`,this.turn.current),this.saveData()},heal(e,t=!1){const n=this.character.currentHp;this.character.currentHp=Math.min(this.character.maxHp,this.character.currentHp+e);const o=this.character.currentHp-n;if(o>0){const a=t?"Regeneracin Automtica":"Curacin";this.addLog(a,`+${o} HP (${n}  ${this.character.currentHp})`)}return n!==this.character.currentHp&&this.saveData(),o},addTempHp(e){const t=this.character.tempHp;this.character.tempHp+=e,this.addLog("Vida Temporal",`+${e} HP temporal (${t}  ${this.character.tempHp})`),this.saveData()},takeDamage(e,t=!1){let n=e;const o=this.character.currentHp,a=this.character.tempHp,r=this.character.maxHp;if(this.character.tempHp>0){const l=Math.min(n,this.character.tempHp);this.character.tempHp-=l,n-=l}n>0&&(this.character.currentHp=Math.max(0,this.character.currentHp-n),t&&(this.character.maxHp=Math.max(1,this.character.maxHp-n)));let i=`-${e} HP${t?" (Necro)":""}`;a>0&&(i+=` | Temp HP: ${a}  ${this.character.tempHp}`),i+=` | HP: ${o}  ${this.character.currentHp}`,t&&r!==this.character.maxHp&&(i+=` | Max HP: ${r}  ${this.character.maxHp}`),this.addLog("Dao Recibido",i),this.saveData()},resetToMaxHp(){const e=this.character.currentHp,t=this.character.tempHp,n=this.character.maxHp;this.character.currentHp=this.character.originalMaxHp,this.character.maxHp=this.character.originalMaxHp,this.character.tempHp=0,this.addLog("Reset HP",`HP restaurado (${e}  ${this.character.originalMaxHp}), Max HP restaurado (${n}  ${this.character.originalMaxHp}), Temp HP eliminado (${t}  0)`),this.saveData()},revive(e=1){if(this.character.currentHp<=0){const t=this.character.currentHp;return this.character.currentHp=Math.min(parseInt(e)||1,this.character.maxHp),this.character.tempHp=0,this.addLog("Revivir",`Personaje revivido (${t}  ${this.character.currentHp} HP)`),this.saveData(),!0}return!1},resetTurn(){const e=this.turn.current;this.turn.current=0,this.turn.isActive=!1,this.addLog("Reset Turno",`Contador de turnos reiniciado (${e}  0)`),this.saveData()},clearLogs(){this.logs=[]},clearAllLogs(){this.logs=[],this.saveData()},saveData(){const e=yt(),t=e.accountData.activeCharacterId;if(!t)return;const n=e.accountData.characters.findIndex(o=>o.id===t);if(n!==-1){const o={character:this.character,turn:this.turn,logs:this.logs};e.accountData.characters[n].characterData=o,e.saveDataToLocalStorage()}},loadData(){const e=yt(),t=e.accountData.activeCharacterId;if(!t){this._clearLocalState();return}const n=e.accountData.characters.find(o=>o.id===t);if(n&&n.characterData){const o=n.characterData;this.character={...this.character,...o.character},this.character.originalMaxHp===void 0&&(this.character.originalMaxHp=this.character.maxHp),this.turn={...this.turn,...o.turn},this.logs=o.logs||[]}else this._clearLocalState()},setActiveCharacter(e){const t=yt();t.accountData.activeCharacterId=e,t.saveDataToLocalStorage(),this.loadAllCharacterData()},loadAllCharacterData(){this.loadData(),Ju().loadData(),ma().loadData(),Us().loadData(),Fs().loadData()},_clearLocalState(){this.character={name:"",maxHp:0,originalMaxHp:0,currentHp:0,tempHp:0,regeneration:0,isConfigured:!1},this.turn={current:0,isActive:!1},this.clearLogs()},clearData(){this._clearLocalState(),this.saveData()}}});/*!
* sweetalert2 v11.22.4
* Released under the MIT License.
*/function Qu(e,t,n){if(typeof e=="function"?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function Ug(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ec(e,t){return e.get(Qu(e,t))}function zg(e,t,n){Ug(e,t),t.set(e,n)}function qg(e,t,n){return e.set(Qu(e,t),n),n}const Wg=100,Pe={},Kg=()=>{Pe.previousActiveElement instanceof HTMLElement?(Pe.previousActiveElement.focus(),Pe.previousActiveElement=null):document.body&&document.body.focus()},Yg=e=>new Promise(t=>{if(!e)return t();const n=window.scrollX,o=window.scrollY;Pe.restoreFocusTimeout=setTimeout(()=>{Kg(),t()},Wg),window.scrollTo(n,o)}),Zu="swal2-",Xg=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],q=Xg.reduce((e,t)=>(e[t]=Zu+t,e),{}),Gg=["success","warning","info","question","error"],Ia=Gg.reduce((e,t)=>(e[t]=Zu+t,e),{}),ed="SweetAlert2:",Ii=e=>e.charAt(0).toUpperCase()+e.slice(1),Wt=e=>{console.warn(`${ed} ${typeof e=="object"?e.join(" "):e}`)},Do=e=>{console.error(`${ed} ${e}`)},tc=[],Jg=e=>{tc.includes(e)||(tc.push(e),Wt(e))},td=(e,t=null)=>{Jg(`"${e}" is deprecated and will be removed in the next major release.${t?` Use "${t}" instead.`:""}`)},ar=e=>typeof e=="function"?e():e,Ri=e=>e&&typeof e.toPromise=="function",zs=e=>Ri(e)?e.toPromise():Promise.resolve(e),Pi=e=>e&&Promise.resolve(e)===e,Kt=()=>document.body.querySelector(`.${q.container}`),qs=e=>{const t=Kt();return t?t.querySelector(e):null},on=e=>qs(`.${e}`),Qe=()=>on(q.popup),Zo=()=>on(q.icon),Qg=()=>on(q["icon-content"]),nd=()=>on(q.title),Hi=()=>on(q["html-container"]),od=()=>on(q.image),Oi=()=>on(q["progress-steps"]),rr=()=>on(q["validation-message"]),Dn=()=>qs(`.${q.actions} .${q.confirm}`),es=()=>qs(`.${q.actions} .${q.cancel}`),To=()=>qs(`.${q.actions} .${q.deny}`),Zg=()=>on(q["input-label"]),ts=()=>qs(`.${q.loader}`),Ws=()=>on(q.actions),sd=()=>on(q.footer),ir=()=>on(q["timer-progress-bar"]),Bi=()=>on(q.close),ev=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,Mi=()=>{const e=Qe();if(!e)return[];const t=e.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),n=Array.from(t).sort((r,i)=>{const l=parseInt(r.getAttribute("tabindex")||"0"),c=parseInt(i.getAttribute("tabindex")||"0");return l>c?1:l<c?-1:0}),o=e.querySelectorAll(ev),a=Array.from(o).filter(r=>r.getAttribute("tabindex")!=="-1");return[...new Set(n.concat(a))].filter(r=>Jt(r))},Li=()=>Ln(document.body,q.shown)&&!Ln(document.body,q["toast-shown"])&&!Ln(document.body,q["no-backdrop"]),lr=()=>{const e=Qe();return e?Ln(e,q.toast):!1},tv=()=>{const e=Qe();return e?e.hasAttribute("data-loading"):!1},sn=(e,t)=>{if(e.textContent="",t){const o=new DOMParser().parseFromString(t,"text/html"),a=o.querySelector("head");a&&Array.from(a.childNodes).forEach(i=>{e.appendChild(i)});const r=o.querySelector("body");r&&Array.from(r.childNodes).forEach(i=>{i instanceof HTMLVideoElement||i instanceof HTMLAudioElement?e.appendChild(i.cloneNode(!0)):e.appendChild(i)})}},Ln=(e,t)=>{if(!t)return!1;const n=t.split(/\s+/);for(let o=0;o<n.length;o++)if(!e.classList.contains(n[o]))return!1;return!0},nv=(e,t)=>{Array.from(e.classList).forEach(n=>{!Object.values(q).includes(n)&&!Object.values(Ia).includes(n)&&!Object.values(t.showClass||{}).includes(n)&&e.classList.remove(n)})},nn=(e,t,n)=>{if(nv(e,t),!t.customClass)return;const o=t.customClass[n];if(o){if(typeof o!="string"&&!o.forEach){Wt(`Invalid type of customClass.${n}! Expected string or iterable object, got "${typeof o}"`);return}et(e,o)}},cr=(e,t)=>{if(!t)return null;switch(t){case"select":case"textarea":case"file":return e.querySelector(`.${q.popup} > .${q[t]}`);case"checkbox":return e.querySelector(`.${q.popup} > .${q.checkbox} input`);case"radio":return e.querySelector(`.${q.popup} > .${q.radio} input:checked`)||e.querySelector(`.${q.popup} > .${q.radio} input:first-child`);case"range":return e.querySelector(`.${q.popup} > .${q.range} input`);default:return e.querySelector(`.${q.popup} > .${q.input}`)}},ad=e=>{if(e.focus(),e.type!=="file"){const t=e.value;e.value="",e.value=t}},rd=(e,t,n)=>{!e||!t||(typeof t=="string"&&(t=t.split(/\s+/).filter(Boolean)),t.forEach(o=>{Array.isArray(e)?e.forEach(a=>{n?a.classList.add(o):a.classList.remove(o)}):n?e.classList.add(o):e.classList.remove(o)}))},et=(e,t)=>{rd(e,t,!0)},fn=(e,t)=>{rd(e,t,!1)},Zn=(e,t)=>{const n=Array.from(e.children);for(let o=0;o<n.length;o++){const a=n[o];if(a instanceof HTMLElement&&Ln(a,t))return a}},yo=(e,t,n)=>{n===`${parseInt(n)}`&&(n=parseInt(n)),n||parseInt(n)===0?e.style.setProperty(t,typeof n=="number"?`${n}px`:n):e.style.removeProperty(t)},Dt=(e,t="flex")=>{e&&(e.style.display=t)},Nt=e=>{e&&(e.style.display="none")},Ni=(e,t="block")=>{e&&new MutationObserver(()=>{Ks(e,e.innerHTML,t)}).observe(e,{childList:!0,subtree:!0})},nc=(e,t,n,o)=>{const a=e.querySelector(t);a&&a.style.setProperty(n,o)},Ks=(e,t,n="flex")=>{t?Dt(e,n):Nt(e)},Jt=e=>!!(e&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)),ov=()=>!Jt(Dn())&&!Jt(To())&&!Jt(es()),si=e=>e.scrollHeight>e.clientHeight,sv=(e,t)=>{let n=e;for(;n&&n!==t;){if(si(n))return!0;n=n.parentElement}return!1},id=e=>{const t=window.getComputedStyle(e),n=parseFloat(t.getPropertyValue("animation-duration")||"0"),o=parseFloat(t.getPropertyValue("transition-duration")||"0");return n>0||o>0},Vi=(e,t=!1)=>{const n=ir();n&&Jt(n)&&(t&&(n.style.transition="none",n.style.width="100%"),setTimeout(()=>{n.style.transition=`width ${e/1e3}s linear`,n.style.width="0%"},10))},av=()=>{const e=ir();if(!e)return;const t=parseInt(window.getComputedStyle(e).width);e.style.removeProperty("transition"),e.style.width="100%";const n=parseInt(window.getComputedStyle(e).width),o=t/n*100;e.style.width=`${o}%`},rv=()=>typeof window>"u"||typeof document>"u",iv=`
 <div aria-labelledby="${q.title}" aria-describedby="${q["html-container"]}" class="${q.popup}" tabindex="-1">
   <button type="button" class="${q.close}"></button>
   <ul class="${q["progress-steps"]}"></ul>
   <div class="${q.icon}"></div>
   <img class="${q.image}" />
   <h2 class="${q.title}" id="${q.title}"></h2>
   <div class="${q["html-container"]}" id="${q["html-container"]}"></div>
   <input class="${q.input}" id="${q.input}" />
   <input type="file" class="${q.file}" />
   <div class="${q.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${q.select}" id="${q.select}"></select>
   <div class="${q.radio}"></div>
   <label class="${q.checkbox}">
     <input type="checkbox" id="${q.checkbox}" />
     <span class="${q.label}"></span>
   </label>
   <textarea class="${q.textarea}" id="${q.textarea}"></textarea>
   <div class="${q["validation-message"]}" id="${q["validation-message"]}"></div>
   <div class="${q.actions}">
     <div class="${q.loader}"></div>
     <button type="button" class="${q.confirm}"></button>
     <button type="button" class="${q.deny}"></button>
     <button type="button" class="${q.cancel}"></button>
   </div>
   <div class="${q.footer}"></div>
   <div class="${q["timer-progress-bar-container"]}">
     <div class="${q["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),lv=()=>{const e=Kt();return e?(e.remove(),fn([document.documentElement,document.body],[q["no-backdrop"],q["toast-shown"],q["has-column"]]),!0):!1},po=()=>{Pe.currentInstance.resetValidationMessage()},cv=()=>{const e=Qe(),t=Zn(e,q.input),n=Zn(e,q.file),o=e.querySelector(`.${q.range} input`),a=e.querySelector(`.${q.range} output`),r=Zn(e,q.select),i=e.querySelector(`.${q.checkbox} input`),l=Zn(e,q.textarea);t.oninput=po,n.onchange=po,r.onchange=po,i.onchange=po,l.oninput=po,o.oninput=()=>{po(),a.value=o.value},o.onchange=()=>{po(),a.value=o.value}},uv=e=>typeof e=="string"?document.querySelector(e):e,dv=e=>{const t=Qe();t.setAttribute("role",e.toast?"alert":"dialog"),t.setAttribute("aria-live",e.toast?"polite":"assertive"),e.toast||t.setAttribute("aria-modal","true")},fv=e=>{window.getComputedStyle(e).direction==="rtl"&&et(Kt(),q.rtl)},pv=e=>{const t=lv();if(rv()){Do("SweetAlert2 requires document to initialize");return}const n=document.createElement("div");n.className=q.container,t&&et(n,q["no-transition"]),sn(n,iv),n.dataset.swal2Theme=e.theme;const o=uv(e.target);o.appendChild(n),e.topLayer&&(n.setAttribute("popover",""),n.showPopover()),dv(e),fv(o),cv()},ji=(e,t)=>{e instanceof HTMLElement?t.appendChild(e):typeof e=="object"?mv(e,t):e&&sn(t,e)},mv=(e,t)=>{e.jquery?hv(t,e):sn(t,e.toString())},hv=(e,t)=>{if(e.textContent="",0 in t)for(let n=0;n in t;n++)e.appendChild(t[n].cloneNode(!0));else e.appendChild(t.cloneNode(!0))},gv=(e,t)=>{const n=Ws(),o=ts();!n||!o||(!t.showConfirmButton&&!t.showDenyButton&&!t.showCancelButton?Nt(n):Dt(n),nn(n,t,"actions"),vv(n,o,t),sn(o,t.loaderHtml||""),nn(o,t,"loader"))};function vv(e,t,n){const o=Dn(),a=To(),r=es();!o||!a||!r||(Rr(o,"confirm",n),Rr(a,"deny",n),Rr(r,"cancel",n),bv(o,a,r,n),n.reverseButtons&&(n.toast?(e.insertBefore(r,o),e.insertBefore(a,o)):(e.insertBefore(r,t),e.insertBefore(a,t),e.insertBefore(o,t))))}function bv(e,t,n,o){if(!o.buttonsStyling){fn([e,t,n],q.styled);return}et([e,t,n],q.styled),o.confirmButtonColor&&e.style.setProperty("--swal2-confirm-button-background-color",o.confirmButtonColor),o.denyButtonColor&&t.style.setProperty("--swal2-deny-button-background-color",o.denyButtonColor),o.cancelButtonColor&&n.style.setProperty("--swal2-cancel-button-background-color",o.cancelButtonColor),Ir(e),Ir(t),Ir(n)}function Ir(e){const t=window.getComputedStyle(e);if(t.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;const n=t.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");e.style.setProperty("--swal2-action-button-focus-box-shadow",t.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${n}`))}function Rr(e,t,n){const o=Ii(t);Ks(e,n[`show${o}Button`],"inline-block"),sn(e,n[`${t}ButtonText`]||""),e.setAttribute("aria-label",n[`${t}ButtonAriaLabel`]||""),e.className=q[t],nn(e,n,`${t}Button`)}const wv=(e,t)=>{const n=Bi();n&&(sn(n,t.closeButtonHtml||""),nn(n,t,"closeButton"),Ks(n,t.showCloseButton),n.setAttribute("aria-label",t.closeButtonAriaLabel||""))},yv=(e,t)=>{const n=Kt();n&&(Cv(n,t.backdrop),xv(n,t.position),_v(n,t.grow),nn(n,t,"container"))};function Cv(e,t){typeof t=="string"?e.style.background=t:t||et([document.documentElement,document.body],q["no-backdrop"])}function xv(e,t){t&&(t in q?et(e,q[t]):(Wt('The "position" parameter is not valid, defaulting to "center"'),et(e,q.center)))}function _v(e,t){t&&et(e,q[`grow-${t}`])}var ut={innerParams:new WeakMap,domCache:new WeakMap};const kv=["input","file","range","select","radio","checkbox","textarea"],Sv=(e,t)=>{const n=Qe();if(!n)return;const o=ut.innerParams.get(e),a=!o||t.input!==o.input;kv.forEach(r=>{const i=Zn(n,q[r]);i&&(Dv(r,t.inputAttributes),i.className=q[r],a&&Nt(i))}),t.input&&(a&&$v(t),Tv(t))},$v=e=>{if(!e.input)return;if(!wt[e.input]){Do(`Unexpected type of input! Expected ${Object.keys(wt).join(" | ")}, got "${e.input}"`);return}const t=ld(e.input);if(!t)return;const n=wt[e.input](t,e);Dt(t),e.inputAutoFocus&&setTimeout(()=>{ad(n)})},Ev=e=>{for(let t=0;t<e.attributes.length;t++){const n=e.attributes[t].name;["id","type","value","style"].includes(n)||e.removeAttribute(n)}},Dv=(e,t)=>{const n=Qe();if(!n)return;const o=cr(n,e);if(o){Ev(o);for(const a in t)o.setAttribute(a,t[a])}},Tv=e=>{if(!e.input)return;const t=ld(e.input);t&&nn(t,e,"input")},Fi=(e,t)=>{!e.placeholder&&t.inputPlaceholder&&(e.placeholder=t.inputPlaceholder)},Ys=(e,t,n)=>{if(n.inputLabel){const o=document.createElement("label"),a=q["input-label"];o.setAttribute("for",e.id),o.className=a,typeof n.customClass=="object"&&et(o,n.customClass.inputLabel),o.innerText=n.inputLabel,t.insertAdjacentElement("beforebegin",o)}},ld=e=>{const t=Qe();if(t)return Zn(t,q[e]||q.input)},Ra=(e,t)=>{["string","number"].includes(typeof t)?e.value=`${t}`:Pi(t)||Wt(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof t}"`)},wt={};wt.text=wt.email=wt.password=wt.number=wt.tel=wt.url=wt.search=wt.date=wt["datetime-local"]=wt.time=wt.week=wt.month=(e,t)=>(Ra(e,t.inputValue),Ys(e,e,t),Fi(e,t),e.type=t.input,e);wt.file=(e,t)=>(Ys(e,e,t),Fi(e,t),e);wt.range=(e,t)=>{const n=e.querySelector("input"),o=e.querySelector("output");return Ra(n,t.inputValue),n.type=t.input,Ra(o,t.inputValue),Ys(n,e,t),e};wt.select=(e,t)=>{if(e.textContent="",t.inputPlaceholder){const n=document.createElement("option");sn(n,t.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,e.appendChild(n)}return Ys(e,e,t),e};wt.radio=e=>(e.textContent="",e);wt.checkbox=(e,t)=>{const n=cr(Qe(),"checkbox");n.value="1",n.checked=!!t.inputValue;const o=e.querySelector("span");return sn(o,t.inputPlaceholder||t.inputLabel),n};wt.textarea=(e,t)=>{Ra(e,t.inputValue),Fi(e,t),Ys(e,e,t);const n=o=>parseInt(window.getComputedStyle(o).marginLeft)+parseInt(window.getComputedStyle(o).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const o=parseInt(window.getComputedStyle(Qe()).width),a=()=>{if(!document.body.contains(e))return;const r=e.offsetWidth+n(e);r>o?Qe().style.width=`${r}px`:yo(Qe(),"width",t.width)};new MutationObserver(a).observe(e,{attributes:!0,attributeFilter:["style"]})}}),e};const Av=(e,t)=>{const n=Hi();n&&(Ni(n),nn(n,t,"htmlContainer"),t.html?(ji(t.html,n),Dt(n,"block")):t.text?(n.textContent=t.text,Dt(n,"block")):Nt(n),Sv(e,t))},Iv=(e,t)=>{const n=sd();n&&(Ni(n),Ks(n,t.footer,"block"),t.footer&&ji(t.footer,n),nn(n,t,"footer"))},Rv=(e,t)=>{const n=ut.innerParams.get(e),o=Zo();if(!o)return;if(n&&t.icon===n.icon){sc(o,t),oc(o,t);return}if(!t.icon&&!t.iconHtml){Nt(o);return}if(t.icon&&Object.keys(Ia).indexOf(t.icon)===-1){Do(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${t.icon}"`),Nt(o);return}Dt(o),sc(o,t),oc(o,t),et(o,t.showClass&&t.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",cd)},oc=(e,t)=>{for(const[n,o]of Object.entries(Ia))t.icon!==n&&fn(e,o);et(e,t.icon&&Ia[t.icon]),Ov(e,t),cd(),nn(e,t,"icon")},cd=()=>{const e=Qe();if(!e)return;const t=window.getComputedStyle(e).getPropertyValue("background-color"),n=e.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let o=0;o<n.length;o++)n[o].style.backgroundColor=t},Pv=e=>`
  ${e.animation?'<div class="swal2-success-circular-line-left"></div>':""}
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div>
  ${e.animation?'<div class="swal2-success-fix"></div>':""}
  ${e.animation?'<div class="swal2-success-circular-line-right"></div>':""}
`,Hv=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,sc=(e,t)=>{if(!t.icon&&!t.iconHtml)return;let n=e.innerHTML,o="";t.iconHtml?o=ac(t.iconHtml):t.icon==="success"?(o=Pv(t),n=n.replace(/ style=".*?"/g,"")):t.icon==="error"?o=Hv:t.icon&&(o=ac({question:"?",warning:"!",info:"i"}[t.icon])),n.trim()!==o.trim()&&sn(e,o)},Ov=(e,t)=>{if(t.iconColor){e.style.color=t.iconColor,e.style.borderColor=t.iconColor;for(const n of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])nc(e,n,"background-color",t.iconColor);nc(e,".swal2-success-ring","border-color",t.iconColor)}},ac=e=>`<div class="${q["icon-content"]}">${e}</div>`,Bv=(e,t)=>{const n=od();if(n){if(!t.imageUrl){Nt(n);return}Dt(n,""),n.setAttribute("src",t.imageUrl),n.setAttribute("alt",t.imageAlt||""),yo(n,"width",t.imageWidth),yo(n,"height",t.imageHeight),n.className=q.image,nn(n,t,"image")}};let Ui=!1,ud=0,dd=0,fd=0,pd=0;const Mv=e=>{e.addEventListener("mousedown",Pa),document.body.addEventListener("mousemove",Ha),e.addEventListener("mouseup",Oa),e.addEventListener("touchstart",Pa),document.body.addEventListener("touchmove",Ha),e.addEventListener("touchend",Oa)},Lv=e=>{e.removeEventListener("mousedown",Pa),document.body.removeEventListener("mousemove",Ha),e.removeEventListener("mouseup",Oa),e.removeEventListener("touchstart",Pa),document.body.removeEventListener("touchmove",Ha),e.removeEventListener("touchend",Oa)},Pa=e=>{const t=Qe();if(e.target===t||Zo().contains(e.target)){Ui=!0;const n=md(e);ud=n.clientX,dd=n.clientY,fd=parseInt(t.style.insetInlineStart)||0,pd=parseInt(t.style.insetBlockStart)||0,et(t,"swal2-dragging")}},Ha=e=>{const t=Qe();if(Ui){let{clientX:n,clientY:o}=md(e);t.style.insetInlineStart=`${fd+(n-ud)}px`,t.style.insetBlockStart=`${pd+(o-dd)}px`}},Oa=()=>{const e=Qe();Ui=!1,fn(e,"swal2-dragging")},md=e=>{let t=0,n=0;return e.type.startsWith("mouse")?(t=e.clientX,n=e.clientY):e.type.startsWith("touch")&&(t=e.touches[0].clientX,n=e.touches[0].clientY),{clientX:t,clientY:n}},Nv=(e,t)=>{const n=Kt(),o=Qe();if(!(!n||!o)){if(t.toast){yo(n,"width",t.width),o.style.width="100%";const a=ts();a&&o.insertBefore(a,Zo())}else yo(o,"width",t.width);yo(o,"padding",t.padding),t.color&&(o.style.color=t.color),t.background&&(o.style.background=t.background),Nt(rr()),Vv(o,t),t.draggable&&!t.toast?(et(o,q.draggable),Mv(o)):(fn(o,q.draggable),Lv(o))}},Vv=(e,t)=>{const n=t.showClass||{};e.className=`${q.popup} ${Jt(e)?n.popup:""}`,t.toast?(et([document.documentElement,document.body],q["toast-shown"]),et(e,q.toast)):et(e,q.modal),nn(e,t,"popup"),typeof t.customClass=="string"&&et(e,t.customClass),t.icon&&et(e,q[`icon-${t.icon}`])},jv=(e,t)=>{const n=Oi();if(!n)return;const{progressSteps:o,currentProgressStep:a}=t;if(!o||o.length===0||a===void 0){Nt(n);return}Dt(n),n.textContent="",a>=o.length&&Wt("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),o.forEach((r,i)=>{const l=Fv(r);if(n.appendChild(l),i===a&&et(l,q["active-progress-step"]),i!==o.length-1){const c=Uv(t);n.appendChild(c)}})},Fv=e=>{const t=document.createElement("li");return et(t,q["progress-step"]),sn(t,e),t},Uv=e=>{const t=document.createElement("li");return et(t,q["progress-step-line"]),e.progressStepsDistance&&yo(t,"width",e.progressStepsDistance),t},zv=(e,t)=>{const n=nd();n&&(Ni(n),Ks(n,t.title||t.titleText,"block"),t.title&&ji(t.title,n),t.titleText&&(n.innerText=t.titleText),nn(n,t,"title"))},hd=(e,t)=>{Nv(e,t),yv(e,t),jv(e,t),Rv(e,t),Bv(e,t),zv(e,t),wv(e,t),Av(e,t),gv(e,t),Iv(e,t);const n=Qe();typeof t.didRender=="function"&&n&&t.didRender(n),Pe.eventEmitter.emit("didRender",n)},qv=()=>Jt(Qe()),gd=()=>{var e;return(e=Dn())===null||e===void 0?void 0:e.click()},Wv=()=>{var e;return(e=To())===null||e===void 0?void 0:e.click()},Kv=()=>{var e;return(e=es())===null||e===void 0?void 0:e.click()},ns=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),vd=e=>{e.keydownTarget&&e.keydownHandlerAdded&&(e.keydownTarget.removeEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!1)},Yv=(e,t,n)=>{vd(e),t.toast||(e.keydownHandler=o=>Gv(t,o,n),e.keydownTarget=t.keydownListenerCapture?window:Qe(),e.keydownListenerCapture=t.keydownListenerCapture,e.keydownTarget.addEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!0)},ai=(e,t)=>{var n;const o=Mi();if(o.length){e=e+t,e===-2&&(e=o.length-1),e===o.length?e=0:e===-1&&(e=o.length-1),o[e].focus();return}(n=Qe())===null||n===void 0||n.focus()},bd=["ArrowRight","ArrowDown"],Xv=["ArrowLeft","ArrowUp"],Gv=(e,t,n)=>{e&&(t.isComposing||t.keyCode===229||(e.stopKeydownPropagation&&t.stopPropagation(),t.key==="Enter"?Jv(t,e):t.key==="Tab"?Qv(t):[...bd,...Xv].includes(t.key)?Zv(t.key):t.key==="Escape"&&eb(t,e,n)))},Jv=(e,t)=>{if(!ar(t.allowEnterKey))return;const n=cr(Qe(),t.input);if(e.target&&n&&e.target instanceof HTMLElement&&e.target.outerHTML===n.outerHTML){if(["textarea","file"].includes(t.input))return;gd(),e.preventDefault()}},Qv=e=>{const t=e.target,n=Mi();let o=-1;for(let a=0;a<n.length;a++)if(t===n[a]){o=a;break}e.shiftKey?ai(o,-1):ai(o,1),e.stopPropagation(),e.preventDefault()},Zv=e=>{const t=Ws(),n=Dn(),o=To(),a=es();if(!t||!n||!o||!a)return;const r=[n,o,a];if(document.activeElement instanceof HTMLElement&&!r.includes(document.activeElement))return;const i=bd.includes(e)?"nextElementSibling":"previousElementSibling";let l=document.activeElement;if(l){for(let c=0;c<t.children.length;c++){if(l=l[i],!l)return;if(l instanceof HTMLButtonElement&&Jt(l))break}l instanceof HTMLButtonElement&&l.focus()}},eb=(e,t,n)=>{e.preventDefault(),ar(t.allowEscapeKey)&&n(ns.esc)};var Xo={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const tb=()=>{const e=Kt();Array.from(document.body.children).forEach(n=>{n.contains(e)||(n.hasAttribute("aria-hidden")&&n.setAttribute("data-previous-aria-hidden",n.getAttribute("aria-hidden")||""),n.setAttribute("aria-hidden","true"))})},wd=()=>{Array.from(document.body.children).forEach(t=>{t.hasAttribute("data-previous-aria-hidden")?(t.setAttribute("aria-hidden",t.getAttribute("data-previous-aria-hidden")||""),t.removeAttribute("data-previous-aria-hidden")):t.removeAttribute("aria-hidden")})},yd=typeof window<"u"&&!!window.GestureEvent,nb=()=>{if(yd&&!Ln(document.body,q.iosfix)){const e=document.body.scrollTop;document.body.style.top=`${e*-1}px`,et(document.body,q.iosfix),ob()}},ob=()=>{const e=Kt();if(!e)return;let t;e.ontouchstart=n=>{t=sb(n)},e.ontouchmove=n=>{t&&(n.preventDefault(),n.stopPropagation())}},sb=e=>{const t=e.target,n=Kt(),o=Hi();return!n||!o||ab(e)||rb(e)?!1:t===n||!si(n)&&t instanceof HTMLElement&&!sv(t,o)&&t.tagName!=="INPUT"&&t.tagName!=="TEXTAREA"&&!(si(o)&&o.contains(t))},ab=e=>e.touches&&e.touches.length&&e.touches[0].touchType==="stylus",rb=e=>e.touches&&e.touches.length>1,ib=()=>{if(Ln(document.body,q.iosfix)){const e=parseInt(document.body.style.top,10);fn(document.body,q.iosfix),document.body.style.top="",document.body.scrollTop=e*-1}},lb=()=>{const e=document.createElement("div");e.className=q["scrollbar-measure"],document.body.appendChild(e);const t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t};let Fo=null;const cb=e=>{Fo===null&&(document.body.scrollHeight>window.innerHeight||e==="scroll")&&(Fo=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${Fo+lb()}px`)},ub=()=>{Fo!==null&&(document.body.style.paddingRight=`${Fo}px`,Fo=null)};function Cd(e,t,n,o){lr()?rc(e,o):(Yg(n).then(()=>rc(e,o)),vd(Pe)),yd?(t.setAttribute("style","display:none !important"),t.removeAttribute("class"),t.innerHTML=""):t.remove(),Li()&&(ub(),ib(),wd()),db()}function db(){fn([document.documentElement,document.body],[q.shown,q["height-auto"],q["no-backdrop"],q["toast-shown"]])}function eo(e){e=pb(e);const t=Xo.swalPromiseResolve.get(this),n=fb(this);this.isAwaitingPromise?e.isDismissed||(Xs(this),t(e)):n&&t(e)}const fb=e=>{const t=Qe();if(!t)return!1;const n=ut.innerParams.get(e);if(!n||Ln(t,n.hideClass.popup))return!1;fn(t,n.showClass.popup),et(t,n.hideClass.popup);const o=Kt();return fn(o,n.showClass.backdrop),et(o,n.hideClass.backdrop),mb(e,t,n),!0};function xd(e){const t=Xo.swalPromiseReject.get(this);Xs(this),t&&t(e)}const Xs=e=>{e.isAwaitingPromise&&(delete e.isAwaitingPromise,ut.innerParams.get(e)||e._destroy())},pb=e=>typeof e>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},e),mb=(e,t,n)=>{var o;const a=Kt(),r=id(t);typeof n.willClose=="function"&&n.willClose(t),(o=Pe.eventEmitter)===null||o===void 0||o.emit("willClose",t),r?hb(e,t,a,n.returnFocus,n.didClose):Cd(e,a,n.returnFocus,n.didClose)},hb=(e,t,n,o,a)=>{Pe.swalCloseEventFinishedCallback=Cd.bind(null,e,n,o,a);const r=function(i){if(i.target===t){var l;(l=Pe.swalCloseEventFinishedCallback)===null||l===void 0||l.call(Pe),delete Pe.swalCloseEventFinishedCallback,t.removeEventListener("animationend",r),t.removeEventListener("transitionend",r)}};t.addEventListener("animationend",r),t.addEventListener("transitionend",r)},rc=(e,t)=>{setTimeout(()=>{var n;typeof t=="function"&&t.bind(e.params)(),(n=Pe.eventEmitter)===null||n===void 0||n.emit("didClose"),e._destroy&&e._destroy()})},Go=e=>{let t=Qe();if(t||new xe,t=Qe(),!t)return;const n=ts();lr()?Nt(Zo()):gb(t,e),Dt(n),t.setAttribute("data-loading","true"),t.setAttribute("aria-busy","true"),t.focus()},gb=(e,t)=>{const n=Ws(),o=ts();!n||!o||(!t&&Jt(Dn())&&(t=Dn()),Dt(n),t&&(Nt(t),o.setAttribute("data-button-to-replace",t.className),n.insertBefore(o,t)),et([e,n],q.loading))},vb=(e,t)=>{t.input==="select"||t.input==="radio"?xb(e,t):["text","email","number","tel","textarea"].some(n=>n===t.input)&&(Ri(t.inputValue)||Pi(t.inputValue))&&(Go(Dn()),_b(e,t))},bb=(e,t)=>{const n=e.getInput();if(!n)return null;switch(t.input){case"checkbox":return wb(n);case"radio":return yb(n);case"file":return Cb(n);default:return t.inputAutoTrim?n.value.trim():n.value}},wb=e=>e.checked?1:0,yb=e=>e.checked?e.value:null,Cb=e=>e.files&&e.files.length?e.getAttribute("multiple")!==null?e.files:e.files[0]:null,xb=(e,t)=>{const n=Qe();if(!n)return;const o=a=>{t.input==="select"?kb(n,Ba(a),t):t.input==="radio"&&Sb(n,Ba(a),t)};Ri(t.inputOptions)||Pi(t.inputOptions)?(Go(Dn()),zs(t.inputOptions).then(a=>{e.hideLoading(),o(a)})):typeof t.inputOptions=="object"?o(t.inputOptions):Do(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof t.inputOptions}`)},_b=(e,t)=>{const n=e.getInput();n&&(Nt(n),zs(t.inputValue).then(o=>{n.value=t.input==="number"?`${parseFloat(o)||0}`:`${o}`,Dt(n),n.focus(),e.hideLoading()}).catch(o=>{Do(`Error in inputValue promise: ${o}`),n.value="",Dt(n),n.focus(),e.hideLoading()}))};function kb(e,t,n){const o=Zn(e,q.select);if(!o)return;const a=(r,i,l)=>{const c=document.createElement("option");c.value=l,sn(c,i),c.selected=_d(l,n.inputValue),r.appendChild(c)};t.forEach(r=>{const i=r[0],l=r[1];if(Array.isArray(l)){const c=document.createElement("optgroup");c.label=i,c.disabled=!1,o.appendChild(c),l.forEach(u=>a(c,u[1],u[0]))}else a(o,l,i)}),o.focus()}function Sb(e,t,n){const o=Zn(e,q.radio);if(!o)return;t.forEach(r=>{const i=r[0],l=r[1],c=document.createElement("input"),u=document.createElement("label");c.type="radio",c.name=q.radio,c.value=i,_d(i,n.inputValue)&&(c.checked=!0);const p=document.createElement("span");sn(p,l),p.className=q.label,u.appendChild(c),u.appendChild(p),o.appendChild(u)});const a=o.querySelectorAll("input");a.length&&a[0].focus()}const Ba=e=>{const t=[];return e instanceof Map?e.forEach((n,o)=>{let a=n;typeof a=="object"&&(a=Ba(a)),t.push([o,a])}):Object.keys(e).forEach(n=>{let o=e[n];typeof o=="object"&&(o=Ba(o)),t.push([n,o])}),t},_d=(e,t)=>!!t&&t.toString()===e.toString(),$b=e=>{const t=ut.innerParams.get(e);e.disableButtons(),t.input?kd(e,"confirm"):qi(e,!0)},Eb=e=>{const t=ut.innerParams.get(e);e.disableButtons(),t.returnInputValueOnDeny?kd(e,"deny"):zi(e,!1)},Db=(e,t)=>{e.disableButtons(),t(ns.cancel)},kd=(e,t)=>{const n=ut.innerParams.get(e);if(!n.input){Do(`The "input" parameter is needed to be set when using returnInputValueOn${Ii(t)}`);return}const o=e.getInput(),a=bb(e,n);n.inputValidator?Tb(e,a,t):o&&!o.checkValidity()?(e.enableButtons(),e.showValidationMessage(n.validationMessage||o.validationMessage)):t==="deny"?zi(e,a):qi(e,a)},Tb=(e,t,n)=>{const o=ut.innerParams.get(e);e.disableInput(),Promise.resolve().then(()=>zs(o.inputValidator(t,o.validationMessage))).then(r=>{e.enableButtons(),e.enableInput(),r?e.showValidationMessage(r):n==="deny"?zi(e,t):qi(e,t)})},zi=(e,t)=>{const n=ut.innerParams.get(e||void 0);n.showLoaderOnDeny&&Go(To()),n.preDeny?(e.isAwaitingPromise=!0,Promise.resolve().then(()=>zs(n.preDeny(t,n.validationMessage))).then(a=>{a===!1?(e.hideLoading(),Xs(e)):e.close({isDenied:!0,value:typeof a>"u"?t:a})}).catch(a=>Sd(e||void 0,a))):e.close({isDenied:!0,value:t})},ic=(e,t)=>{e.close({isConfirmed:!0,value:t})},Sd=(e,t)=>{e.rejectPromise(t)},qi=(e,t)=>{const n=ut.innerParams.get(e||void 0);n.showLoaderOnConfirm&&Go(),n.preConfirm?(e.resetValidationMessage(),e.isAwaitingPromise=!0,Promise.resolve().then(()=>zs(n.preConfirm(t,n.validationMessage))).then(a=>{Jt(rr())||a===!1?(e.hideLoading(),Xs(e)):ic(e,typeof a>"u"?t:a)}).catch(a=>Sd(e||void 0,a))):ic(e,t)};function Ma(){const e=ut.innerParams.get(this);if(!e)return;const t=ut.domCache.get(this);Nt(t.loader),lr()?e.icon&&Dt(Zo()):Ab(t),fn([t.popup,t.actions],q.loading),t.popup.removeAttribute("aria-busy"),t.popup.removeAttribute("data-loading"),t.confirmButton.disabled=!1,t.denyButton.disabled=!1,t.cancelButton.disabled=!1}const Ab=e=>{const t=e.popup.getElementsByClassName(e.loader.getAttribute("data-button-to-replace"));t.length?Dt(t[0],"inline-block"):ov()&&Nt(e.actions)};function $d(){const e=ut.innerParams.get(this),t=ut.domCache.get(this);return t?cr(t.popup,e.input):null}function Ed(e,t,n){const o=ut.domCache.get(e);t.forEach(a=>{o[a].disabled=n})}function Dd(e,t){const n=Qe();if(!(!n||!e))if(e.type==="radio"){const o=n.querySelectorAll(`[name="${q.radio}"]`);for(let a=0;a<o.length;a++)o[a].disabled=t}else e.disabled=t}function Td(){Ed(this,["confirmButton","denyButton","cancelButton"],!1)}function Ad(){Ed(this,["confirmButton","denyButton","cancelButton"],!0)}function Id(){Dd(this.getInput(),!1)}function Rd(){Dd(this.getInput(),!0)}function Pd(e){const t=ut.domCache.get(this),n=ut.innerParams.get(this);sn(t.validationMessage,e),t.validationMessage.className=q["validation-message"],n.customClass&&n.customClass.validationMessage&&et(t.validationMessage,n.customClass.validationMessage),Dt(t.validationMessage);const o=this.getInput();o&&(o.setAttribute("aria-invalid","true"),o.setAttribute("aria-describedby",q["validation-message"]),ad(o),et(o,q.inputerror))}function Hd(){const e=ut.domCache.get(this);e.validationMessage&&Nt(e.validationMessage);const t=this.getInput();t&&(t.removeAttribute("aria-invalid"),t.removeAttribute("aria-describedby"),fn(t,q.inputerror))}const Uo={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},Ib=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],Rb={allowEnterKey:void 0},Pb=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Od=e=>Object.prototype.hasOwnProperty.call(Uo,e),Bd=e=>Ib.indexOf(e)!==-1,Md=e=>Rb[e],Hb=e=>{Od(e)||Wt(`Unknown parameter "${e}"`)},Ob=e=>{Pb.includes(e)&&Wt(`The parameter "${e}" is incompatible with toasts`)},Bb=e=>{const t=Md(e);t&&td(e,t)},Ld=e=>{e.backdrop===!1&&e.allowOutsideClick&&Wt('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),e.theme&&!["light","dark","auto","minimal","borderless","embed-iframe","bulma","bulma-light","bulma-dark"].includes(e.theme)&&Wt(`Invalid theme "${e.theme}"`);for(const t in e)Hb(t),e.toast&&Ob(t),Bb(t)};function Nd(e){const t=Kt(),n=Qe(),o=ut.innerParams.get(this);if(!n||Ln(n,o.hideClass.popup)){Wt("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const a=Mb(e),r=Object.assign({},o,a);Ld(r),t.dataset.swal2Theme=r.theme,hd(this,r),ut.innerParams.set(this,r),Object.defineProperties(this,{params:{value:Object.assign({},this.params,e),writable:!1,enumerable:!0}})}const Mb=e=>{const t={};return Object.keys(e).forEach(n=>{Bd(n)?t[n]=e[n]:Wt(`Invalid parameter to update: ${n}`)}),t};function Vd(){const e=ut.domCache.get(this),t=ut.innerParams.get(this);if(!t){jd(this);return}e.popup&&Pe.swalCloseEventFinishedCallback&&(Pe.swalCloseEventFinishedCallback(),delete Pe.swalCloseEventFinishedCallback),typeof t.didDestroy=="function"&&t.didDestroy(),Pe.eventEmitter.emit("didDestroy"),Lb(this)}const Lb=e=>{jd(e),delete e.params,delete Pe.keydownHandler,delete Pe.keydownTarget,delete Pe.currentInstance},jd=e=>{e.isAwaitingPromise?(Pr(ut,e),e.isAwaitingPromise=!0):(Pr(Xo,e),Pr(ut,e),delete e.isAwaitingPromise,delete e.disableButtons,delete e.enableButtons,delete e.getInput,delete e.disableInput,delete e.enableInput,delete e.hideLoading,delete e.disableLoading,delete e.showValidationMessage,delete e.resetValidationMessage,delete e.close,delete e.closePopup,delete e.closeModal,delete e.closeToast,delete e.rejectPromise,delete e.update,delete e._destroy)},Pr=(e,t)=>{for(const n in e)e[n].delete(t)};var Nb=Object.freeze({__proto__:null,_destroy:Vd,close:eo,closeModal:eo,closePopup:eo,closeToast:eo,disableButtons:Ad,disableInput:Rd,disableLoading:Ma,enableButtons:Td,enableInput:Id,getInput:$d,handleAwaitingPromise:Xs,hideLoading:Ma,rejectPromise:xd,resetValidationMessage:Hd,showValidationMessage:Pd,update:Nd});const Vb=(e,t,n)=>{e.toast?jb(e,t,n):(Ub(t),zb(t),qb(e,t,n))},jb=(e,t,n)=>{t.popup.onclick=()=>{e&&(Fb(e)||e.timer||e.input)||n(ns.close)}},Fb=e=>!!(e.showConfirmButton||e.showDenyButton||e.showCancelButton||e.showCloseButton);let La=!1;const Ub=e=>{e.popup.onmousedown=()=>{e.container.onmouseup=function(t){e.container.onmouseup=()=>{},t.target===e.container&&(La=!0)}}},zb=e=>{e.container.onmousedown=t=>{t.target===e.container&&t.preventDefault(),e.popup.onmouseup=function(n){e.popup.onmouseup=()=>{},(n.target===e.popup||n.target instanceof HTMLElement&&e.popup.contains(n.target))&&(La=!0)}}},qb=(e,t,n)=>{t.container.onclick=o=>{if(La){La=!1;return}o.target===t.container&&ar(e.allowOutsideClick)&&n(ns.backdrop)}},Wb=e=>typeof e=="object"&&e.jquery,lc=e=>e instanceof Element||Wb(e),Kb=e=>{const t={};return typeof e[0]=="object"&&!lc(e[0])?Object.assign(t,e[0]):["title","html","icon"].forEach((n,o)=>{const a=e[o];typeof a=="string"||lc(a)?t[n]=a:a!==void 0&&Do(`Unexpected type of ${n}! Expected "string" or "Element", got ${typeof a}`)}),t};function Yb(...e){return new this(...e)}function Xb(e){class t extends this{_main(o,a){return super._main(o,Object.assign({},e,a))}}return t}const Gb=()=>Pe.timeout&&Pe.timeout.getTimerLeft(),Fd=()=>{if(Pe.timeout)return av(),Pe.timeout.stop()},Ud=()=>{if(Pe.timeout){const e=Pe.timeout.start();return Vi(e),e}},Jb=()=>{const e=Pe.timeout;return e&&(e.running?Fd():Ud())},Qb=e=>{if(Pe.timeout){const t=Pe.timeout.increase(e);return Vi(t,!0),t}},Zb=()=>!!(Pe.timeout&&Pe.timeout.isRunning());let cc=!1;const ri={};function e1(e="data-swal-template"){ri[e]=this,cc||(document.body.addEventListener("click",t1),cc=!0)}const t1=e=>{for(let t=e.target;t&&t!==document;t=t.parentNode)for(const n in ri){const o=t.getAttribute(n);if(o){ri[n].fire({template:o});return}}};class n1{constructor(){this.events={}}_getHandlersByEventName(t){return typeof this.events[t]>"u"&&(this.events[t]=[]),this.events[t]}on(t,n){const o=this._getHandlersByEventName(t);o.includes(n)||o.push(n)}once(t,n){const o=(...a)=>{this.removeListener(t,o),n.apply(this,a)};this.on(t,o)}emit(t,...n){this._getHandlersByEventName(t).forEach(o=>{try{o.apply(this,n)}catch(a){console.error(a)}})}removeListener(t,n){const o=this._getHandlersByEventName(t),a=o.indexOf(n);a>-1&&o.splice(a,1)}removeAllListeners(t){this.events[t]!==void 0&&(this.events[t].length=0)}reset(){this.events={}}}Pe.eventEmitter=new n1;const o1=(e,t)=>{Pe.eventEmitter.on(e,t)},s1=(e,t)=>{Pe.eventEmitter.once(e,t)},a1=(e,t)=>{if(!e){Pe.eventEmitter.reset();return}t?Pe.eventEmitter.removeListener(e,t):Pe.eventEmitter.removeAllListeners(e)};var r1=Object.freeze({__proto__:null,argsToParams:Kb,bindClickHandler:e1,clickCancel:Kv,clickConfirm:gd,clickDeny:Wv,enableLoading:Go,fire:Yb,getActions:Ws,getCancelButton:es,getCloseButton:Bi,getConfirmButton:Dn,getContainer:Kt,getDenyButton:To,getFocusableElements:Mi,getFooter:sd,getHtmlContainer:Hi,getIcon:Zo,getIconContent:Qg,getImage:od,getInputLabel:Zg,getLoader:ts,getPopup:Qe,getProgressSteps:Oi,getTimerLeft:Gb,getTimerProgressBar:ir,getTitle:nd,getValidationMessage:rr,increaseTimer:Qb,isDeprecatedParameter:Md,isLoading:tv,isTimerRunning:Zb,isUpdatableParameter:Bd,isValidParameter:Od,isVisible:qv,mixin:Xb,off:a1,on:o1,once:s1,resumeTimer:Ud,showLoading:Go,stopTimer:Fd,toggleTimer:Jb});class i1{constructor(t,n){this.callback=t,this.remaining=n,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(t){const n=this.running;return n&&this.stop(),this.remaining+=t,n&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const zd=["swal-title","swal-html","swal-footer"],l1=e=>{const t=typeof e.template=="string"?document.querySelector(e.template):e.template;if(!t)return{};const n=t.content;return g1(n),Object.assign(c1(n),u1(n),d1(n),f1(n),p1(n),m1(n),h1(n,zd))},c1=e=>{const t={};return Array.from(e.querySelectorAll("swal-param")).forEach(o=>{So(o,["name","value"]);const a=o.getAttribute("name"),r=o.getAttribute("value");!a||!r||(typeof Uo[a]=="boolean"?t[a]=r!=="false":typeof Uo[a]=="object"?t[a]=JSON.parse(r):t[a]=r)}),t},u1=e=>{const t={};return Array.from(e.querySelectorAll("swal-function-param")).forEach(o=>{const a=o.getAttribute("name"),r=o.getAttribute("value");!a||!r||(t[a]=new Function(`return ${r}`)())}),t},d1=e=>{const t={};return Array.from(e.querySelectorAll("swal-button")).forEach(o=>{So(o,["type","color","aria-label"]);const a=o.getAttribute("type");!a||!["confirm","cancel","deny"].includes(a)||(t[`${a}ButtonText`]=o.innerHTML,t[`show${Ii(a)}Button`]=!0,o.hasAttribute("color")&&(t[`${a}ButtonColor`]=o.getAttribute("color")),o.hasAttribute("aria-label")&&(t[`${a}ButtonAriaLabel`]=o.getAttribute("aria-label")))}),t},f1=e=>{const t={},n=e.querySelector("swal-image");return n&&(So(n,["src","width","height","alt"]),n.hasAttribute("src")&&(t.imageUrl=n.getAttribute("src")||void 0),n.hasAttribute("width")&&(t.imageWidth=n.getAttribute("width")||void 0),n.hasAttribute("height")&&(t.imageHeight=n.getAttribute("height")||void 0),n.hasAttribute("alt")&&(t.imageAlt=n.getAttribute("alt")||void 0)),t},p1=e=>{const t={},n=e.querySelector("swal-icon");return n&&(So(n,["type","color"]),n.hasAttribute("type")&&(t.icon=n.getAttribute("type")),n.hasAttribute("color")&&(t.iconColor=n.getAttribute("color")),t.iconHtml=n.innerHTML),t},m1=e=>{const t={},n=e.querySelector("swal-input");n&&(So(n,["type","label","placeholder","value"]),t.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(t.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(t.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(t.inputValue=n.getAttribute("value")));const o=Array.from(e.querySelectorAll("swal-input-option"));return o.length&&(t.inputOptions={},o.forEach(a=>{So(a,["value"]);const r=a.getAttribute("value");if(!r)return;const i=a.innerHTML;t.inputOptions[r]=i})),t},h1=(e,t)=>{const n={};for(const o in t){const a=t[o],r=e.querySelector(a);r&&(So(r,[]),n[a.replace(/^swal-/,"")]=r.innerHTML.trim())}return n},g1=e=>{const t=zd.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(e.children).forEach(n=>{const o=n.tagName.toLowerCase();t.includes(o)||Wt(`Unrecognized element <${o}>`)})},So=(e,t)=>{Array.from(e.attributes).forEach(n=>{t.indexOf(n.name)===-1&&Wt([`Unrecognized attribute "${n.name}" on <${e.tagName.toLowerCase()}>.`,`${t.length?`Allowed attributes are: ${t.join(", ")}`:"To set the value, use HTML within the element."}`])})},qd=10,v1=e=>{const t=Kt(),n=Qe();typeof e.willOpen=="function"&&e.willOpen(n),Pe.eventEmitter.emit("willOpen",n);const a=window.getComputedStyle(document.body).overflowY;y1(t,n,e),setTimeout(()=>{b1(t,n)},qd),Li()&&(w1(t,e.scrollbarPadding,a),tb()),!lr()&&!Pe.previousActiveElement&&(Pe.previousActiveElement=document.activeElement),typeof e.didOpen=="function"&&setTimeout(()=>e.didOpen(n)),Pe.eventEmitter.emit("didOpen",n),fn(t,q["no-transition"])},Na=e=>{const t=Qe();if(e.target!==t)return;const n=Kt();t.removeEventListener("animationend",Na),t.removeEventListener("transitionend",Na),n.style.overflowY="auto"},b1=(e,t)=>{id(t)?(e.style.overflowY="hidden",t.addEventListener("animationend",Na),t.addEventListener("transitionend",Na)):e.style.overflowY="auto"},w1=(e,t,n)=>{nb(),t&&n!=="hidden"&&cb(n),setTimeout(()=>{e.scrollTop=0})},y1=(e,t,n)=>{et(e,n.showClass.backdrop),n.animation?(t.style.setProperty("opacity","0","important"),Dt(t,"grid"),setTimeout(()=>{et(t,n.showClass.popup),t.style.removeProperty("opacity")},qd)):Dt(t,"grid"),et([document.documentElement,document.body],q.shown),n.heightAuto&&n.backdrop&&!n.toast&&et([document.documentElement,document.body],q["height-auto"])};var uc={email:(e,t)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid email address"),url:(e,t)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid URL")};function C1(e){e.inputValidator||(e.input==="email"&&(e.inputValidator=uc.email),e.input==="url"&&(e.inputValidator=uc.url))}function x1(e){(!e.target||typeof e.target=="string"&&!document.querySelector(e.target)||typeof e.target!="string"&&!e.target.appendChild)&&(Wt('Target parameter is not valid, defaulting to "body"'),e.target="body")}function _1(e){C1(e),e.showLoaderOnConfirm&&!e.preConfirm&&Wt(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),x1(e),typeof e.title=="string"&&(e.title=e.title.split(`
`).join("<br />")),pv(e)}let yn;var sa=new WeakMap;class Ct{constructor(...t){if(zg(this,sa,void 0),typeof window>"u")return;yn=this;const n=Object.freeze(this.constructor.argsToParams(t));this.params=n,this.isAwaitingPromise=!1,qg(sa,this,this._main(yn.params))}_main(t,n={}){if(Ld(Object.assign({},n,t)),Pe.currentInstance){const r=Xo.swalPromiseResolve.get(Pe.currentInstance),{isAwaitingPromise:i}=Pe.currentInstance;Pe.currentInstance._destroy(),i||r({isDismissed:!0}),Li()&&wd()}Pe.currentInstance=yn;const o=S1(t,n);_1(o),Object.freeze(o),Pe.timeout&&(Pe.timeout.stop(),delete Pe.timeout),clearTimeout(Pe.restoreFocusTimeout);const a=$1(yn);return hd(yn,o),ut.innerParams.set(yn,o),k1(yn,a,o)}then(t){return ec(sa,this).then(t)}finally(t){return ec(sa,this).finally(t)}}const k1=(e,t,n)=>new Promise((o,a)=>{const r=i=>{e.close({isDismissed:!0,dismiss:i})};Xo.swalPromiseResolve.set(e,o),Xo.swalPromiseReject.set(e,a),t.confirmButton.onclick=()=>{$b(e)},t.denyButton.onclick=()=>{Eb(e)},t.cancelButton.onclick=()=>{Db(e,r)},t.closeButton.onclick=()=>{r(ns.close)},Vb(n,t,r),Yv(Pe,n,r),vb(e,n),v1(n),E1(Pe,n,r),D1(t,n),setTimeout(()=>{t.container.scrollTop=0})}),S1=(e,t)=>{const n=l1(e),o=Object.assign({},Uo,t,n,e);return o.showClass=Object.assign({},Uo.showClass,o.showClass),o.hideClass=Object.assign({},Uo.hideClass,o.hideClass),o.animation===!1&&(o.showClass={backdrop:"swal2-noanimation"},o.hideClass={}),o},$1=e=>{const t={popup:Qe(),container:Kt(),actions:Ws(),confirmButton:Dn(),denyButton:To(),cancelButton:es(),loader:ts(),closeButton:Bi(),validationMessage:rr(),progressSteps:Oi()};return ut.domCache.set(e,t),t},E1=(e,t,n)=>{const o=ir();Nt(o),t.timer&&(e.timeout=new i1(()=>{n("timer"),delete e.timeout},t.timer),t.timerProgressBar&&(Dt(o),nn(o,t,"timerProgressBar"),setTimeout(()=>{e.timeout&&e.timeout.running&&Vi(t.timer)})))},D1=(e,t)=>{if(!t.toast){if(!ar(t.allowEnterKey)){td("allowEnterKey"),I1();return}T1(e)||A1(e,t)||ai(-1,1)}},T1=e=>{const t=Array.from(e.popup.querySelectorAll("[autofocus]"));for(const n of t)if(n instanceof HTMLElement&&Jt(n))return n.focus(),!0;return!1},A1=(e,t)=>t.focusDeny&&Jt(e.denyButton)?(e.denyButton.focus(),!0):t.focusCancel&&Jt(e.cancelButton)?(e.cancelButton.focus(),!0):t.focusConfirm&&Jt(e.confirmButton)?(e.confirmButton.focus(),!0):!1,I1=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};Ct.prototype.disableButtons=Ad;Ct.prototype.enableButtons=Td;Ct.prototype.getInput=$d;Ct.prototype.disableInput=Rd;Ct.prototype.enableInput=Id;Ct.prototype.hideLoading=Ma;Ct.prototype.disableLoading=Ma;Ct.prototype.showValidationMessage=Pd;Ct.prototype.resetValidationMessage=Hd;Ct.prototype.close=eo;Ct.prototype.closePopup=eo;Ct.prototype.closeModal=eo;Ct.prototype.closeToast=eo;Ct.prototype.rejectPromise=xd;Ct.prototype.update=Nd;Ct.prototype._destroy=Vd;Object.assign(Ct,r1);Object.keys(Nb).forEach(e=>{Ct[e]=function(...t){return yn&&yn[e]?yn[e](...t):null}});Ct.DismissReason=ns;Ct.version="11.22.4";const xe=Ct;xe.default=xe;typeof document<"u"&&function(e,t){var n=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=t);else try{n.innerHTML=t}catch{n.innerText=t}}(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.1s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px $swal2-outline-color;--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-timer-progress-bar-background: rgba(0, 0, 0, 0.3);--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:var(--swal2-timer-progress-bar-background)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');const R1={class:"character-state-manager"},P1={class:"form-group"},H1={class:"form-group"},O1=["disabled"],B1={class:"state-list"},M1={key:0,class:"empty-list"},L1={key:1,class:"states-grid"},N1=["onClick"],V1=["src","alt"],j1={key:1,class:"state-image state-image-placeholder"},F1={class:"state-title"},U1=["onClick"],z1={__name:"CharacterStateManager",setup(e){const t=Fs(),{states:n,selectedStateId:o,isLoading:a}=_o(t),r=pe(""),i=pe(null),l=pe({}),c=async()=>{console.log("Cargando imgenes para estados:",n.value);for(const C of n.value){if(console.log(`Procesando estado ${C.id}:`,C),l.value[C.id]){console.log(`URL ya existe para ${C.id}`);continue}if(C.image){console.log(`Buscando imagen en localforage para ${C.id} (image: ${C.image})`);try{const w=await t.getStateImage(C.image);console.log(`Blob recibido para ${C.id}:`,w),w?(l.value[C.id]=URL.createObjectURL(w),console.log(`URL creada para ${C.id}:`,l.value[C.id])):console.log(`No se encontr blob para ${C.id}`)}catch(w){console.error(`Error cargando imagen para ${C.id}:`,w)}}else console.log(`Estado ${C.id} no tiene propiedad image`)}};qt(async()=>{await t.loadData(),await c()}),cn(()=>n.value.length,async()=>{await c()});const u=C=>{const w=C.target.files[0];w&&(i.value=w)},p=async()=>{if(!r.value.trim()||!i.value){xe.fire("Error","Por favor, completa todos los campos.","error");return}await t.addState(r.value,i.value),await c(),r.value="",i.value=null,document.getElementById("stateImage").value="",xe.fire("xito!","Nuevo estado aadido correctamente.","success")},d=async C=>{await t.setSelectedState(C)},m=async C=>{(await xe.fire({title:"Ests seguro?",text:"Esta accin no se puede deshacer.",icon:"warning",showCancelButton:!0,confirmButtonText:"S, eliminar",cancelButtonText:"Cancelar"})).isConfirmed&&(await t.deleteState(C),l.value[C]&&(URL.revokeObjectURL(l.value[C]),delete l.value[C]),xe.fire("Eliminado","El estado ha sido eliminado.","success"))},v=C=>l.value[C]||"";return(C,w)=>($(),D("div",R1,[w[5]||(w[5]=s("h2",{class:"section-title"},"Estados del Personaje",-1)),s("form",{onSubmit:Ge(p,["prevent"]),class:"state-form"},[s("div",P1,[w[1]||(w[1]=s("label",{for:"stateTitle",class:"form-label"},"Ttulo del Estado",-1)),oe(s("input",{id:"stateTitle","onUpdate:modelValue":w[0]||(w[0]=g=>r.value=g),type:"text",class:"form-control",placeholder:"Ej: Herido, Furioso...",required:""},null,512),[[ge,r.value]])]),s("div",H1,[w[2]||(w[2]=s("label",{for:"stateImage",class:"form-label"},"Imagen del Estado",-1)),s("input",{id:"stateImage",onChange:u,type:"file",class:"form-control",accept:"image/*",required:""},null,32)]),s("button",{type:"submit",class:"btn btn-primary",disabled:ue(a)},W(ue(a)?"Guardando...":"Aadir Estado"),9,O1)],32),s("div",B1,[w[4]||(w[4]=s("h3",{class:"list-title"},"Estados Guardados",-1)),ue(n).length===0?($(),D("div",M1," No hay estados guardados. ")):($(),D("div",L1,[($(!0),D(Le,null,qe(ue(n),g=>($(),D("div",{key:g.id,class:rt(["state-card",{selected:g.id===ue(o)}]),onClick:S=>d(g.id)},[v(g.id)?($(),D("img",{key:0,src:v(g.id),alt:g.title,class:"state-image"},null,8,V1)):($(),D("div",j1,w[3]||(w[3]=[s("p",null,"Sin imagen",-1)]))),s("p",F1,W(g.title),1),s("button",{onClick:Ge(S=>m(g.id),["stop"]),class:"btn-delete"}," Eliminar ",8,U1)],10,N1))),128))]))])]))}},q1=Tt(z1,[["__scopeId","data-v-035ef3ae"]]),W1={class:"character-config-container fade-in"},K1={class:"config-card"},Y1={class:"form-group"},X1={class:"form-group"},G1={class:"form-group"},J1={key:0,class:"existing-data"},Q1={__name:"CharacterConfigView",setup(e){const t=js(),n=Eo(),o=pe(""),a=pe(50),r=pe(0),i=pe(!1);qt(()=>{n.loadData(),n.character.isConfigured&&(i.value=!0,o.value=n.character.name,a.value=n.character.maxHp,r.value=n.character.regeneration)});const l=()=>{if(!o.value.trim()||a.value<=0){xe.fire({icon:"error",title:"Error",text:"Por favor completa todos los campos correctamente"});return}try{n.configureCharacter(o.value.trim(),a.value,r.value),xe.fire({icon:"success",title:"Configuracin Guardada!",text:`${o.value} est listo para la aventura`,showConfirmButton:!0}).then(()=>{t.push("/character")})}catch{xe.fire({icon:"error",title:"Error",text:"No se pudo guardar la configuracin"})}},c=()=>{t.push("/character")},u=()=>{xe.fire({title:"Ests seguro?",text:"Esto eliminar todos los datos del personaje actual",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"S, eliminar",cancelButtonText:"Cancelar"}).then(p=>{p.isConfirmed&&(n.clearData(),i.value=!1,o.value="",a.value=50,r.value=0,xe.fire({icon:"success",title:"Datos Eliminados",text:"Puedes crear un nuevo personaje"}))})};return(p,d)=>($(),D("div",W1,[s("div",K1,[d[10]||(d[10]=s("h1",{class:"config-title"},"Configuracin del Personaje",-1)),s("form",{onSubmit:Ge(l,["prevent"]),class:"config-form"},[s("div",Y1,[d[3]||(d[3]=s("label",{for:"characterName",class:"form-label"},"Nombre del Personaje",-1)),oe(s("input",{id:"characterName","onUpdate:modelValue":d[0]||(d[0]=m=>o.value=m),type:"text",class:"form-control",placeholder:"Ej: Gandalf, Aragorn...",required:""},null,512),[[ge,o.value]])]),s("div",X1,[d[4]||(d[4]=s("label",{for:"maxHp",class:"form-label"},"Puntos de Vida Mximos",-1)),oe(s("input",{id:"maxHp","onUpdate:modelValue":d[1]||(d[1]=m=>a.value=m),type:"number",class:"form-control",min:"1",max:"999",placeholder:"Ej: 50",required:""},null,512),[[ge,a.value,void 0,{number:!0}]])]),s("div",G1,[d[5]||(d[5]=s("label",{for:"regeneration",class:"form-label"},"Regeneracin Pasiva por Turno",-1)),oe(s("input",{id:"regeneration","onUpdate:modelValue":d[2]||(d[2]=m=>r.value=m),type:"number",class:"form-control",min:"0",max:"50",placeholder:"Ej: 5 (opcional)"},null,512),[[ge,r.value,void 0,{number:!0}]]),d[6]||(d[6]=s("small",{class:"form-text"},"Deja en 0 si no hay regeneracin",-1))]),d[7]||(d[7]=s("button",{type:"submit",class:"btn btn-primary btn-save"}," Guardar Configuracin ",-1))],32),ft(q1),i.value?($(),D("div",J1,[d[8]||(d[8]=s("h3",null,"Datos Existentes",-1)),d[9]||(d[9]=s("p",null,"Ya tienes un personaje configurado. Quieres cargarlo o crear uno nuevo?",-1)),s("div",{class:"btn-group"},[s("button",{onClick:c,class:"btn btn-secondary"}," Cargar Existente "),s("button",{onClick:u,class:"btn btn-danger"}," Crear Nuevo ")])])):we("",!0)])]))}},Z1=Tt(Q1,[["__scopeId","data-v-676b7144"]]),ew={class:"counter-grid"},tw={class:"counter-card-header"},nw={class:"counter-name"},ow=["onClick"],sw=["onClick"],aw={class:"counter-btns"},rw=["onClick"],iw=["onClick"],lw={class:"counter-values"},cw={class:"counter-minmax"},uw={class:"counter-card counter-add-card"},dw={class:"counter-modal"},fw={class:"counter-modal-title"},pw={class:"counter-modal-label"},mw={class:"counter-modal-label"},hw={class:"counter-modal-label"},gw={class:"counter-modal-label"},vw={class:"counter-modal-label"},bw={style:{display:"flex","align-items":"center","margin-top":"4px","font-size":"0.95em"}},ww={class:"counter-modal-label"},yw={style:{display:"flex","align-items":"center","margin-top":"4px","font-size":"0.95em"}},Cw={type:"submit",class:"counter-modal-btn"},xw={__name:"CounterManager",setup(e){const t=Us(),n=Gc(t,"counters"),{addCounter:o,updateCounterValue:a,setCounterToMax:r,removeCounter:i}=t,l=pe({name:"",initial:0,min:0,max:10,shortRest:0,shortRestReset:!1,longRest:0,longRestReset:!1}),c=pe(!1);function u(){o({name:l.value.name,initial:l.value.initial,min:l.value.min,max:l.value.max,shortRest:l.value.shortRest,shortRestReset:l.value.shortRestReset,longRest:l.value.longRest,longRestReset:l.value.longRestReset}),l.value={name:"",initial:0,min:0,max:10,shortRest:0,shortRestReset:!1,longRest:0,longRestReset:!1},c.value=!1}const p=pe(!1);let d=null;function m(w){p.value=!0,d=w.id,l.value={name:w.name,initial:w.value,min:w.min,max:w.max,shortRest:w.shortRest,shortRestReset:w.shortRestReset||!1,longRest:w.longRest,longRestReset:w.longRestReset||!1},c.value=!0}function v(){const w=n.value.findIndex(g=>g.id===d);w!==-1&&(n.value[w].name=l.value.name,n.value[w].min=l.value.min,n.value[w].max=l.value.max,n.value[w].shortRest=l.value.shortRest,n.value[w].shortRestReset=l.value.shortRestReset,n.value[w].longRest=l.value.longRest,n.value[w].longRestReset=l.value.longRestReset,n.value[w].value=l.value.initial),C()}function C(){c.value=!1,p.value=!1,d=null,l.value={name:"",initial:0,min:0,max:10,shortRest:0,shortRestReset:!1,longRest:0,longRestReset:!1}}return(w,g)=>($(),D("div",null,[g[23]||(g[23]=s("h2",{class:"text-lg font-bold mb-2 title-conter"},"Contadores",-1)),s("div",ew,[($(!0),D(Le,null,qe(n.value,S=>($(),D("div",{key:S.id,class:"counter-card"},[s("div",tw,[s("span",nw,W(S.name),1),s("div",null,[s("button",{onClick:L=>m(S),class:"counter-edit",title:"Editar contador"},g[10]||(g[10]=[s("span",{"aria-label":"Editar"},"",-1)]),8,ow),s("button",{onClick:L=>ue(i)(S.id),class:"counter-remove",title:"Eliminar contador"},g[11]||(g[11]=[s("span",{"aria-label":"Eliminar"},"",-1)]),8,sw)])]),s("div",aw,[($(!0),D(Le,null,qe(S.buttons,L=>($(),D("button",{key:L.label,onClick:B=>ue(a)(S.id,L.increment),class:"counter-action-btn"},W(L.label),9,rw))),128)),s("button",{onClick:L=>ue(r)(S.id),class:"counter-action-btn counter-max-btn"},"Mx",8,iw)]),s("div",lw,[s("span",null,[g[12]||(g[12]=le("Valor: ")),s("b",null,W(S.value),1),g[13]||(g[13]=le()),s("span",cw,"(min: "+W(S.min)+", mx: "+W(S.max)+")",1)])])]))),128)),s("div",uw,[s("button",{onClick:g[0]||(g[0]=S=>c.value=!0),class:"counter-add-btn",title:"Agregar contador"},g[14]||(g[14]=[s("span",{class:"counter-fab-plus"},"",-1),s("span",{style:{display:"block","font-size":"1rem","margin-top":"0.3rem"}},"Nuevo",-1)]))])]),c.value?($(),D("div",{key:0,class:"counter-modal-overlay",onClick:Ge(C,["self"])},[s("div",dw,[s("button",{onClick:C,class:"counter-modal-close"},""),s("form",{onSubmit:g[9]||(g[9]=Ge(S=>p.value?v():u(),["prevent"]))},[s("h3",fw,W(p.value?"Editar contador":"Nuevo contador"),1),s("label",pw,[g[15]||(g[15]=le(" Nombre ")),oe(s("input",{"onUpdate:modelValue":g[1]||(g[1]=S=>l.value.name=S),placeholder:"Ej: Furias",class:"counter-modal-input",required:""},null,512),[[ge,l.value.name]])]),s("label",mw,[g[16]||(g[16]=le(" Valor inicial ")),oe(s("input",{"onUpdate:modelValue":g[2]||(g[2]=S=>l.value.initial=S),type:"number",placeholder:"Ej: 3",class:"counter-modal-input",required:""},null,512),[[ge,l.value.initial,void 0,{number:!0}]])]),s("label",hw,[g[17]||(g[17]=le(" Valor mnimo ")),oe(s("input",{"onUpdate:modelValue":g[3]||(g[3]=S=>l.value.min=S),type:"number",placeholder:"Ej: 0",class:"counter-modal-input",required:""},null,512),[[ge,l.value.min,void 0,{number:!0}]])]),s("label",gw,[g[18]||(g[18]=le(" Valor mximo ")),oe(s("input",{"onUpdate:modelValue":g[4]||(g[4]=S=>l.value.max=S),type:"number",placeholder:"Ej: 5",class:"counter-modal-input",required:""},null,512),[[ge,l.value.max,void 0,{number:!0}]])]),s("label",vw,[g[20]||(g[20]=le(" Recarga por descanso corto ")),oe(s("input",{"onUpdate:modelValue":g[5]||(g[5]=S=>l.value.shortRest=S),type:"number",placeholder:"Ej: 0",class:"counter-modal-input"},null,512),[[ge,l.value.shortRest,void 0,{number:!0}]]),s("label",bw,[oe(s("input",{type:"checkbox","onUpdate:modelValue":g[6]||(g[6]=S=>l.value.shortRestReset=S),style:{"margin-right":"6px"}},null,512),[[ws,l.value.shortRestReset]]),g[19]||(g[19]=le(" Reset al valor introducido "))])]),s("label",ww,[g[22]||(g[22]=le(" Recarga por descanso largo ")),oe(s("input",{"onUpdate:modelValue":g[7]||(g[7]=S=>l.value.longRest=S),type:"number",placeholder:"Ej: 0",class:"counter-modal-input"},null,512),[[ge,l.value.longRest,void 0,{number:!0}]]),s("label",yw,[oe(s("input",{type:"checkbox","onUpdate:modelValue":g[8]||(g[8]=S=>l.value.longRestReset=S),style:{"margin-right":"6px"}},null,512),[[ws,l.value.longRestReset]]),g[21]||(g[21]=le(" Reset al valor introducido "))])]),s("button",Cw,W(p.value?"Guardar cambios":"Agregar"),1)],32)])])):we("",!0)]))}},_w=Tt(xw,[["__scopeId","data-v-ccd9c79f"]]),kw={class:"state-grid"},Sw={class:"state-card-header"},$w={class:"state-name"},Ew=["onClick"],Dw=["onClick"],Tw={key:0,class:"state-link"},Aw=["onClick","disabled","title"],Iw={class:"state-card state-add-card"},Rw={class:"dnd-modal"},Pw={class:"dnd-modal-title"},Hw={class:"dnd-modal-label"},Ow={class:"dnd-modal-label"},Bw=["value"],Mw={class:"dnd-modal-label"},Lw={class:"dnd-modal-label"},Nw={type:"submit",class:"dnd-modal-btn"},Vw={__name:"StateManager",setup(e){const t=Us(),n=Fs(),{states:o}=_o(n),{counters:a}=_o(t),{addState:r,removeState:i,toggleStateActive:l}=n,c=pe(!1);qt(async()=>{await t.loadData(),await n.loadData()});const u=pe({name:"",linkedCounterId:"",discountOnActivate:0,discountType:"resta"});function p(B){n.toggleStateActive(B.id)}function d(){r({name:u.value.name,linkedCounterId:u.value.linkedCounterId||null,discountOnActivate:u.value.discountOnActivate,discountType:u.value.discountType}),u.value={name:"",linkedCounterId:"",discountOnActivate:0,discountType:"resta"},c.value=!1}function m(B){if(!B.linkedCounterId)return!0;const V=a.value.find(te=>te.id===B.linkedCounterId);if(!V)return!1;const T=Math.abs(B.discountOnActivate||1);return!(B.discountType==="resta"&&V.value-T<V.min)}function v(B){const V=a.value.find(T=>T.id===B);return V?V.name:"Desconocido"}const C=pe(!1);let w=null;function g(B){C.value=!0,w=B.id,u.value={name:B.name,linkedCounterId:B.linkedCounterId||"",discountOnActivate:B.discountOnActivate,discountType:B.discountType||"resta"},c.value=!0}function S(){const B=o.value.findIndex(V=>V.id===w);B!==-1&&(o.value[B].name=u.value.name,o.value[B].linkedCounterId=u.value.linkedCounterId||null,o.value[B].discountOnActivate=u.value.discountOnActivate,o.value[B].discountType=u.value.discountType),L()}function L(){c.value=!1,C.value=!1,w=null,u.value={name:"",linkedCounterId:"",discountOnActivate:0,discountType:"resta"}}return(B,V)=>($(),D("div",null,[V[16]||(V[16]=s("h2",{class:"title-state"},"Estados",-1)),s("div",kw,[($(!0),D(Le,null,qe(ue(o),T=>($(),D("div",{key:T.id,class:rt(["state-card","dnd-theme-card",T.active?"active-state":""])},[s("div",Sw,[s("span",$w,W(T.name),1),s("div",null,[s("button",{onClick:te=>g(T),class:"state-edit",title:"Editar estado"},V[6]||(V[6]=[s("span",{"aria-label":"Editar"},"",-1)]),8,Ew),s("button",{onClick:te=>ue(i)(T.id),class:"state-remove",title:"Eliminar estado"},V[7]||(V[7]=[s("span",{"aria-label":"Eliminar"},"",-1)]),8,Dw)])]),T.linkedCounterId?($(),D("div",Tw,[s("span",null,[V[8]||(V[8]=le("Vinculado a: ")),s("b",null,W(v(T.linkedCounterId)),1),le(" (desc. "+W(T.discountOnActivate)+")",1)])])):we("",!0),s("button",{onClick:te=>p(T),class:rt(["state-activate","dnd-theme-btn",T.active?"active-btn":""]),disabled:!T.active&&T.linkedCounterId&&!m(T),title:!T.active&&T.linkedCounterId&&!m(T)?"No quedan usos en el contador vinculado":""},W(T.active?"Desactivar":"Activar"),11,Aw)],2))),128)),s("div",Iw,[s("button",{onClick:V[0]||(V[0]=T=>c.value=!0),class:"state-add-btn",title:"Agregar estado"},V[9]||(V[9]=[s("span",{class:"state-fab-plus"},"",-1),s("span",{style:{display:"block","font-size":"1rem","margin-top":"0.3rem"}},"Nuevo",-1)]))])]),c.value?($(),D("div",{key:0,class:"dnd-modal-overlay",onClick:Ge(L,["self"])},[s("div",Rw,[s("button",{onClick:L,class:"dnd-modal-close"},""),s("form",{onSubmit:V[5]||(V[5]=Ge(T=>C.value?S():d(),["prevent"]))},[s("h3",Pw,W(C.value?"Editar Estado":"Nuevo Estado"),1),s("label",Hw,[V[10]||(V[10]=le(" Nombre del estado ")),oe(s("input",{"onUpdate:modelValue":V[1]||(V[1]=T=>u.value.name=T),placeholder:"Ej: Furia",class:"dnd-modal-input",required:""},null,512),[[ge,u.value.name]])]),s("label",Ow,[V[12]||(V[12]=le(" Vincular a contador ")),oe(s("select",{"onUpdate:modelValue":V[2]||(V[2]=T=>u.value.linkedCounterId=T),class:"dnd-modal-input"},[V[11]||(V[11]=s("option",{value:""},"Sin vincular",-1)),($(!0),D(Le,null,qe(ue(a),T=>($(),D("option",{key:T.id,value:T.id},W(T.name),9,Bw))),128))],512),[[Ht,u.value.linkedCounterId]])]),s("label",Mw,[V[13]||(V[13]=le(" Descuento al activar ")),oe(s("input",{"onUpdate:modelValue":V[3]||(V[3]=T=>u.value.discountOnActivate=T),type:"number",placeholder:"Ej: 1",class:"dnd-modal-input"},null,512),[[ge,u.value.discountOnActivate,void 0,{number:!0}]])]),s("label",Lw,[V[15]||(V[15]=le(" Tipo de descuento ")),oe(s("select",{"onUpdate:modelValue":V[4]||(V[4]=T=>u.value.discountType=T),class:"dnd-modal-input"},V[14]||(V[14]=[s("option",{value:"resta"},"Resta",-1),s("option",{value:"suma"},"Suma",-1)]),512),[[Ht,u.value.discountType]])]),s("button",Nw,W(C.value?"Guardar cambios":"Crear Estado"),1)],32)])])):we("",!0)]))}},jw=Tt(Vw,[["__scopeId","data-v-18f0ea32"]]);/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function dc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,o)}return n}function Tn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dc(Object(n),!0).forEach(function(o){Fw(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dc(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function ga(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ga=function(t){return typeof t}:ga=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ga(e)}function Fw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vn(){return Vn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Vn.apply(this,arguments)}function Uw(e,t){if(e==null)return{};var n={},o=Object.keys(e),a,r;for(r=0;r<o.length;r++)a=o[r],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function zw(e,t){if(e==null)return{};var n=Uw(e,t),o,a;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)o=r[a],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var qw="1.15.6";function Nn(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var Fn=Nn(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Gs=Nn(/Edge/i),fc=Nn(/firefox/i),_s=Nn(/safari/i)&&!Nn(/chrome/i)&&!Nn(/android/i),Wi=Nn(/iP(ad|od|hone)/i),Wd=Nn(/chrome/i)&&Nn(/android/i),Kd={capture:!1,passive:!1};function Ke(e,t,n){e.addEventListener(t,n,!Fn&&Kd)}function ze(e,t,n){e.removeEventListener(t,n,!Fn&&Kd)}function Va(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function Yd(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function mn(e,t,n,o){if(e){n=n||document;do{if(t!=null&&(t[0]===">"?e.parentNode===n&&Va(e,t):Va(e,t))||o&&e===n)return e;if(e===n)break}while(e=Yd(e))}return null}var pc=/\s+/g;function Qt(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var o=(" "+e.className+" ").replace(pc," ").replace(" "+t+" "," ");e.className=(o+(n?" "+t:"")).replace(pc," ")}}function Me(e,t,n){var o=e&&e.style;if(o){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in o)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),o[t]=n+(typeof n=="string"?"":"px")}}function zo(e,t){var n="";if(typeof e=="string")n=e;else do{var o=Me(e,"transform");o&&o!=="none"&&(n=o+" "+n)}while(!t&&(e=e.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(n)}function Xd(e,t,n){if(e){var o=e.getElementsByTagName(t),a=0,r=o.length;if(n)for(;a<r;a++)n(o[a],a);return o}return[]}function Sn(){var e=document.scrollingElement;return e||document.documentElement}function kt(e,t,n,o,a){if(!(!e.getBoundingClientRect&&e!==window)){var r,i,l,c,u,p,d;if(e!==window&&e.parentNode&&e!==Sn()?(r=e.getBoundingClientRect(),i=r.top,l=r.left,c=r.bottom,u=r.right,p=r.height,d=r.width):(i=0,l=0,c=window.innerHeight,u=window.innerWidth,p=window.innerHeight,d=window.innerWidth),(t||n)&&e!==window&&(a=a||e.parentNode,!Fn))do if(a&&a.getBoundingClientRect&&(Me(a,"transform")!=="none"||n&&Me(a,"position")!=="static")){var m=a.getBoundingClientRect();i-=m.top+parseInt(Me(a,"border-top-width")),l-=m.left+parseInt(Me(a,"border-left-width")),c=i+r.height,u=l+r.width;break}while(a=a.parentNode);if(o&&e!==window){var v=zo(a||e),C=v&&v.a,w=v&&v.d;v&&(i/=w,l/=C,d/=C,p/=w,c=i+p,u=l+d)}return{top:i,left:l,bottom:c,right:u,width:d,height:p}}}function mc(e,t,n){for(var o=to(e,!0),a=kt(e)[t];o;){var r=kt(o)[n],i=void 0;if(i=a>=r,!i)return o;if(o===Sn())break;o=to(o,!1)}return!1}function Jo(e,t,n,o){for(var a=0,r=0,i=e.children;r<i.length;){if(i[r].style.display!=="none"&&i[r]!==Be.ghost&&(o||i[r]!==Be.dragged)&&mn(i[r],n.draggable,e,!1)){if(a===t)return i[r];a++}r++}return null}function Ki(e,t){for(var n=e.lastElementChild;n&&(n===Be.ghost||Me(n,"display")==="none"||t&&!Va(n,t));)n=n.previousElementSibling;return n||null}function rn(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==Be.clone&&(!t||Va(e,t))&&n++;return n}function hc(e){var t=0,n=0,o=Sn();if(e)do{var a=zo(e),r=a.a,i=a.d;t+=e.scrollLeft*r,n+=e.scrollTop*i}while(e!==o&&(e=e.parentNode));return[t,n]}function Ww(e,t){for(var n in e)if(e.hasOwnProperty(n)){for(var o in t)if(t.hasOwnProperty(o)&&t[o]===e[n][o])return Number(n)}return-1}function to(e,t){if(!e||!e.getBoundingClientRect)return Sn();var n=e,o=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var a=Me(n);if(n.clientWidth<n.scrollWidth&&(a.overflowX=="auto"||a.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(a.overflowY=="auto"||a.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Sn();if(o||t)return n;o=!0}}while(n=n.parentNode);return Sn()}function Kw(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function Hr(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var ks;function Gd(e,t){return function(){if(!ks){var n=arguments,o=this;n.length===1?e.call(o,n[0]):e.apply(o,n),ks=setTimeout(function(){ks=void 0},t)}}}function Yw(){clearTimeout(ks),ks=void 0}function Jd(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function Qd(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function Zd(e,t,n){var o={};return Array.from(e.children).forEach(function(a){var r,i,l,c;if(!(!mn(a,t.draggable,e,!1)||a.animated||a===n)){var u=kt(a);o.left=Math.min((r=o.left)!==null&&r!==void 0?r:1/0,u.left),o.top=Math.min((i=o.top)!==null&&i!==void 0?i:1/0,u.top),o.right=Math.max((l=o.right)!==null&&l!==void 0?l:-1/0,u.right),o.bottom=Math.max((c=o.bottom)!==null&&c!==void 0?c:-1/0,u.bottom)}}),o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}var Xt="Sortable"+new Date().getTime();function Xw(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var o=[].slice.call(this.el.children);o.forEach(function(a){if(!(Me(a,"display")==="none"||a===Be.ghost)){e.push({target:a,rect:kt(a)});var r=Tn({},e[e.length-1].rect);if(a.thisAnimationDuration){var i=zo(a,!0);i&&(r.top-=i.f,r.left-=i.e)}a.fromRect=r}})}},addAnimationState:function(o){e.push(o)},removeAnimationState:function(o){e.splice(Ww(e,{target:o}),1)},animateAll:function(o){var a=this;if(!this.options.animation){clearTimeout(t),typeof o=="function"&&o();return}var r=!1,i=0;e.forEach(function(l){var c=0,u=l.target,p=u.fromRect,d=kt(u),m=u.prevFromRect,v=u.prevToRect,C=l.rect,w=zo(u,!0);w&&(d.top-=w.f,d.left-=w.e),u.toRect=d,u.thisAnimationDuration&&Hr(m,d)&&!Hr(p,d)&&(C.top-d.top)/(C.left-d.left)===(p.top-d.top)/(p.left-d.left)&&(c=Jw(C,m,v,a.options)),Hr(d,p)||(u.prevFromRect=p,u.prevToRect=d,c||(c=a.options.animation),a.animate(u,C,d,c)),c&&(r=!0,i=Math.max(i,c),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},c),u.thisAnimationDuration=c)}),clearTimeout(t),r?t=setTimeout(function(){typeof o=="function"&&o()},i):typeof o=="function"&&o(),e=[]},animate:function(o,a,r,i){if(i){Me(o,"transition",""),Me(o,"transform","");var l=zo(this.el),c=l&&l.a,u=l&&l.d,p=(a.left-r.left)/(c||1),d=(a.top-r.top)/(u||1);o.animatingX=!!p,o.animatingY=!!d,Me(o,"transform","translate3d("+p+"px,"+d+"px,0)"),this.forRepaintDummy=Gw(o),Me(o,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),Me(o,"transform","translate3d(0,0,0)"),typeof o.animated=="number"&&clearTimeout(o.animated),o.animated=setTimeout(function(){Me(o,"transition",""),Me(o,"transform",""),o.animated=!1,o.animatingX=!1,o.animatingY=!1},i)}}}}function Gw(e){return e.offsetWidth}function Jw(e,t,n,o){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*o.animation}var Po=[],Or={initializeByDefault:!0},Js={mount:function(t){for(var n in Or)Or.hasOwnProperty(n)&&!(n in t)&&(t[n]=Or[n]);Po.forEach(function(o){if(o.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),Po.push(t)},pluginEvent:function(t,n,o){var a=this;this.eventCanceled=!1,o.cancel=function(){a.eventCanceled=!0};var r=t+"Global";Po.forEach(function(i){n[i.pluginName]&&(n[i.pluginName][r]&&n[i.pluginName][r](Tn({sortable:n},o)),n.options[i.pluginName]&&n[i.pluginName][t]&&n[i.pluginName][t](Tn({sortable:n},o)))})},initializePlugins:function(t,n,o,a){Po.forEach(function(l){var c=l.pluginName;if(!(!t.options[c]&&!l.initializeByDefault)){var u=new l(t,n,t.options);u.sortable=t,u.options=t.options,t[c]=u,Vn(o,u.defaults)}});for(var r in t.options)if(t.options.hasOwnProperty(r)){var i=this.modifyOption(t,r,t.options[r]);typeof i<"u"&&(t.options[r]=i)}},getEventProperties:function(t,n){var o={};return Po.forEach(function(a){typeof a.eventProperties=="function"&&Vn(o,a.eventProperties.call(n[a.pluginName],t))}),o},modifyOption:function(t,n,o){var a;return Po.forEach(function(r){t[r.pluginName]&&r.optionListeners&&typeof r.optionListeners[n]=="function"&&(a=r.optionListeners[n].call(t[r.pluginName],o))}),a}};function Qw(e){var t=e.sortable,n=e.rootEl,o=e.name,a=e.targetEl,r=e.cloneEl,i=e.toEl,l=e.fromEl,c=e.oldIndex,u=e.newIndex,p=e.oldDraggableIndex,d=e.newDraggableIndex,m=e.originalEvent,v=e.putSortable,C=e.extraEventProperties;if(t=t||n&&n[Xt],!!t){var w,g=t.options,S="on"+o.charAt(0).toUpperCase()+o.substr(1);window.CustomEvent&&!Fn&&!Gs?w=new CustomEvent(o,{bubbles:!0,cancelable:!0}):(w=document.createEvent("Event"),w.initEvent(o,!0,!0)),w.to=i||n,w.from=l||n,w.item=a||n,w.clone=r,w.oldIndex=c,w.newIndex=u,w.oldDraggableIndex=p,w.newDraggableIndex=d,w.originalEvent=m,w.pullMode=v?v.lastPutMode:void 0;var L=Tn(Tn({},C),Js.getEventProperties(o,t));for(var B in L)w[B]=L[B];n&&n.dispatchEvent(w),g[S]&&g[S].call(t,w)}}var Zw=["evt"],Yt=function(t,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=o.evt,r=zw(o,Zw);Js.pluginEvent.bind(Be)(t,n,Tn({dragEl:be,parentEl:vt,ghostEl:Ne,rootEl:pt,nextEl:vo,lastDownEl:va,cloneEl:mt,cloneHidden:Qn,dragStarted:us,putSortable:Rt,activeSortable:Be.active,originalEvent:a,oldIndex:Lo,oldDraggableIndex:Ss,newIndex:en,newDraggableIndex:Gn,hideGhostForTarget:of,unhideGhostForTarget:sf,cloneNowHidden:function(){Qn=!0},cloneNowShown:function(){Qn=!1},dispatchSortableEvent:function(l){Ft({sortable:n,name:l,originalEvent:a})}},r))};function Ft(e){Qw(Tn({putSortable:Rt,cloneEl:mt,targetEl:be,rootEl:pt,oldIndex:Lo,oldDraggableIndex:Ss,newIndex:en,newDraggableIndex:Gn},e))}var be,vt,Ne,pt,vo,va,mt,Qn,Lo,en,Ss,Gn,aa,Rt,Mo=!1,ja=!1,Fa=[],mo,pn,Br,Mr,gc,vc,us,Ho,$s,Es=!1,ra=!1,ba,Ot,Lr=[],ii=!1,Ua=[],ur=typeof document<"u",ia=Wi,bc=Gs||Fn?"cssFloat":"float",ey=ur&&!Wd&&!Wi&&"draggable"in document.createElement("div"),ef=function(){if(ur){if(Fn)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),tf=function(t,n){var o=Me(t),a=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),r=Jo(t,0,n),i=Jo(t,1,n),l=r&&Me(r),c=i&&Me(i),u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+kt(r).width,p=c&&parseInt(c.marginLeft)+parseInt(c.marginRight)+kt(i).width;if(o.display==="flex")return o.flexDirection==="column"||o.flexDirection==="column-reverse"?"vertical":"horizontal";if(o.display==="grid")return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&l.float&&l.float!=="none"){var d=l.float==="left"?"left":"right";return i&&(c.clear==="both"||c.clear===d)?"vertical":"horizontal"}return r&&(l.display==="block"||l.display==="flex"||l.display==="table"||l.display==="grid"||u>=a&&o[bc]==="none"||i&&o[bc]==="none"&&u+p>a)?"vertical":"horizontal"},ty=function(t,n,o){var a=o?t.left:t.top,r=o?t.right:t.bottom,i=o?t.width:t.height,l=o?n.left:n.top,c=o?n.right:n.bottom,u=o?n.width:n.height;return a===l||r===c||a+i/2===l+u/2},ny=function(t,n){var o;return Fa.some(function(a){var r=a[Xt].options.emptyInsertThreshold;if(!(!r||Ki(a))){var i=kt(a),l=t>=i.left-r&&t<=i.right+r,c=n>=i.top-r&&n<=i.bottom+r;if(l&&c)return o=a}}),o},nf=function(t){function n(r,i){return function(l,c,u,p){var d=l.options.group.name&&c.options.group.name&&l.options.group.name===c.options.group.name;if(r==null&&(i||d))return!0;if(r==null||r===!1)return!1;if(i&&r==="clone")return r;if(typeof r=="function")return n(r(l,c,u,p),i)(l,c,u,p);var m=(i?l:c).options.group.name;return r===!0||typeof r=="string"&&r===m||r.join&&r.indexOf(m)>-1}}var o={},a=t.group;(!a||ga(a)!="object")&&(a={name:a}),o.name=a.name,o.checkPull=n(a.pull,!0),o.checkPut=n(a.put),o.revertClone=a.revertClone,t.group=o},of=function(){!ef&&Ne&&Me(Ne,"display","none")},sf=function(){!ef&&Ne&&Me(Ne,"display","")};ur&&!Wd&&document.addEventListener("click",function(e){if(ja)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),ja=!1,!1},!0);var ho=function(t){if(be){t=t.touches?t.touches[0]:t;var n=ny(t.clientX,t.clientY);if(n){var o={};for(var a in t)t.hasOwnProperty(a)&&(o[a]=t[a]);o.target=o.rootEl=n,o.preventDefault=void 0,o.stopPropagation=void 0,n[Xt]._onDragOver(o)}}},oy=function(t){be&&be.parentNode[Xt]._isOutsideThisEl(t.target)};function Be(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=Vn({},t),e[Xt]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return tf(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(i,l){i.setData("Text",l.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Be.supportPointer!==!1&&"PointerEvent"in window&&(!_s||Wi),emptyInsertThreshold:5};Js.initializePlugins(this,e,n);for(var o in n)!(o in t)&&(t[o]=n[o]);nf(t);for(var a in this)a.charAt(0)==="_"&&typeof this[a]=="function"&&(this[a]=this[a].bind(this));this.nativeDraggable=t.forceFallback?!1:ey,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?Ke(e,"pointerdown",this._onTapStart):(Ke(e,"mousedown",this._onTapStart),Ke(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(Ke(e,"dragover",this),Ke(e,"dragenter",this)),Fa.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Vn(this,Xw())}Be.prototype={constructor:Be,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(Ho=null)},_getDirection:function(t,n){return typeof this.options.direction=="function"?this.options.direction.call(this,t,n,be):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n=this,o=this.el,a=this.options,r=a.preventOnFilter,i=t.type,l=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,c=(l||t).target,u=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||c,p=a.filter;if(dy(o),!be&&!(/mousedown|pointerdown/.test(i)&&t.button!==0||a.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&_s&&c&&c.tagName.toUpperCase()==="SELECT")&&(c=mn(c,a.draggable,o,!1),!(c&&c.animated)&&va!==c)){if(Lo=rn(c),Ss=rn(c,a.draggable),typeof p=="function"){if(p.call(this,t,c,this)){Ft({sortable:n,rootEl:u,name:"filter",targetEl:c,toEl:o,fromEl:o}),Yt("filter",n,{evt:t}),r&&t.preventDefault();return}}else if(p&&(p=p.split(",").some(function(d){if(d=mn(u,d.trim(),o,!1),d)return Ft({sortable:n,rootEl:d,name:"filter",targetEl:c,fromEl:o,toEl:o}),Yt("filter",n,{evt:t}),!0}),p)){r&&t.preventDefault();return}a.handle&&!mn(u,a.handle,o,!1)||this._prepareDragStart(t,l,c)}}},_prepareDragStart:function(t,n,o){var a=this,r=a.el,i=a.options,l=r.ownerDocument,c;if(o&&!be&&o.parentNode===r){var u=kt(o);if(pt=r,be=o,vt=be.parentNode,vo=be.nextSibling,va=o,aa=i.group,Be.dragged=be,mo={target:be,clientX:(n||t).clientX,clientY:(n||t).clientY},gc=mo.clientX-u.left,vc=mo.clientY-u.top,this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,be.style["will-change"]="all",c=function(){if(Yt("delayEnded",a,{evt:t}),Be.eventCanceled){a._onDrop();return}a._disableDelayedDragEvents(),!fc&&a.nativeDraggable&&(be.draggable=!0),a._triggerDragStart(t,n),Ft({sortable:a,name:"choose",originalEvent:t}),Qt(be,i.chosenClass,!0)},i.ignore.split(",").forEach(function(p){Xd(be,p.trim(),Nr)}),Ke(l,"dragover",ho),Ke(l,"mousemove",ho),Ke(l,"touchmove",ho),i.supportPointer?(Ke(l,"pointerup",a._onDrop),!this.nativeDraggable&&Ke(l,"pointercancel",a._onDrop)):(Ke(l,"mouseup",a._onDrop),Ke(l,"touchend",a._onDrop),Ke(l,"touchcancel",a._onDrop)),fc&&this.nativeDraggable&&(this.options.touchStartThreshold=4,be.draggable=!0),Yt("delayStart",this,{evt:t}),i.delay&&(!i.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Gs||Fn))){if(Be.eventCanceled){this._onDrop();return}i.supportPointer?(Ke(l,"pointerup",a._disableDelayedDrag),Ke(l,"pointercancel",a._disableDelayedDrag)):(Ke(l,"mouseup",a._disableDelayedDrag),Ke(l,"touchend",a._disableDelayedDrag),Ke(l,"touchcancel",a._disableDelayedDrag)),Ke(l,"mousemove",a._delayedDragTouchMoveHandler),Ke(l,"touchmove",a._delayedDragTouchMoveHandler),i.supportPointer&&Ke(l,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(c,i.delay)}else c()}},_delayedDragTouchMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){be&&Nr(be),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;ze(t,"mouseup",this._disableDelayedDrag),ze(t,"touchend",this._disableDelayedDrag),ze(t,"touchcancel",this._disableDelayedDrag),ze(t,"pointerup",this._disableDelayedDrag),ze(t,"pointercancel",this._disableDelayedDrag),ze(t,"mousemove",this._delayedDragTouchMoveHandler),ze(t,"touchmove",this._delayedDragTouchMoveHandler),ze(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||t.pointerType=="touch"&&t,!this.nativeDraggable||n?this.options.supportPointer?Ke(document,"pointermove",this._onTouchMove):n?Ke(document,"touchmove",this._onTouchMove):Ke(document,"mousemove",this._onTouchMove):(Ke(be,"dragend",this),Ke(pt,"dragstart",this._onDragStart));try{document.selection?wa(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,n){if(Mo=!1,pt&&be){Yt("dragStarted",this,{evt:n}),this.nativeDraggable&&Ke(document,"dragover",oy);var o=this.options;!t&&Qt(be,o.dragClass,!1),Qt(be,o.ghostClass,!0),Be.active=this,t&&this._appendGhost(),Ft({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(pn){this._lastX=pn.clientX,this._lastY=pn.clientY,of();for(var t=document.elementFromPoint(pn.clientX,pn.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(pn.clientX,pn.clientY),t!==n);)n=t;if(be.parentNode[Xt]._isOutsideThisEl(t),n)do{if(n[Xt]){var o=void 0;if(o=n[Xt]._onDragOver({clientX:pn.clientX,clientY:pn.clientY,target:t,rootEl:n}),o&&!this.options.dragoverBubble)break}t=n}while(n=Yd(n));sf()}},_onTouchMove:function(t){if(mo){var n=this.options,o=n.fallbackTolerance,a=n.fallbackOffset,r=t.touches?t.touches[0]:t,i=Ne&&zo(Ne,!0),l=Ne&&i&&i.a,c=Ne&&i&&i.d,u=ia&&Ot&&hc(Ot),p=(r.clientX-mo.clientX+a.x)/(l||1)+(u?u[0]-Lr[0]:0)/(l||1),d=(r.clientY-mo.clientY+a.y)/(c||1)+(u?u[1]-Lr[1]:0)/(c||1);if(!Be.active&&!Mo){if(o&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<o)return;this._onDragStart(t,!0)}if(Ne){i?(i.e+=p-(Br||0),i.f+=d-(Mr||0)):i={a:1,b:0,c:0,d:1,e:p,f:d};var m="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");Me(Ne,"webkitTransform",m),Me(Ne,"mozTransform",m),Me(Ne,"msTransform",m),Me(Ne,"transform",m),Br=p,Mr=d,pn=r}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!Ne){var t=this.options.fallbackOnBody?document.body:pt,n=kt(be,!0,ia,!0,t),o=this.options;if(ia){for(Ot=t;Me(Ot,"position")==="static"&&Me(Ot,"transform")==="none"&&Ot!==document;)Ot=Ot.parentNode;Ot!==document.body&&Ot!==document.documentElement?(Ot===document&&(Ot=Sn()),n.top+=Ot.scrollTop,n.left+=Ot.scrollLeft):Ot=Sn(),Lr=hc(Ot)}Ne=be.cloneNode(!0),Qt(Ne,o.ghostClass,!1),Qt(Ne,o.fallbackClass,!0),Qt(Ne,o.dragClass,!0),Me(Ne,"transition",""),Me(Ne,"transform",""),Me(Ne,"box-sizing","border-box"),Me(Ne,"margin",0),Me(Ne,"top",n.top),Me(Ne,"left",n.left),Me(Ne,"width",n.width),Me(Ne,"height",n.height),Me(Ne,"opacity","0.8"),Me(Ne,"position",ia?"absolute":"fixed"),Me(Ne,"zIndex","100000"),Me(Ne,"pointerEvents","none"),Be.ghost=Ne,t.appendChild(Ne),Me(Ne,"transform-origin",gc/parseInt(Ne.style.width)*100+"% "+vc/parseInt(Ne.style.height)*100+"%")}},_onDragStart:function(t,n){var o=this,a=t.dataTransfer,r=o.options;if(Yt("dragStart",this,{evt:t}),Be.eventCanceled){this._onDrop();return}Yt("setupClone",this),Be.eventCanceled||(mt=Qd(be),mt.removeAttribute("id"),mt.draggable=!1,mt.style["will-change"]="",this._hideClone(),Qt(mt,this.options.chosenClass,!1),Be.clone=mt),o.cloneId=wa(function(){Yt("clone",o),!Be.eventCanceled&&(o.options.removeCloneOnHide||pt.insertBefore(mt,be),o._hideClone(),Ft({sortable:o,name:"clone"}))}),!n&&Qt(be,r.dragClass,!0),n?(ja=!0,o._loopId=setInterval(o._emulateDragOver,50)):(ze(document,"mouseup",o._onDrop),ze(document,"touchend",o._onDrop),ze(document,"touchcancel",o._onDrop),a&&(a.effectAllowed="move",r.setData&&r.setData.call(o,a,be)),Ke(document,"drop",o),Me(be,"transform","translateZ(0)")),Mo=!0,o._dragStartId=wa(o._dragStarted.bind(o,n,t)),Ke(document,"selectstart",o),us=!0,window.getSelection().removeAllRanges(),_s&&Me(document.body,"user-select","none")},_onDragOver:function(t){var n=this.el,o=t.target,a,r,i,l=this.options,c=l.group,u=Be.active,p=aa===c,d=l.sort,m=Rt||u,v,C=this,w=!1;if(ii)return;function g(Ee,je){Yt(Ee,C,Tn({evt:t,isOwner:p,axis:v?"vertical":"horizontal",revert:i,dragRect:a,targetRect:r,canSort:d,fromSortable:m,target:o,completed:L,onMove:function(M,Y){return la(pt,n,be,a,M,kt(M),t,Y)},changed:B},je))}function S(){g("dragOverAnimationCapture"),C.captureAnimationState(),C!==m&&m.captureAnimationState()}function L(Ee){return g("dragOverCompleted",{insertion:Ee}),Ee&&(p?u._hideClone():u._showClone(C),C!==m&&(Qt(be,Rt?Rt.options.ghostClass:u.options.ghostClass,!1),Qt(be,l.ghostClass,!0)),Rt!==C&&C!==Be.active?Rt=C:C===Be.active&&Rt&&(Rt=null),m===C&&(C._ignoreWhileAnimating=o),C.animateAll(function(){g("dragOverAnimationComplete"),C._ignoreWhileAnimating=null}),C!==m&&(m.animateAll(),m._ignoreWhileAnimating=null)),(o===be&&!be.animated||o===n&&!o.animated)&&(Ho=null),!l.dragoverBubble&&!t.rootEl&&o!==document&&(be.parentNode[Xt]._isOutsideThisEl(t.target),!Ee&&ho(t)),!l.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),w=!0}function B(){en=rn(be),Gn=rn(be,l.draggable),Ft({sortable:C,name:"change",toEl:n,newIndex:en,newDraggableIndex:Gn,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),o=mn(o,l.draggable,n,!0),g("dragOver"),Be.eventCanceled)return w;if(be.contains(t.target)||o.animated&&o.animatingX&&o.animatingY||C._ignoreWhileAnimating===o)return L(!1);if(ja=!1,u&&!l.disabled&&(p?d||(i=vt!==pt):Rt===this||(this.lastPutMode=aa.checkPull(this,u,be,t))&&c.checkPut(this,u,be,t))){if(v=this._getDirection(t,o)==="vertical",a=kt(be),g("dragOverValid"),Be.eventCanceled)return w;if(i)return vt=pt,S(),this._hideClone(),g("revert"),Be.eventCanceled||(vo?pt.insertBefore(be,vo):pt.appendChild(be)),L(!0);var V=Ki(n,l.draggable);if(!V||iy(t,v,this)&&!V.animated){if(V===be)return L(!1);if(V&&n===t.target&&(o=V),o&&(r=kt(o)),la(pt,n,be,a,o,r,t,!!o)!==!1)return S(),V&&V.nextSibling?n.insertBefore(be,V.nextSibling):n.appendChild(be),vt=n,B(),L(!0)}else if(V&&ry(t,v,this)){var T=Jo(n,0,l,!0);if(T===be)return L(!1);if(o=T,r=kt(o),la(pt,n,be,a,o,r,t,!1)!==!1)return S(),n.insertBefore(be,T),vt=n,B(),L(!0)}else if(o.parentNode===n){r=kt(o);var te=0,ee,ae=be.parentNode!==n,j=!ty(be.animated&&be.toRect||a,o.animated&&o.toRect||r,v),H=v?"top":"left",N=mc(o,"top","top")||mc(be,"top","top"),R=N?N.scrollTop:void 0;Ho!==o&&(ee=r[H],Es=!1,ra=!j&&l.invertSwap||ae),te=ly(t,o,r,v,j?1:l.swapThreshold,l.invertedSwapThreshold==null?l.swapThreshold:l.invertedSwapThreshold,ra,Ho===o);var E;if(te!==0){var K=rn(be);do K-=te,E=vt.children[K];while(E&&(Me(E,"display")==="none"||E===Ne))}if(te===0||E===o)return L(!1);Ho=o,$s=te;var $e=o.nextElementSibling,se=!1;se=te===1;var Z=la(pt,n,be,a,o,r,t,se);if(Z!==!1)return(Z===1||Z===-1)&&(se=Z===1),ii=!0,setTimeout(ay,30),S(),se&&!$e?n.appendChild(be):o.parentNode.insertBefore(be,se?$e:o),N&&Jd(N,0,R-N.scrollTop),vt=be.parentNode,ee!==void 0&&!ra&&(ba=Math.abs(ee-kt(o)[H])),B(),L(!0)}if(n.contains(be))return L(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){ze(document,"mousemove",this._onTouchMove),ze(document,"touchmove",this._onTouchMove),ze(document,"pointermove",this._onTouchMove),ze(document,"dragover",ho),ze(document,"mousemove",ho),ze(document,"touchmove",ho)},_offUpEvents:function(){var t=this.el.ownerDocument;ze(t,"mouseup",this._onDrop),ze(t,"touchend",this._onDrop),ze(t,"pointerup",this._onDrop),ze(t,"pointercancel",this._onDrop),ze(t,"touchcancel",this._onDrop),ze(document,"selectstart",this)},_onDrop:function(t){var n=this.el,o=this.options;if(en=rn(be),Gn=rn(be,o.draggable),Yt("drop",this,{evt:t}),vt=be&&be.parentNode,en=rn(be),Gn=rn(be,o.draggable),Be.eventCanceled){this._nulling();return}Mo=!1,ra=!1,Es=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),li(this.cloneId),li(this._dragStartId),this.nativeDraggable&&(ze(document,"drop",this),ze(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),_s&&Me(document.body,"user-select",""),Me(be,"transform",""),t&&(us&&(t.cancelable&&t.preventDefault(),!o.dropBubble&&t.stopPropagation()),Ne&&Ne.parentNode&&Ne.parentNode.removeChild(Ne),(pt===vt||Rt&&Rt.lastPutMode!=="clone")&&mt&&mt.parentNode&&mt.parentNode.removeChild(mt),be&&(this.nativeDraggable&&ze(be,"dragend",this),Nr(be),be.style["will-change"]="",us&&!Mo&&Qt(be,Rt?Rt.options.ghostClass:this.options.ghostClass,!1),Qt(be,this.options.chosenClass,!1),Ft({sortable:this,name:"unchoose",toEl:vt,newIndex:null,newDraggableIndex:null,originalEvent:t}),pt!==vt?(en>=0&&(Ft({rootEl:vt,name:"add",toEl:vt,fromEl:pt,originalEvent:t}),Ft({sortable:this,name:"remove",toEl:vt,originalEvent:t}),Ft({rootEl:vt,name:"sort",toEl:vt,fromEl:pt,originalEvent:t}),Ft({sortable:this,name:"sort",toEl:vt,originalEvent:t})),Rt&&Rt.save()):en!==Lo&&en>=0&&(Ft({sortable:this,name:"update",toEl:vt,originalEvent:t}),Ft({sortable:this,name:"sort",toEl:vt,originalEvent:t})),Be.active&&((en==null||en===-1)&&(en=Lo,Gn=Ss),Ft({sortable:this,name:"end",toEl:vt,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){Yt("nulling",this),pt=be=vt=Ne=vo=mt=va=Qn=mo=pn=us=en=Gn=Lo=Ss=Ho=$s=Rt=aa=Be.dragged=Be.ghost=Be.clone=Be.active=null,Ua.forEach(function(t){t.checked=!0}),Ua.length=Br=Mr=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":be&&(this._onDragOver(t),sy(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],n,o=this.el.children,a=0,r=o.length,i=this.options;a<r;a++)n=o[a],mn(n,i.draggable,this.el,!1)&&t.push(n.getAttribute(i.dataIdAttr)||uy(n));return t},sort:function(t,n){var o={},a=this.el;this.toArray().forEach(function(r,i){var l=a.children[i];mn(l,this.options.draggable,a,!1)&&(o[r]=l)},this),n&&this.captureAnimationState(),t.forEach(function(r){o[r]&&(a.removeChild(o[r]),a.appendChild(o[r]))}),n&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,n){return mn(t,n||this.options.draggable,this.el,!1)},option:function(t,n){var o=this.options;if(n===void 0)return o[t];var a=Js.modifyOption(this,t,n);typeof a<"u"?o[t]=a:o[t]=n,t==="group"&&nf(o)},destroy:function(){Yt("destroy",this);var t=this.el;t[Xt]=null,ze(t,"mousedown",this._onTapStart),ze(t,"touchstart",this._onTapStart),ze(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(ze(t,"dragover",this),ze(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Fa.splice(Fa.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Qn){if(Yt("hideClone",this),Be.eventCanceled)return;Me(mt,"display","none"),this.options.removeCloneOnHide&&mt.parentNode&&mt.parentNode.removeChild(mt),Qn=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(Qn){if(Yt("showClone",this),Be.eventCanceled)return;be.parentNode==pt&&!this.options.group.revertClone?pt.insertBefore(mt,be):vo?pt.insertBefore(mt,vo):pt.appendChild(mt),this.options.group.revertClone&&this.animate(be,mt),Me(mt,"display",""),Qn=!1}}};function sy(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function la(e,t,n,o,a,r,i,l){var c,u=e[Xt],p=u.options.onMove,d;return window.CustomEvent&&!Fn&&!Gs?c=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(c=document.createEvent("Event"),c.initEvent("move",!0,!0)),c.to=t,c.from=e,c.dragged=n,c.draggedRect=o,c.related=a||t,c.relatedRect=r||kt(t),c.willInsertAfter=l,c.originalEvent=i,e.dispatchEvent(c),p&&(d=p.call(u,c,i)),d}function Nr(e){e.draggable=!1}function ay(){ii=!1}function ry(e,t,n){var o=kt(Jo(n.el,0,n.options,!0)),a=Zd(n.el,n.options,Ne),r=10;return t?e.clientX<a.left-r||e.clientY<o.top&&e.clientX<o.right:e.clientY<a.top-r||e.clientY<o.bottom&&e.clientX<o.left}function iy(e,t,n){var o=kt(Ki(n.el,n.options.draggable)),a=Zd(n.el,n.options,Ne),r=10;return t?e.clientX>a.right+r||e.clientY>o.bottom&&e.clientX>o.left:e.clientY>a.bottom+r||e.clientX>o.right&&e.clientY>o.top}function ly(e,t,n,o,a,r,i,l){var c=o?e.clientY:e.clientX,u=o?n.height:n.width,p=o?n.top:n.left,d=o?n.bottom:n.right,m=!1;if(!i){if(l&&ba<u*a){if(!Es&&($s===1?c>p+u*r/2:c<d-u*r/2)&&(Es=!0),Es)m=!0;else if($s===1?c<p+ba:c>d-ba)return-$s}else if(c>p+u*(1-a)/2&&c<d-u*(1-a)/2)return cy(t)}return m=m||i,m&&(c<p+u*r/2||c>d-u*r/2)?c>p+u/2?1:-1:0}function cy(e){return rn(be)<rn(e)?1:-1}function uy(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,o=0;n--;)o+=t.charCodeAt(n);return o.toString(36)}function dy(e){Ua.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var o=t[n];o.checked&&Ua.push(o)}}function wa(e){return setTimeout(e,0)}function li(e){return clearTimeout(e)}ur&&Ke(document,"touchmove",function(e){(Be.active||Mo)&&e.cancelable&&e.preventDefault()});Be.utils={on:Ke,off:ze,css:Me,find:Xd,is:function(t,n){return!!mn(t,n,t,!1)},extend:Kw,throttle:Gd,closest:mn,toggleClass:Qt,clone:Qd,index:rn,nextTick:wa,cancelNextTick:li,detectDirection:tf,getChild:Jo,expando:Xt};Be.get=function(e){return e[Xt]};Be.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(o){if(!o.prototype||!o.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(o));o.utils&&(Be.utils=Tn(Tn({},Be.utils),o.utils)),Js.mount(o)})};Be.create=function(e,t){return new Be(e,t)};Be.version=qw;var _t=[],ds,ci,ui=!1,Vr,jr,za,fs;function fy(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(n){var o=n.originalEvent;this.sortable.nativeDraggable?Ke(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Ke(document,"pointermove",this._handleFallbackAutoScroll):o.touches?Ke(document,"touchmove",this._handleFallbackAutoScroll):Ke(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var o=n.originalEvent;!this.options.dragOverBubble&&!o.rootEl&&this._handleAutoScroll(o)},drop:function(){this.sortable.nativeDraggable?ze(document,"dragover",this._handleAutoScroll):(ze(document,"pointermove",this._handleFallbackAutoScroll),ze(document,"touchmove",this._handleFallbackAutoScroll),ze(document,"mousemove",this._handleFallbackAutoScroll)),wc(),ya(),Yw()},nulling:function(){za=ci=ds=ui=fs=Vr=jr=null,_t.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,o){var a=this,r=(n.touches?n.touches[0]:n).clientX,i=(n.touches?n.touches[0]:n).clientY,l=document.elementFromPoint(r,i);if(za=n,o||this.options.forceAutoScrollFallback||Gs||Fn||_s){Fr(n,this.options,l,o);var c=to(l,!0);ui&&(!fs||r!==Vr||i!==jr)&&(fs&&wc(),fs=setInterval(function(){var u=to(document.elementFromPoint(r,i),!0);u!==c&&(c=u,ya()),Fr(n,a.options,u,o)},10),Vr=r,jr=i)}else{if(!this.options.bubbleScroll||to(l,!0)===Sn()){ya();return}Fr(n,this.options,to(l,!1),!1)}}},Vn(e,{pluginName:"scroll",initializeByDefault:!0})}function ya(){_t.forEach(function(e){clearInterval(e.pid)}),_t=[]}function wc(){clearInterval(fs)}var Fr=Gd(function(e,t,n,o){if(t.scroll){var a=(e.touches?e.touches[0]:e).clientX,r=(e.touches?e.touches[0]:e).clientY,i=t.scrollSensitivity,l=t.scrollSpeed,c=Sn(),u=!1,p;ci!==n&&(ci=n,ya(),ds=t.scroll,p=t.scrollFn,ds===!0&&(ds=to(n,!0)));var d=0,m=ds;do{var v=m,C=kt(v),w=C.top,g=C.bottom,S=C.left,L=C.right,B=C.width,V=C.height,T=void 0,te=void 0,ee=v.scrollWidth,ae=v.scrollHeight,j=Me(v),H=v.scrollLeft,N=v.scrollTop;v===c?(T=B<ee&&(j.overflowX==="auto"||j.overflowX==="scroll"||j.overflowX==="visible"),te=V<ae&&(j.overflowY==="auto"||j.overflowY==="scroll"||j.overflowY==="visible")):(T=B<ee&&(j.overflowX==="auto"||j.overflowX==="scroll"),te=V<ae&&(j.overflowY==="auto"||j.overflowY==="scroll"));var R=T&&(Math.abs(L-a)<=i&&H+B<ee)-(Math.abs(S-a)<=i&&!!H),E=te&&(Math.abs(g-r)<=i&&N+V<ae)-(Math.abs(w-r)<=i&&!!N);if(!_t[d])for(var K=0;K<=d;K++)_t[K]||(_t[K]={});(_t[d].vx!=R||_t[d].vy!=E||_t[d].el!==v)&&(_t[d].el=v,_t[d].vx=R,_t[d].vy=E,clearInterval(_t[d].pid),(R!=0||E!=0)&&(u=!0,_t[d].pid=setInterval((function(){o&&this.layer===0&&Be.active._onTouchMove(za);var $e=_t[this.layer].vy?_t[this.layer].vy*l:0,se=_t[this.layer].vx?_t[this.layer].vx*l:0;typeof p=="function"&&p.call(Be.dragged.parentNode[Xt],se,$e,e,za,_t[this.layer].el)!=="continue"||Jd(_t[this.layer].el,se,$e)}).bind({layer:d}),24))),d++}while(t.bubbleScroll&&m!==c&&(m=to(m,!1)));ui=u}},30),af=function(t){var n=t.originalEvent,o=t.putSortable,a=t.dragEl,r=t.activeSortable,i=t.dispatchSortableEvent,l=t.hideGhostForTarget,c=t.unhideGhostForTarget;if(n){var u=o||r;l();var p=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,d=document.elementFromPoint(p.clientX,p.clientY);c(),u&&!u.el.contains(d)&&(i("spill"),this.onSpill({dragEl:a,putSortable:o}))}};function Yi(){}Yi.prototype={startIndex:null,dragStart:function(t){var n=t.oldDraggableIndex;this.startIndex=n},onSpill:function(t){var n=t.dragEl,o=t.putSortable;this.sortable.captureAnimationState(),o&&o.captureAnimationState();var a=Jo(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(n,a):this.sortable.el.appendChild(n),this.sortable.animateAll(),o&&o.animateAll()},drop:af};Vn(Yi,{pluginName:"revertOnSpill"});function Xi(){}Xi.prototype={onSpill:function(t){var n=t.dragEl,o=t.putSortable,a=o||this.sortable;a.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),a.animateAll()},drop:af};Vn(Xi,{pluginName:"removeOnSpill"});Be.mount(new fy);Be.mount(Xi,Yi);function rf(e){if(e<=0)return 0;if(e>=1&&e<=4)return 10;if(e>=5&&e<=10)return 20;if(e>=11&&e<=16)return 30;if(e>=17&&e<=20)return 40;const t=21,n=50;if(e>=t){const o=Math.floor((e-t)/4);return n+o*10}return 0}function lf(e){const[t,n]=e.toLowerCase().split("d").map(Number),o=[];for(let a=0;a<t;a++)o.push(Math.floor(Math.random()*n)+1);return o}function qa(e){const t={};let n=0,o=0;e.damageRolls.forEach(a=>{let{dice:r,min:i=1,bonus:l=0,type:c,lifeSteal:u={percentage:0}}=a;i=Number(i)||1,l=Number(l)||0;const p=Number(u.percentage)||0,d=`d${r.split("d")[1]}`,v=lf(r).map(g=>({value:Math.max(g,i),diceType:d,originalValue:g,isReplaced:!1})),w=v.reduce((g,S)=>g+S.value,0)+l;if(n+=w,t[c]||(t[c]={rolls:[],bonus:0,total:0,lifeSteal:{healed:0,percentages:[]}}),t[c].rolls.push(...v),t[c].bonus+=l,t[c].total+=w,p>0){const g=Math.floor(w*(p/100));o+=g,t[c].lifeSteal.healed+=g,t[c].lifeSteal.percentages.push(p)}});for(const a in t)if(t[a].lifeSteal.healed===0)t[a].lifeSteal=null;else{const r=[...new Set(t[a].lifeSteal.percentages)];t[a].lifeSteal.percentage_display=r.join("% / ")+"%",delete t[a].lifeSteal.percentages}return{name:e.name,results:t,grandTotal:n,totalHealed:o}}function cf(e,t){const{rule:n,characterLevel:o}=t;if(n==="default"){const a=JSON.parse(JSON.stringify(e));return a.name=`${e.name} (Crtico)`,a.damageRolls.forEach(r=>{const[i,l]=r.dice.split("d");r.dice=`${Number(i)*2}d${l}`}),qa(a)}if(n==="dad"){const a={};let r=0,i=0;const l=rf(o);if(e.damageRolls.forEach(c=>{let{dice:u,min:p=1,bonus:d=0,type:m,lifeSteal:v={percentage:0}}=c;const[C,w]=u.split("d").map(Number);p=Number(p)||1,d=Number(d)||0;const g=Number(v.percentage)||0;let S=0;const L=[];for(let V=0;V<C;V++){const T=Math.max(Math.floor(Math.random()*w)+1,p),te=w;S+=te+T,L.push({value:te,originalValue:`${w} (Mx)`}),L.push({value:T,originalValue:`${T} (Aleatorio)`})}const B=S+d;if(r+=B,a[m]||(a[m]={rolls:[],bonus:0,total:0,lifeSteal:{healed:0,percentages:[]}}),a[m].rolls.push(...L),a[m].bonus+=d,a[m].total+=B,g>0){const V=Math.floor(B*(g/100));i+=V,a[m].lifeSteal.healed+=V,a[m].lifeSteal.percentages.push(g)}}),l>0){const c="force";a[c]?(a[c].total+=l,a[c].rolls.push({value:l,originalValue:l})):a[c]={rolls:[{value:l,originalValue:l}],bonus:0,total:l,lifeSteal:{healed:0,percentages:[]}},r+=l}for(const c in a)if(a[c].lifeSteal.healed===0)a[c].lifeSteal=null;else{const u=[...new Set(a[c].lifeSteal.percentages)];a[c].lifeSteal.percentage_display=u.join("% / ")+"%",delete a[c].lifeSteal.percentages}return{name:`${e.name} (Crtico DAD)`,results:a,grandTotal:r,totalHealed:i}}return qa(e)}function Ds(e){const t={};if(!e)return t;e.forEach(n=>{const o=`d${n.dice.split("d")[1]}`,a=Number(n.min)||1,i=lf(n.dice).map(l=>Math.max(l,a));t[o]||(t[o]=[]),t[o].push(...i)});for(const n in t)t[n].sort((o,a)=>a-o);return t}function di(e,t){const n=JSON.parse(JSON.stringify(e));for(const r in t){const i=t[r];let l=[];for(const u in n.results)n.results[u].rolls.forEach((p,d)=>{p.diceType===r&&!p.isReplaced&&l.push({roll:p,damageType:u,index:d})});l.sort((u,p)=>u.roll.value-p.roll.value);const c=Math.min(l.length,i.length);for(let u=0;u<c;u++){const p=l[u],d=i[u];d>p.roll.value&&(p.roll.originalValue=p.roll.value,p.roll.value=d,p.roll.isReplaced=!0)}}let o=0,a=0;for(const r in n.results){const i=n.results[r],l=i.rolls.reduce((c,u)=>c+u.value,0);if(i.total=l+i.bonus,o+=i.total,i.lifeSteal){const c=i.lifeSteal.percentage_display,u=parseFloat(c);if(!isNaN(u)){const p=Math.floor(i.total*(u/100));i.lifeSteal.healed=p,a+=p}}}return n.grandTotal=o,n.totalHealed=a,n}const py={class:"attack-manager-container"},my={class:"header"},hy={class:"header-actions"},gy={class:"content"},vy={class:"attacks-list"},by={key:0,class:"no-attacks"},wy=["data-id"],yy={class:"header-attack"},Cy={class:"attack-info"},xy={class:"attack-name"},_y={class:"attack-summary"},ky={class:"attack-actions"},Sy=["onClick"],$y=["onClick"],Ey=["onClick"],Dy=["onClick"],Ty=["onClick"],Ay={class:"new-attack-area"},Iy={class:"attack-form"},Ry={class:"attack-form-header"},Py={class:"attack-form-content"},Hy={class:"form-group"},Oy={class:"damage-rolls-section"},By={class:"damage-roll-header"},My={class:"damage-roll-title"},Ly=["onClick","disabled"],Ny={class:"damage-roll-inputs"},Vy={class:"form-group-inline"},jy=["for"],Fy=["id","onUpdate:modelValue"],Uy={class:"form-group-inline"},zy=["for"],qy=["id","onUpdate:modelValue"],Wy={class:"form-group-inline"},Ky=["for"],Yy=["id","onUpdate:modelValue"],Xy=["value"],Gy={class:"form-group-inline"},Jy=["for"],Qy=["id","onUpdate:modelValue"],Zy={class:"form-group-inline"},e0=["for"],t0=["id","onUpdate:modelValue"],n0={class:"form-group-inline"},o0=["for"],s0=["id","onUpdate:modelValue"],a0={class:"damage-rolls-section"},r0={key:0,class:"empty-state"},i0={class:"damage-roll-header"},l0={class:"damage-roll-title"},c0=["onClick"],u0={class:"damage-roll-inputs reroll-inputs"},d0={class:"form-group-inline"},f0=["for"],p0=["id","onUpdate:modelValue"],m0={class:"form-group-inline"},h0=["for"],g0=["id","onUpdate:modelValue"],v0={class:"form-group-inline"},b0=["for"],w0=["id","onUpdate:modelValue"],y0={class:"form-actions"},C0={class:"attack-form settings-form"},x0={class:"attack-form-content"},_0={class:"form-group"},k0={key:0,class:"form-group"},S0={key:0,class:"dad-bonus-display"},$0={__name:"AttackManager",emits:["close"],setup(e,{emit:t}){const n=Ju(),o=Eo(),{criticalHit:a}=_o(n),r=pe(!1),i=pe(!1),l=pe(!1),c=dn({rule:"default",characterLevel:1}),u=Je(()=>c.rule!=="dad"?0:rf(c.characterLevel)),p=dn({id:null,name:"",damageRolls:[],rerollDice:[]});qt(()=>{document.body.style.overflow="hidden",n.loadData(),$o(()=>{const N=document.querySelector(".attacks-list");N&&new Be(N,{animation:150,handle:".drag-handle",ghostClass:"sortable-ghost",onEnd:K=>{const $e=Array.from(K.target.children).map(se=>se.dataset.id).filter(se=>se);n.updateAttackOrder($e)}});const R=document.querySelector(".attack-manager-overlay"),E=document.querySelector(".content");if(R&&E){const K=$e=>{$e.target.closest(".attack-form-overlay")||($e.preventDefault(),E.scrollTop+=$e.deltaY)};R.addEventListener("wheel",K,{passive:!1}),R._wheelHandler=K}})}),io(()=>{document.body.style.overflow="";const N=document.querySelector(".attack-manager-overlay");N&&N._wheelHandler&&N.removeEventListener("wheel",N._wheelHandler)});const d=N=>{if(!N||!N.includes("d"))return{numDice:1,diceType:6};const[R,E]=N.split("d");return{numDice:Number(R)||1,diceType:Number(E)||6}},m=N=>{const R=JSON.parse(JSON.stringify(N));R.damageRolls.forEach(E=>{const{numDice:K,diceType:$e}=d(E.dice);E.numDice=K,E.diceType=$e,E.lifeSteal||(E.lifeSteal={percentage:0})}),R.rerollDice?R.rerollDice.forEach(E=>{const{numDice:K,diceType:$e}=d(E.dice);E.numDice=K,E.diceType=$e}):R.rerollDice=[],p.id=R.id,p.name=R.name,p.damageRolls.splice(0,p.damageRolls.length,...R.damageRolls),p.rerollDice.splice(0,p.rerollDice.length,...R.rerollDice),r.value=!0},v=()=>{c.rule=n.criticalHit.rule,c.characterLevel=n.criticalHit.characterLevel,l.value=!0},C=()=>{l.value=!1},w=()=>{n.updateCriticalHitConfig({rule:c.rule,characterLevel:c.characterLevel}),C(),xe.fire("Guardado","La configuracin de dao crtico ha sido actualizada.","success")},g=()=>{i.value=!1,m({id:null,name:"",damageRolls:[{dice:"1d6",type:"slashing",bonus:0,min:1,lifeSteal:{percentage:0}}],rerollDice:[]})},S=N=>{i.value=!0,m(N)},L=N=>{n.duplicateAttack(N.id)},B=()=>{r.value=!1},V=()=>{p.damageRolls.push({dice:"1d6",type:"slashing",bonus:0,min:1,numDice:1,diceType:6,lifeSteal:{percentage:0}})},T=N=>{p.damageRolls.splice(N,1)},te=()=>{p.rerollDice||(p.rerollDice=[]),p.rerollDice.push({dice:"1d6",numDice:1,diceType:6,min:1})},ee=N=>{p.rerollDice.splice(N,1)},ae=()=>{if(!p.name){xe.fire("Error","El nombre del ataque no puede estar vaco.","error");return}const N=JSON.parse(JSON.stringify(p));N.damageRolls.forEach(R=>{R.dice=`${R.numDice||1}d${R.diceType||6}`,delete R.numDice,delete R.diceType}),N.rerollDice&&N.rerollDice.forEach(R=>{R.dice=`${R.numDice||1}d${R.diceType||6}`,delete R.numDice,delete R.diceType}),i.value?n.updateAttack(N):n.addAttack(N),B()},j=N=>{xe.fire({title:"Ests seguro?",text:"No podrs revertir esta accin.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"S, elimnalo!",cancelButtonText:"Cancelar"}).then(R=>{R.isConfirmed&&(n.deleteAttack(N),xe.fire("Eliminado","El ataque ha sido eliminado.","success"))})},H=(N,R=!1)=>{let E;R?E=cf(N,n.criticalHit):E=qa(N);const K=M=>M.map(Y=>`<span class="roll-value ${Y.isReplaced?"replaced":""}">${Y.value}</span>`).join(", "),$e=M=>{if(!M)return"";let Y='<div class="reroll-results-block-modern"><h4><i class="bi bi-dice-5"></i> Resultados del Reroll</h4>';for(const U in M)Y+=`<div class="reroll-type"><strong>${U}:</strong> [${M[U].join(", ")}]</div>`;return Y+="</div>",Y},se=(M,Y=null)=>{let U='<div class="attack-result-modal">';U+=`<h3 class="dnd-title-modern">${M.name}</h3>`;for(const ce in M.results){const De=M.results[ce],dt=Gu(ce),Se=(ko.find(Ce=>Ce.id===ce)||{name:ce}).name.toUpperCase();U+=`
        <div class="damage-type-block-modern" style="border-left-color: ${dt};">
          <div class="damage-header">
            <span class="damage-type-modern" style="color: ${dt};">${Se}</span>
            <span class="damage-total-modern">${De.total}</span>
          </div>
          <div class="damage-details">
            <span><strong>Tiradas:</strong> [${K(De.rolls)}]</span>
            <span><strong>Bonus:</strong> ${De.bonus>0?"+":""}${De.bonus}</span>
          </div>
      `,De.lifeSteal&&(U+=`
          <div class="lifesteal-details">
            <i class="bi bi-heart-fill"></i>
            <span><strong>Curado:</strong> ${De.lifeSteal.healed} (${De.lifeSteal.percentage_display})</span>
          </div>
        `),U+="</div>"}return U+=$e(Y),U+=`<div class="grand-total-modern">Dao Total: ${M.grandTotal}</div>`,M.totalHealed>0&&(U+=`<div class="total-healed-modern">Curacin Total: ${M.totalHealed}</div>`),U+="</div>",U},Z="dnd-modern-modal-styles",Ee=`
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Teko:wght@700&display=swap');
        .dnd-modern-swal-popup { background: #1e1e1e; border: 1px solid #444; border-radius: 10px; color: #f0f0f0; box-shadow: 0 5px 20px rgba(0,0,0,0.5); }
        .dnd-modern-swal-container { padding: 0 !important; }
        .dnd-title-modern { font-family: 'Teko', sans-serif; font-size: 2.5rem; color: #f0f0f0; text-align: center; padding: 15px; background: #111; border-top-left-radius: 9px; border-top-right-radius: 9px; }
        .dnd-modern-swal-popup .attack-result-modal { padding: 20px; font-family: 'Roboto', sans-serif; }
        .damage-type-block-modern { background: #2a2a2a; border-left: 4px solid; margin-bottom: 15px; padding: 15px; border-radius: 4px; }
        .damage-type-modern { font-family: 'Teko', sans-serif; font-size: 1.5rem; }
        .damage-total-modern { font-family: 'Teko', sans-serif; font-size: 2.8rem; color: #ff4d4d; }
        .grand-total-modern, .total-healed-modern { font-family: 'Teko', sans-serif; font-size: 2rem; text-align: center; margin-top: 20px; padding: 10px; border-radius: 5px; }
        .grand-total-modern { background: rgba(255, 77, 77, 0.1); color: #ff4d4d; }
        .total-healed-modern { background: rgba(77, 255, 126, 0.1); color: #4dff7e; }
        .dnd-modern-swal-popup .lifesteal-details { color: #4dff7e; }`,je=`
    .roll-value.replaced { color: #ffd700; font-weight: bold; text-shadow: 0 0 5px #ffd700; background-color: rgba(255, 215, 0, 0.1); padding: 2px 4px; border-radius: 3px; }
    .reroll-results-block-modern { background: #2a2a2a; padding: 15px; border-radius: 6px; margin: 20px 0; border: 1px solid #444; }
    .reroll-results-block-modern h4 { color: #f39c12; margin-bottom: 10px; display: flex; align-items: center; gap: 8px; }
    .reroll-type { margin-bottom: 5px; padding-left: 10px; }
    .swal2-actions { gap: 15px !important; }
    .dnd-reroll-button { background-color: #9b59b6 !important; color: white !important; }
    .dnd-replace-button { background-color: #f39c12 !important; color: white !important; }`;let z=null;xe.fire({width:600,html:se(E),showConfirmButton:!0,confirmButtonText:"Cerrar",showDenyButton:N.rerollDice&&N.rerollDice.length>0,denyButtonText:"Lanzar Reroll",showCancelButton:!1,showCloseButton:!0,customClass:{popup:"dnd-modern-swal-popup",htmlContainer:"dnd-modern-swal-container",denyButton:"dnd-reroll-button",cancelButton:"dnd-replace-button"},didOpen:()=>{if(document.getElementById(Z))return;const M=document.createElement("style");M.id=Z,M.innerHTML=Ee+je,document.head.appendChild(M)},didClose:()=>{E.totalHealed>0&&o.heal(E.totalHealed),o.addLog(`Ataque: ${N.name}`,`Dao total: ${E.grandTotal}. Curacin por robo de vida: ${E.totalHealed}.`)},preDeny:()=>(z=Ds(N.rerollDice),xe.update({html:se(E,z),showDenyButton:!1,showCancelButton:!1,footer:'<button id="swal-replace-btn" class="swal2-styled dnd-replace-button">Reemplazar Dados</button>'}),setTimeout(()=>{const M=document.getElementById("swal-replace-btn");M&&(M.onclick=()=>{z||(z=Ds(N.rerollDice)),E=di(E,z),xe.update({html:se(E,z),showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,footer:""})})},0),!1),preCancel:()=>(z||(z=Ds(N.rerollDice)),E=di(E,z),xe.update({html:se(E,z),showCancelButton:!1,showConfirmButton:!0,confirmButtonText:"Cerrar"}),!1)})};return(N,R)=>($(),D("div",{class:"attack-manager-overlay",onClick:R[5]||(R[5]=Ge(E=>N.$emit("close"),["self"]))},[s("div",py,[s("div",my,[R[7]||(R[7]=s("h2",null,[s("i",{class:"bi bi-hammer"}),le(" Gestor de Ataques")],-1)),s("div",hy,[s("button",{onClick:v,class:"settings-btn"},R[6]||(R[6]=[s("i",{class:"bi bi-gear-fill"},null,-1)])),s("button",{onClick:R[0]||(R[0]=E=>N.$emit("close")),class:"close-btn"},"")])]),s("div",gy,[s("div",vy,[ue(n).attacks.length===0?($(),D("div",by," No hay ataques guardados. Crea uno nuevo! ")):we("",!0),($(!0),D(Le,null,qe(ue(n).attacks,E=>($(),D("div",{key:E.id,class:"attack-item","data-id":E.id},[s("div",yy,[R[8]||(R[8]=s("div",{class:"drag-handle"},[s("i",{class:"bi bi-grip-vertical"})],-1)),s("div",Cy,[s("span",xy,W(E.name),1),s("div",_y,[($(!0),D(Le,null,qe(E.damageRolls,(K,$e)=>($(),D("span",{key:$e,class:"damage-tag"},W(K.dice)+" "+W(K.type),1))),128))])])]),s("div",ky,[s("button",{onClick:K=>H(E,!1),class:"action-btn btn-execute"},"Atacar",8,Sy),s("button",{onClick:K=>H(E,!0),class:"action-btn btn-critical"},"Crtico",8,$y),s("button",{onClick:K=>S(E),class:"action-btn btn-edit"},"Editar",8,Ey),s("button",{onClick:K=>L(E),class:"action-btn btn-duplicate"},"Duplicar",8,Dy),s("button",{onClick:K=>j(E.id),class:"action-btn btn-delete"},"Eliminar",8,Ty)])],8,wy))),128))]),s("div",Ay,[s("button",{onClick:R[1]||(R[1]=E=>g()),class:"btn-new-attack"},R[9]||(R[9]=[s("i",{class:"bi bi-plus-circle-fill"},null,-1),le(" Crear Nuevo Ataque ")]))]),r.value?($(),D("div",{key:0,class:"attack-form-overlay",onClick:Ge(B,["self"])},[s("div",Iy,[s("div",Ry,[s("h3",null,W(i.value?"Editar Ataque":"Nuevo Ataque"),1),s("button",{onClick:B,class:"form-close-btn","aria-label":"Cerrar formulario"},R[10]||(R[10]=[s("i",{class:"bi bi-x-lg"},null,-1)]))]),s("div",Py,[s("div",Hy,[R[11]||(R[11]=s("label",{for:"attack-name"},"Nombre del Ataque",-1)),oe(s("input",{id:"attack-name",type:"text","onUpdate:modelValue":R[2]||(R[2]=E=>p.name=E),placeholder:"Ej: Espadazo flamgero",autocomplete:"off"},null,512),[[ge,p.name]])]),s("div",Oy,[R[15]||(R[15]=s("h4",null,[s("i",{class:"bi bi-dice-6-fill"}),le(" Tiradas de Dao")],-1)),($(!0),D(Le,null,qe(p.damageRolls,(E,K)=>($(),D("div",{key:K,class:"damage-roll-item"},[s("div",By,[s("span",My,"Dao #"+W(K+1),1),s("button",{onClick:$e=>T(K),class:"btn-remove-roll","aria-label":"Eliminar tirada de dao",disabled:p.damageRolls.length===1},R[12]||(R[12]=[s("i",{class:"bi bi-trash-fill"},null,-1)]),8,Ly)]),s("div",Ny,[s("div",Vy,[s("label",{for:`dice-num-${K}`},"Cantidad",8,jy),oe(s("input",{id:`dice-num-${K}`,type:"number","onUpdate:modelValue":$e=>E.numDice=$e,min:"1",max:"20",class:"input-narrow"},null,8,Fy),[[ge,E.numDice,void 0,{number:!0}]])]),s("div",Uy,[s("label",{for:`dice-type-${K}`},"Tipo de Dado",8,zy),oe(s("select",{id:`dice-type-${K}`,"onUpdate:modelValue":$e=>E.diceType=$e},R[13]||(R[13]=[oo('<option value="4" data-v-179190ef>d4</option><option value="6" data-v-179190ef>d6</option><option value="8" data-v-179190ef>d8</option><option value="10" data-v-179190ef>d10</option><option value="12" data-v-179190ef>d12</option><option value="20" data-v-179190ef>d20</option><option value="100" data-v-179190ef>d100</option>',7)]),8,qy),[[Ht,E.diceType,void 0,{number:!0}]])]),s("div",Wy,[s("label",{for:`type-${K}`},"Tipo de Dao",8,Ky),oe(s("select",{id:`type-${K}`,"onUpdate:modelValue":$e=>E.type=$e},[($(!0),D(Le,null,qe(ue(ko),$e=>($(),D("option",{key:$e.id,value:$e.id},W($e.name),9,Xy))),128))],8,Yy),[[Ht,E.type]])]),s("div",Gy,[s("label",{for:`bonus-${K}`},"Bonus",8,Jy),oe(s("input",{id:`bonus-${K}`,type:"number","onUpdate:modelValue":$e=>E.bonus=$e,placeholder:"+3"},null,8,Qy),[[ge,E.bonus,void 0,{number:!0}]])]),s("div",Zy,[s("label",{for:`min-${K}`},"Mnimo",8,e0),oe(s("input",{id:`min-${K}`,type:"number","onUpdate:modelValue":$e=>E.min=$e,placeholder:"1",min:"1"},null,8,t0),[[ge,E.min,void 0,{number:!0}]])]),s("div",n0,[s("label",{for:`lifesteal-${K}`},"Robo de Vida (%)",8,o0),oe(s("input",{id:`lifesteal-${K}`,type:"number","onUpdate:modelValue":$e=>E.lifeSteal.percentage=$e,placeholder:"0",min:"0",max:"100"},null,8,s0),[[ge,E.lifeSteal.percentage,void 0,{number:!0}]])])])]))),128)),s("button",{onClick:V,class:"btn-add-roll"},R[14]||(R[14]=[s("i",{class:"bi bi-plus-circle"},null,-1),le(" Aadir Tipo de Dao ")]))]),s("div",a0,[R[20]||(R[20]=s("h4",null,[s("i",{class:"bi bi-arrow-repeat"}),le(" Dados de Reroll (Opcional)")],-1)),p.rerollDice.length===0?($(),D("div",r0,R[16]||(R[16]=[s("p",null,"No hay dados de reroll configurados",-1)]))):we("",!0),($(!0),D(Le,null,qe(p.rerollDice,(E,K)=>($(),D("div",{key:K,class:"damage-roll-item"},[s("div",i0,[s("span",l0,"Reroll #"+W(K+1),1),s("button",{onClick:$e=>ee(K),class:"btn-remove-roll","aria-label":"Eliminar dado de reroll"},R[17]||(R[17]=[s("i",{class:"bi bi-trash-fill"},null,-1)]),8,c0)]),s("div",u0,[s("div",d0,[s("label",{for:`reroll-dice-num-${K}`},"Cantidad",8,f0),oe(s("input",{id:`reroll-dice-num-${K}`,type:"number","onUpdate:modelValue":$e=>E.numDice=$e,min:"1",max:"20",class:"input-narrow"},null,8,p0),[[ge,E.numDice,void 0,{number:!0}]])]),s("div",m0,[s("label",{for:`reroll-dice-type-${K}`},"Tipo de Dado",8,h0),oe(s("select",{id:`reroll-dice-type-${K}`,"onUpdate:modelValue":$e=>E.diceType=$e},R[18]||(R[18]=[oo('<option value="4" data-v-179190ef>d4</option><option value="6" data-v-179190ef>d6</option><option value="8" data-v-179190ef>d8</option><option value="10" data-v-179190ef>d10</option><option value="12" data-v-179190ef>d12</option><option value="20" data-v-179190ef>d20</option><option value="100" data-v-179190ef>d100</option>',7)]),8,g0),[[Ht,E.diceType,void 0,{number:!0}]])]),s("div",v0,[s("label",{for:`reroll-min-${K}`},"Mnimo",8,b0),oe(s("input",{id:`reroll-min-${K}`,type:"number","onUpdate:modelValue":$e=>E.min=$e,placeholder:"1",min:"1"},null,8,w0),[[ge,E.min,void 0,{number:!0}]])])])]))),128)),s("button",{onClick:te,class:"btn-add-roll"},R[19]||(R[19]=[s("i",{class:"bi bi-plus-circle"},null,-1),le(" Aadir Dado de Reroll ")]))]),s("div",y0,[s("button",{onClick:ae,class:"btn-save"},[R[21]||(R[21]=s("i",{class:"bi bi-check-circle-fill"},null,-1)),le(" "+W(i.value?"Guardar Cambios":"Crear Ataque"),1)]),s("button",{onClick:B,class:"btn-cancel"},R[22]||(R[22]=[s("i",{class:"bi bi-x-circle-fill"},null,-1),le(" Cancelar ")]))])])])])):we("",!0),l.value?($(),D("div",{key:1,class:"attack-form-overlay",onClick:Ge(C,["self"])},[s("div",C0,[s("div",{class:"attack-form-header"},[R[24]||(R[24]=s("h3",null,[s("i",{class:"bi bi-gear-fill"}),le(" Configuracin de Dao Crtico")],-1)),s("button",{onClick:C,class:"form-close-btn","aria-label":"Cerrar configuracin"},R[23]||(R[23]=[s("i",{class:"bi bi-x-lg"},null,-1)]))]),s("div",x0,[s("div",_0,[R[26]||(R[26]=s("label",{for:"critical-rule"},"Regla de Dao Crtico",-1)),oe(s("select",{id:"critical-rule","onUpdate:modelValue":R[3]||(R[3]=E=>c.rule=E),class:"settings-select"},R[25]||(R[25]=[s("option",{value:"default"},"Regla por Defecto (Duplicar Dados)",-1),s("option",{value:"dad"},"Dao Masivo (DAD)",-1)]),512),[[Ht,c.rule]])]),c.rule==="dad"?($(),D("div",k0,[R[29]||(R[29]=s("label",{for:"character-level"},"Nivel del Personaje",-1)),oe(s("input",{type:"number",id:"character-level","onUpdate:modelValue":R[4]||(R[4]=E=>c.characterLevel=E),min:"1",max:"20",class:"settings-input"},null,512),[[ge,c.characterLevel,void 0,{number:!0}]]),u.value>0?($(),D("div",S0,[R[28]||(R[28]=s("i",{class:"bi bi-lightning-charge-fill"},null,-1)),s("p",null,[R[27]||(R[27]=le("Bonus de dao por crtico: ")),s("strong",null,"+"+W(u.value),1)])])):we("",!0)])):we("",!0),s("div",{class:"form-actions"},[s("button",{onClick:w,class:"btn-save"},R[30]||(R[30]=[s("i",{class:"bi bi-check-circle-fill"},null,-1),le(" Guardar ")])),s("button",{onClick:C,class:"btn-cancel"},R[31]||(R[31]=[s("i",{class:"bi bi-x-circle-fill"},null,-1),le(" Cancelar ")]))])])])])):we("",!0)])])]))}},E0=Tt($0,[["__scopeId","data-v-179190ef"]]),D0={class:"passive-damage-manager-container"},T0={class:"header"},A0={class:"content"},I0={class:"passive-damages-list"},R0={key:0,class:"no-damages"},P0={class:"damage-info"},H0={class:"damage-name"},O0={key:0,class:"duration-tag"},B0={class:"damage-summary"},M0={class:"damage-actions"},L0=["onClick"],N0=["onClick"],V0=["onClick"],j0={class:"new-damage-area"},F0={class:"damage-form"},U0={class:"damage-form-header"},z0={class:"form-group"},q0={class:"form-group"},W0={class:"damage-rolls-section"},K0={class:"damage-roll-inputs"},Y0={class:"form-group-inline"},X0=["onUpdate:modelValue"],G0={class:"form-group-inline"},J0=["onUpdate:modelValue"],Q0={class:"form-group-inline"},Z0=["onUpdate:modelValue"],e2={class:"form-group-inline"},t2=["onUpdate:modelValue"],n2=["value"],o2=["onClick","title"],s2={class:"form-actions"},a2={__name:"PassiveDamageManager",emits:["close"],setup(e,{emit:t}){const n=ma(),o=pe(!1),a=pe(!1),r=dn({id:null,name:"",duration:0,damageRolls:[]});qt(()=>{document.body.style.overflow="hidden",n.loadData()}),io(()=>{document.body.style.overflow=""});const i=w=>{r.id=w.id,r.name=w.name,r.duration=w.duration||0,r.damageRolls.splice(0,r.damageRolls.length,...JSON.parse(JSON.stringify(w.damageRolls||[]))),o.value=!0},l=()=>{a.value=!1,i({id:null,name:"",duration:0,damageRolls:[{numDice:1,diceType:6,bonus:0,type:"bludgeoning"}]})},c=w=>{a.value=!0,i(w)},u=()=>{o.value=!1},p=()=>{r.damageRolls.push({numDice:1,diceType:6,bonus:0,type:"bludgeoning"})},d=w=>{r.damageRolls.splice(w,1)},m=()=>{if(!r.name||r.damageRolls.length===0){xe.fire("Error","El nombre y al menos una tirada de dao son requeridos.","error");return}const w=JSON.parse(JSON.stringify(r));a.value?n.updatePassiveDamage(w):n.addPassiveDamage(w),u()},v=w=>{n.duplicatePassiveDamage(w)},C=w=>{xe.fire({title:"Ests seguro?",text:"No podrs revertir esta accin.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"S, elimnalo!",cancelButtonText:"Cancelar"}).then(g=>{g.isConfirmed&&(n.deletePassiveDamage(w),xe.fire("Eliminado","El dao pasivo ha sido eliminado.","success"))})};return(w,g)=>($(),D("div",{class:"passive-damage-manager-overlay",onClick:g[4]||(g[4]=Ge(S=>w.$emit("close"),["self"]))},[s("div",D0,[s("div",T0,[g[5]||(g[5]=s("h2",null,[s("i",{class:"bi bi-shield-fill-exclamation"}),le(" Gestor de Dao Pasivo")],-1)),s("button",{onClick:g[0]||(g[0]=S=>w.$emit("close")),class:"close-btn"},"")]),s("div",A0,[s("div",I0,[ue(n).passiveDamages.length===0?($(),D("div",R0," No hay daos pasivos configurados. ")):we("",!0),($(!0),D(Le,null,qe(ue(n).passiveDamages,S=>($(),D("div",{key:S.id,class:"damage-item"},[s("div",P0,[s("span",H0,W(S.name),1),S.duration>0?($(),D("span",O0,[g[6]||(g[6]=s("i",{class:"bi bi-hourglass-split"},null,-1)),le(" "+W(S.duration)+" turnos restantes ",1)])):we("",!0),s("div",B0,[($(!0),D(Le,null,qe(S.damageRolls,(L,B)=>($(),D("span",{key:B,class:"damage-tag"},W(L.numDice)+"d"+W(L.diceType)+W(L.bonus>0?"+"+L.bonus:"")+" "+W(L.type),1))),128))])]),s("div",M0,[s("button",{onClick:L=>c(S),class:"action-btn btn-edit"},"Editar",8,L0),s("button",{onClick:L=>v(S.id),class:"action-btn btn-duplicate"},"Duplicar",8,N0),s("button",{onClick:L=>C(S.id),class:"action-btn btn-delete"},"Eliminar",8,V0)])]))),128))]),s("div",j0,[s("button",{onClick:g[1]||(g[1]=S=>l()),class:"btn-new-damage"},g[7]||(g[7]=[s("i",{class:"bi bi-plus-circle-fill"},null,-1),le(" Aadir Dao Pasivo ")]))]),o.value?($(),D("div",{key:0,class:"damage-form-overlay",onClick:Ge(u,["self"])},[s("div",F0,[s("div",U0,[s("h3",null,W(a.value?"Editar Dao Pasivo":"Nuevo Dao Pasivo"),1),s("button",{onClick:u,class:"form-close-btn",title:"Cerrar"},"")]),s("div",z0,[g[8]||(g[8]=s("label",{class:"form-label"},[s("i",{class:"bi bi-tag-fill"}),le(" Nombre ")],-1)),oe(s("input",{type:"text","onUpdate:modelValue":g[2]||(g[2]=S=>r.name=S),placeholder:"Ej: Aura venenosa"},null,512),[[ge,r.name]])]),s("div",q0,[g[9]||(g[9]=s("label",{class:"form-label"},[s("i",{class:"bi bi-hourglass-split"}),le(" Duracin en Turnos "),s("span",{class:"label-hint"},"(0 para infinito)")],-1)),oe(s("input",{type:"number","onUpdate:modelValue":g[3]||(g[3]=S=>r.duration=S),min:"0",placeholder:"0"},null,512),[[ge,r.duration,void 0,{number:!0}]])]),s("div",W0,[g[17]||(g[17]=s("h4",null,[s("i",{class:"bi bi-dice-5-fill"}),le(" Tiradas de Dao")],-1)),($(!0),D(Le,null,qe(r.damageRolls,(S,L)=>($(),D("div",{key:L,class:"damage-roll-item"},[s("div",K0,[s("div",Y0,[g[10]||(g[10]=s("label",{class:"form-label-inline"},[s("i",{class:"bi bi-hash"}),le(" Cantidad ")],-1)),oe(s("input",{type:"number","onUpdate:modelValue":B=>S.numDice=B,min:"1",class:"input-narrow",placeholder:"1"},null,8,X0),[[ge,S.numDice,void 0,{number:!0}]])]),s("div",G0,[g[12]||(g[12]=s("label",{class:"form-label-inline"},[s("i",{class:"bi bi-dice-6"}),le(" Dado ")],-1)),oe(s("select",{"onUpdate:modelValue":B=>S.diceType=B},g[11]||(g[11]=[oo('<option value="4" data-v-20861895>d4</option><option value="6" data-v-20861895>d6</option><option value="8" data-v-20861895>d8</option><option value="10" data-v-20861895>d10</option><option value="12" data-v-20861895>d12</option><option value="20" data-v-20861895>d20</option><option value="100" data-v-20861895>d100</option>',7)]),8,J0),[[Ht,S.diceType,void 0,{number:!0}]])]),s("div",Q0,[g[13]||(g[13]=s("label",{class:"form-label-inline"},[s("i",{class:"bi bi-plus-slash-minus"}),le(" Bonus ")],-1)),oe(s("input",{type:"number","onUpdate:modelValue":B=>S.bonus=B,placeholder:"0"},null,8,Z0),[[ge,S.bonus,void 0,{number:!0}]])]),s("div",e2,[g[14]||(g[14]=s("label",{class:"form-label-inline"},[s("i",{class:"bi bi-fire"}),le(" Tipo ")],-1)),oe(s("select",{"onUpdate:modelValue":B=>S.type=B},[($(!0),D(Le,null,qe(ue(ko),B=>($(),D("option",{key:B.id,value:B.id},W(B.name),9,n2))),128))],8,t2),[[Ht,S.type]])])]),s("button",{onClick:B=>d(L),class:"btn-remove-roll",title:"Eliminar tirada "+(L+1)},g[15]||(g[15]=[s("i",{class:"bi bi-trash-fill"},null,-1)]),8,o2)]))),128)),s("button",{onClick:p,class:"btn-add-roll"},g[16]||(g[16]=[s("i",{class:"bi bi-plus-circle"},null,-1),le(" Aadir tipo de dao ")]))]),s("div",s2,[s("button",{onClick:m,class:"btn-save"},[g[18]||(g[18]=s("i",{class:"bi bi-check-circle-fill"},null,-1)),le(" "+W(a.value?"Guardar Cambios":"Crear"),1)]),s("button",{onClick:u,class:"btn-cancel"},g[19]||(g[19]=[s("i",{class:"bi bi-x-circle-fill"},null,-1),le(" Cancelar ")]))])])])):we("",!0)])])]))}},r2=Tt(a2,[["__scopeId","data-v-20861895"]]),i2={class:"character-view-container fade-in"},l2={class:"character-header"},c2={key:0,class:"character-state-display"},u2=["src"],d2={class:"character-name"},f2={class:"state-title-display"},p2={key:1,class:"character-name"},m2={class:"turn-info"},h2={class:"turn-number"},g2={class:"health-section"},v2={class:"health-header"},b2={class:"health-stats"},w2={class:"current-hp"},y2={class:"max-hp"},C2={key:0,class:"necro-indicator",title:"HP mximo reducido por dao necro"},x2={class:"health-bar-container"},_2={class:"health-bar"},k2={class:"health-percentage"},S2={key:0,class:"necro-info"},$2={class:"necro-text"},E2={key:0,class:"temp-health-section"},D2={class:"temp-health-header"},T2={class:"temp-hp-value"},A2={class:"temp-health-bar-container"},I2={class:"temp-health-bar"},R2={key:1,class:"regeneration-info"},P2={class:"regeneration-text"},H2={class:"mt-8 grid grid-cols-1 md:grid-cols-2 gap-8 mb-2 custom-fold-row"},O2={key:0},B2={key:1},M2={key:0},L2={key:1},N2={class:"action-buttons"},V2=["disabled"],j2=["disabled"],F2=["disabled"],U2=["disabled"],z2=["disabled"],q2=["disabled"],W2={class:"secondary-actions"},K2={key:0,class:"state-selector-wrapper"},Y2={key:0},X2={key:1},G2={class:"state-selector-navigation"},J2=["disabled"],Q2={class:"state-indicators"},Z2=["onClick"],eC={class:"state-preview"},tC=["src","alt"],nC={key:1,class:"state-preview-placeholder"},oC={class:"state-preview-title"},sC=["disabled"],aC={__name:"CharacterView",setup(e){const t=js(),n=Eo(),o=Us(),a=Fs();yt();const r=pe({}),i=Je(()=>a.selectedState&&a.selectedState.image?r.value[a.selectedState.id]:null),l=async()=>{console.log("Cargando imgenes de estados en CharacterView"),console.log("stateStore.states:",a.states),r.value={};for(const z of a.states)if(console.log(`Procesando estado ${z.id}:`,z),z.image)try{console.log(`Buscando imagen en localforage para ${z.id} (image key: ${z.image})`);const M=await a.getStateImage(z.image);if(console.log("getStateImage retorn:",M),M){const Y=URL.createObjectURL(M);r.value[z.id]=Y,console.log(` Imagen cargada para estado ${z.id}, URL: ${Y}`)}else console.log(` No se encontr blob para ${z.id}`)}catch(M){console.error(`Error cargando imagen para estado ${z.id}:`,M)}else console.log(`Estado ${z.id} no tiene propiedad image o es null`);console.log("stateImageUrls final:",r.value)},c=z=>{a.setSelectedState(z)},u=()=>{const z=a.states.findIndex(M=>M.id===a.selectedStateId);z>0?a.setSelectedState(a.states[z-1].id):a.setSelectedState(a.states[a.states.length-1].id)},p=()=>{const z=a.states.findIndex(M=>M.id===a.selectedStateId);z<a.states.length-1?a.setSelectedState(a.states[z+1].id):a.setSelectedState(a.states[0].id)},d=pe(!1),m=pe(!1),v=pe(!1),C=pe(!1),w=pe(!0);function g(){try{const z=localStorage.getItem("dnd-character-folds");if(z){const M=JSON.parse(z);v.value=!!M.countersFolded,C.value=!!M.statesFolded,w.value=M.stateSelectorFolded!==void 0?!!M.stateSelectorFolded:!0}}catch{}}function S(){localStorage.setItem("dnd-character-folds",JSON.stringify({countersFolded:v.value,statesFolded:C.value,stateSelectorFolded:w.value}))}function L(){v.value=!v.value,S()}function B(){C.value=!C.value,S()}function V(){w.value=!w.value,S()}qt(async()=>{n.loadData(),o.loadData(),await a.loadData(),await l(),g(),n.character.isConfigured||t.push("/config")}),cn(()=>a.states,async z=>{console.log("Estados cambiados, recargando imgenes"),await l()},{deep:!0});const T=()=>{const z=n.startTurn();if(z){const{totalDamage:M,damageDetails:Y}=z,U=Y.map(ce=>`<li style="margin-bottom: 8px; color: #ecf0f1; font-size: 1rem;">
        <strong style="color: #f39c12;">${ce.name}:</strong> ${ce.damage} de dao (${ce.details})
      </li>`).join("");xe.fire({title:'<span style="color: #e74c3c;">Dao Pasivo Recibido</span>',html:`
        <div style="text-align: left; padding: 10px;">
          <p style="font-size: 1.2rem; margin-bottom: 15px; color: #ecf0f1;">
            Dao total: <strong style="color: #e74c3c; font-size: 1.5rem;">${M}</strong>
          </p>
          <ul style="list-style-type: none; padding-left: 0;">
            ${U}
          </ul>
        </div>
      `,icon:"warning",confirmButtonText:"Aceptar",customClass:{popup:"dnd-modal-popup",title:"dnd-modal-title",htmlContainer:"dnd-modal-content",confirmButton:"dnd-confirm-btn"},background:"#1a1a1a",color:"#ffffff"}).then(()=>{n.applyPassiveDamage(M,Y)})}},te=()=>{n.endTurn()},ee=()=>{xe.fire({title:"Curar Personaje",input:"number",inputLabel:"Cantidad de HP a curar",inputPlaceholder:"Ej: 10",inputAttributes:{min:"1",max:n.character.maxHp-n.character.currentHp},showCancelButton:!0,confirmButtonText:"Curar",cancelButtonText:"Cancelar",inputValidator:z=>{if(!z||z<=0)return"Debes ingresar un nmero vlido";if(z>n.character.maxHp-n.character.currentHp)return`No puedes curar ms all del mximo (${n.character.maxHp-n.character.currentHp} HP)`}}).then(z=>{if(z.isConfirmed){const M=parseInt(z.value);n.heal(M)}})},ae=()=>{xe.fire({title:"Agregar Vida Temporal",input:"number",inputLabel:"Cantidad de HP temporal",inputPlaceholder:"Ej: 15",inputAttributes:{min:"1",max:"999"},showCancelButton:!0,confirmButtonText:"Agregar",cancelButtonText:"Cancelar",inputValidator:z=>{if(!z||z<=0)return"Debes ingresar un nmero vlido"}}).then(z=>{if(z.isConfirmed){const M=parseInt(z.value);n.addTempHp(M)}})},j=()=>{xe.fire({title:"Recibir Dao",html:`
      <div style="margin-bottom: 20px;display: flex;flex-direction: column;align-items: center;">
        <input id="damage-amount" type="number" placeholder="Ej: 25" min="1" max="999" class="swal2-input" style="width: 100%; margin-bottom: 15px;">
        <div style="text-align: left;">
          <label style="display: flex; align-items: center; gap: 8px; cursor: pointer; user-select: none;">
            <input id="necro-damage" type="checkbox" style="width: 16px; height: 16px; accent-color: #e74c3c;">
            <span style="color: #e74c3c; font-weight: 500; text-transform: uppercase; letter-spacing: 0.5px;">Dao Necro</span>
            <span style="color: #7f8c8d; font-size: 0.8rem; cursor: help;" title="El dao necro reduce permanentemente el HP mximo hasta que se restaure. Afecta tanto a la vida temporal como a la vida actual."></span>
          </label>
        </div>
      </div>
    `,showCancelButton:!0,confirmButtonText:"Recibir Dao",cancelButtonText:"Cancelar",preConfirm:()=>{const z=document.getElementById("damage-amount").value,M=document.getElementById("necro-damage").checked;return!z||z<=0?(xe.showValidationMessage("Debes ingresar un nmero vlido"),!1):{amount:parseInt(z),isNecroDamage:M}}}).then(z=>{if(z.isConfirmed){const{amount:M,isNecroDamage:Y}=z.value;n.takeDamage(M,Y)}})},H=()=>{xe.fire({title:"Dao Resistente",html:`
      <div style="margin-bottom: 20px;display: flex;flex-direction: column;align-items: center;">
        <input id="resistant-damage-amount" type="number" placeholder="Ej: 20" min="1" max="999" class="swal2-input" style="width: 100%; margin-bottom: 15px;">
        <div style="text-align: left;">
          <label style="display: flex; align-items: center; gap: 8px; cursor: pointer; user-select: none;">
            <input id="necro-resistant-damage" type="checkbox" style="width: 16px; height: 16px; accent-color: #e74c3c;">
            <span style="color: #e74c3c; font-weight: 500; text-transform: uppercase; letter-spacing: 0.5px;">Dao Necro</span>
            <span style="color: #7f8c8d; font-size: 0.8rem; cursor: help;" title="El dao necro reduce permanentemente el HP mximo hasta que se restaure. Afecta tanto a la vida temporal como a la vida actual."></span>
          </label>
        </div>
      </div>
    `,showCancelButton:!0,confirmButtonText:"Aplicar Dao",cancelButtonText:"Cancelar",preConfirm:()=>{const z=document.getElementById("resistant-damage-amount").value,M=document.getElementById("necro-resistant-damage").checked;return!z||z<=0?(xe.showValidationMessage("Debes ingresar un nmero vlido"),!1):{amount:parseInt(z),isNecroDamage:M}}}).then(z=>{if(z.isConfirmed){const{amount:M,isNecroDamage:Y}=z.value,U=Math.floor(M/2);n.takeDamage(U,Y)}})},N=()=>{xe.fire({title:"Resetear HP?",text:"Quieres restaurar la vida al mximo y eliminar la vida temporal?",icon:"question",showCancelButton:!0,confirmButtonText:"S, resetear",cancelButtonText:"Cancelar"}).then(z=>{z.isConfirmed&&n.resetToMaxHp()})},R=async()=>{if(n.character.maxHp<n.character.originalMaxHp){const M=n.character.maxHp;n.character.maxHp=n.character.originalMaxHp,n.addLog("Restaurar HP Mximo",`HP mximo restaurado de ${M} a ${n.character.originalMaxHp} (dao necro revertido)`),n.saveToLocalStorage()}const{value:z}=await xe.fire({title:`
      <div style="display:flex;align-items:center;justify-content:center;gap:12px;margin-bottom:8px;">
        <i class="bi bi-magic" style="color:#d4af37;font-size:1.4em;"></i>
        <span>Ritual de Resurreccin</span>
        <i class="bi bi-magic" style="color:#d4af37;font-size:1.4em;"></i>
      </div>
    `,html:`
      <div style="background: linear-gradient(135deg, #2c1810 0%, #1a0f0a 100%); 
                  border: 2px solid #d4af37; 
                  border-radius: 12px; 
                  padding: 20px; 
                  margin: 10px 0;
                  box-shadow: inset 0 0 20px rgba(212, 175, 55, 0.1);">
        <div style="text-align: center; margin-bottom: 16px;">
          <div style="color: #f39c12; font-size: 1.2em; font-weight: 700; text-shadow: 2px 2px 4px rgba(0,0,0,0.7);">
            ${n.character.name}
          </div>
          <div style="color: #bbb; font-size: 0.9em; margin-top: 4px;">
            Elige el mtodo de resurreccin
          </div>
        </div>
        <div style="text-align: left; font-size: 1.05em;">
          <!-- Opcin 1: 1 HP -->
          <label style="display: block; background: linear-gradient(90deg, rgba(39, 174, 96, 0.15) 0%, rgba(39, 174, 96, 0.05) 100%); border: 1px solid rgba(39, 174, 96, 0.3); border-radius: 8px; padding: 14px; margin-bottom: 12px; cursor: pointer; transition: all 0.3s ease; position: relative;"
                 onmouseover="this.style.borderColor='rgba(39, 174, 96, 0.6)'; this.style.background='linear-gradient(90deg, rgba(39, 174, 96, 0.25) 0%, rgba(39, 174, 96, 0.08) 100%)'"
                 onmouseout="this.style.borderColor='rgba(39, 174, 96, 0.3)'; this.style.background='linear-gradient(90deg, rgba(39, 174, 96, 0.15) 0%, rgba(39, 174, 96, 0.05) 100%)'">
            <div style="display: flex; align-items: center; gap: 10px;">
              <input type="radio" name="reviveOption" value="1" checked style="accent-color: #27ae60; transform: scale(1.2);">
              <i class="bi bi-heart" style="color: #27ae60; font-size: 1.1em;"></i>
              <div>
                <div style="color: #27ae60; font-weight: 700; font-size: 1.05em;">Resurreccin Bsica</div>
                <div style="color: #aaa; font-size: 0.9em;">Revive con 1 punto de vida</div>
              </div>
            </div>
          </label>
          <!-- Opcin 2: Media vida -->
          <label style="display: block; background: linear-gradient(90deg, rgba(243, 156, 18, 0.15) 0%, rgba(243, 156, 18, 0.05) 100%); border: 1px solid rgba(243, 156, 18, 0.3); border-radius: 8px; padding: 14px; margin-bottom: 12px; cursor: pointer; transition: all 0.3s ease;"
                 onmouseover="this.style.borderColor='rgba(243, 156, 18, 0.6)'; this.style.background='linear-gradient(90deg, rgba(243, 156, 18, 0.25) 0%, rgba(243, 156, 18, 0.08) 100%)'"
                 onmouseout="this.style.borderColor='rgba(243, 156, 18, 0.3)'; this.style.background='linear-gradient(90deg, rgba(243, 156, 18, 0.15) 0%, rgba(243, 156, 18, 0.05) 100%)'">
            <div style="display: flex; align-items: center; gap: 10px;">
              <input type="radio" name="reviveOption" value="half" style="accent-color: #f39c12; transform: scale(1.2);">
              <i class="bi bi-heart-half" style="color: #f39c12; font-size: 1.1em;"></i>
              <div>
                <div style="color: #f39c12; font-weight: 700; font-size: 1.05em;">Resurreccin Mejorada</div>
                <div style="color: #aaa; font-size: 0.9em;">Revive con ${Math.floor(n.character.maxHp/2)} HP (50% vida mxima)</div>
              </div>
            </div>
          </label>
          <!-- Opcin 3: Personalizada -->
          <label style="display: block; background: linear-gradient(90deg, rgba(155, 89, 182, 0.15) 0%, rgba(155, 89, 182, 0.05) 100%); border: 1px solid rgba(155, 89, 182, 0.3); border-radius: 8px; padding: 14px; margin-bottom: 16px; cursor: pointer; transition: all 0.3s ease;"
                 onmouseover="this.style.borderColor='rgba(155, 89, 182, 0.6)'; this.style.background='linear-gradient(90deg, rgba(155, 89, 182, 0.25) 0%, rgba(155, 89, 182, 0.08) 100%)'"
                 onmouseout="this.style.borderColor='rgba(155, 89, 182, 0.3)'; this.style.background='linear-gradient(90deg, rgba(155, 89, 182, 0.15) 0%, rgba(155, 89, 182, 0.05) 100%)'">
            <div style="display: flex; align-items: flex-start; gap: 10px;">
              <input type="radio" name="reviveOption" value="custom" style="accent-color: #9b59b6; transform: scale(1.2); margin-top: 2px;">
              <i class="bi bi-gear-fill" style="color: #9b59b6; font-size: 1.1em; margin-top: 2px;"></i>
              <div style="flex: 1;">
                <div style="color: #9b59b6; font-weight: 700; font-size: 1.05em; margin-bottom: 8px;">Resurreccin Personalizada</div>
                <input id="customHpInput" type="number" min="1" max="${n.character.maxHp}" placeholder="Cantidad de HP" disabled style="width: 100%; background: rgba(0,0,0,0.3); border: 1px solid rgba(155, 89, 182, 0.4); border-radius: 6px; padding: 8px 12px; color: #fff; font-size: 0.95em; transition: all 0.3s ease;" onfocus="this.style.borderColor='#9b59b6'; this.style.boxShadow='0 0 8px rgba(155, 89, 182, 0.3)'" onblur="this.style.borderColor='rgba(155, 89, 182, 0.4)'; this.style.boxShadow='none'">
                <div style="color: #aaa; font-size: 0.85em; margin-top: 4px;">Especifica la cantidad exacta de HP</div>
              </div>
            </div>
          </label>
        </div>
        <div style="background: rgba(52, 152, 219, 0.1); border: 1px solid rgba(52, 152, 219, 0.3); border-radius: 6px; padding: 12px; text-align: center;">
          <i class="bi bi-info-circle-fill" style="color: #3498db; margin-right: 8px;"></i>
          <span style="color: #bbb; font-size: 0.9em;">Vida mxima actual: <strong style="color: #3498db;">${n.character.maxHp} HP</strong></span>
        </div>
      </div>
    `,customClass:{popup:"dnd-modal-popup",title:"dnd-modal-title",htmlContainer:"dnd-modal-content",confirmButton:"dnd-confirm-btn",cancelButton:"dnd-cancel-btn"},showCancelButton:!0,confirmButtonText:`
      <i class="bi bi-magic" style="margin-right: 8px; color: #d4af37;"></i>
      Realizar Ritual
    `,cancelButtonText:`
      <i class="bi bi-x-circle" style="margin-right: 6px;"></i>
      Cancelar
    `,background:"#1a1a1a",color:"#ffffff",preConfirm:()=>{const M=document.querySelector('input[name="reviveOption"]:checked').value;if(M==="custom"){const Y=parseInt(document.getElementById("customHpInput").value);return isNaN(Y)||Y<1||Y>n.character.maxHp?(xe.showValidationMessage(`Introduce un valor entre 1 y ${n.character.maxHp}`),!1):Y}return M==="half"?Math.floor(n.character.maxHp/2):1},didOpen:()=>{const M=document.createElement("style");M.textContent=`
        .dnd-modal-popup {
          background: linear-gradient(145deg, #2c2c2c 0%, #1a1a1a 100%) !important;
          border: 2px solid #d4af37 !important;
          border-radius: 16px !important;
          box-shadow: 0 20px 40px rgba(0, 0, 0, 0.7), 0 0 30px rgba(212, 175, 55, 0.2) !important;
        }
        .dnd-modal-title {
          color: #d4af37 !important;
          text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8) !important;
          font-weight: 700 !important;
          font-size: 1.4em !important;
        }
        .dnd-confirm-btn {
          background: linear-gradient(135deg, #d4af37 0%, #b8941f 100%) !important;
          color: #1a1a1a !important;
          border: none !important;
          padding: 12px 24px !important;
          border-radius: 8px !important;
          font-weight: 600 !important;
          font-size: 1.05em !important;
          transition: all 0.3s ease !important;
          box-shadow: 0 4px 12px rgba(212, 175, 55, 0.3) !important;
        }
        .dnd-confirm-btn:hover {
          background: linear-gradient(135deg, #e6c451 0%, #d4af37 100%) !important;
          transform: translateY(-2px) !important;
          box-shadow: 0 6px 16px rgba(212, 175, 55, 0.4) !important;
        }
        .dnd-cancel-btn {
          background: linear-gradient(135deg, #555 0%, #333 100%) !important;
          color: #fff !important;
          border: 1px solid #666 !important;
          padding: 12px 24px !important;
          border-radius: 8px !important;
          font-weight: 500 !important;
          transition: all 0.3s ease !important;
        }
        .dnd-cancel-btn:hover {
          background: linear-gradient(135deg, #666 0%, #444 100%) !important;
          border-color: #777 !important;
          transform: translateY(-1px) !important;
        }
        .swal2-actions {
          gap: 16px !important;
          margin-top: 24px !important;
        }
      `,document.head.appendChild(M);const Y=xe.getHtmlContainer().querySelectorAll('input[name="reviveOption"]'),U=xe.getHtmlContainer().querySelector("#customHpInput");Y.forEach(ce=>{ce.addEventListener("change",()=>{ce.value==="custom"?(U.disabled=!1,U.focus()):U.disabled=!0})})}});z&&z>0&&n.revive(z)},E=()=>{xe.fire({title:"Resetear Turno?",text:"Quieres volver al turno 0?",icon:"question",showCancelButton:!0,confirmButtonText:"S, resetear",cancelButtonText:"Cancelar"}).then(z=>{z.isConfirmed&&n.resetTurn()})},K=()=>{t.push("/config")},$e=()=>{t.push("/logs")},se=()=>{xe.fire({title:"Descanso Largo",text:"Quieres restaurar la vida al mximo, reiniciar el turno y recargar contadores?",icon:"question",showCancelButton:!0,confirmButtonText:"S, descansar",cancelButtonText:"Cancelar"}).then(z=>{z.isConfirmed&&(n.resetToMaxHp(),n.resetTurn(),o.regenerateCountersByRest("long"))})},Z=()=>{xe.fire({title:"Descanso Corto",text:"Quieres reiniciar el contador de turnos y recargar contadores? (La vida no se restaura)",icon:"question",showCancelButton:!0,confirmButtonText:"S, reiniciar turnos",cancelButtonText:"Cancelar"}).then(z=>{z.isConfirmed&&(n.resetTurn(),o.regenerateCountersByRest("short"))})},Ee=()=>{const z=n.character.originalMaxHp-n.character.maxHp;xe.fire({title:"Curar Dao Necro",html:`
      <div style="margin-bottom: 20px;">
        <p style="margin-bottom: 15px; color: #ecf0f1;">Dao necro acumulado: <strong style="color: #e74c3c;">${z} HP</strong></p>
        <input id="heal-necro-amount" type="number" placeholder="Cantidad a curar" min="1" max="${z}" value="1" class="swal2-input" style="width: 100%; margin-bottom: 15px;">
        <div style="text-align: left; background: rgba(231, 76, 60, 0.2); padding: 12px; border-radius: 8px; border: 1px solid rgba(231, 76, 60, 0.3);">
          <p style="margin: 0; color: #e74c3c; font-size: 0.9rem;">
            <strong>Qu hace esta accin?</strong><br>
            - Aumenta tu HP mximo en la cantidad especificada<br>
            - Cura tu HP actual en la misma cantidad
          </p>
        </div>
      </div>
    `,showCancelButton:!0,confirmButtonText:"Curar",cancelButtonText:"Cancelar",preConfirm:()=>{const M=document.getElementById("heal-necro-amount").value;if(!M||M<=0)return xe.showValidationMessage("Debes ingresar un nmero vlido"),!1;const Y=parseInt(M);return Y>z?(xe.showValidationMessage(`No puedes curar ms dao necro del acumulado (${z} HP)`),!1):{amount:Y}}}).then(M=>{if(M.isConfirmed){const{amount:Y}=M.value;je(Y)}})},je=z=>{const M=n.character.maxHp,Y=n.character.currentHp;n.character.maxHp=Math.min(n.character.originalMaxHp,n.character.maxHp+z),n.character.currentHp=Math.min(n.character.maxHp,n.character.currentHp+z),n.addLog("Curar Dao Necro",`HP mximo restaurado: +${n.character.maxHp-M} (${M}  ${n.character.maxHp}) | HP actual curado: +${n.character.currentHp-Y} (${Y}  ${n.character.currentHp})`),n.saveToLocalStorage(),xe.fire({icon:"success",title:"Dao Necro Curado",text:`Has curado ${z} puntos de dao necro`,timer:2e3,showConfirmButton:!1})};return(z,M)=>($(),D("div",i2,[s("div",l2,[ue(a).selectedState?($(),D("div",c2,[i.value?($(),D("img",{key:0,src:i.value,alt:"Estado del personaje",class:"state-image-display"},null,8,u2)):we("",!0),s("h1",d2,W(ue(n).character.name),1),s("span",f2,W(ue(a).selectedState.title),1)])):($(),D("h1",p2,W(ue(n).character.name),1)),s("div",m2,[M[4]||(M[4]=s("span",{class:"turn-label"},"Turno:",-1)),s("span",h2,W(ue(n).turn.current),1)])]),s("div",g2,[s("div",v2,[M[6]||(M[6]=s("h2",null,"Puntos de Vida",-1)),s("div",b2,[s("span",w2,W(ue(n).character.currentHp),1),M[5]||(M[5]=s("span",{class:"separator"},"/",-1)),s("span",y2,W(ue(n).character.maxHp),1),ue(n).character.maxHp<ue(n).character.originalMaxHp?($(),D("span",C2,"  ")):we("",!0)])]),s("div",x2,[s("div",_2,[s("div",{class:rt(["health-fill",ue(n).hasTempHp?"temp-hp":ue(n).hpBarColor]),style:kn({width:`${ue(n).hpPercentage}%`})},null,6),ue(n).character.maxHp<ue(n).character.originalMaxHp?($(),D("div",{key:0,class:"necro-bar-indicator",style:kn({left:`${ue(n).character.maxHp/ue(n).character.originalMaxHp*100}%`}),title:"HP mximo reducido por dao necro"},null,4)):we("",!0)]),s("div",k2,W(Math.round(ue(n).hpPercentage))+"%",1)]),ue(n).character.maxHp<ue(n).character.originalMaxHp?($(),D("div",S2,[M[7]||(M[7]=s("span",{class:"necro-icon"},"",-1)),s("span",$2,"HP mximo reducido por dao necro: "+W(ue(n).character.maxHp)+" / "+W(ue(n).character.originalMaxHp),1)])):we("",!0)]),ue(n).hasTempHp?($(),D("div",E2,[s("div",D2,[M[8]||(M[8]=s("h3",null,"Vida Temporal",-1)),s("span",T2,W(ue(n).character.tempHp),1)]),s("div",A2,[s("div",I2,[s("div",{class:"temp-health-fill",style:kn({width:`${ue(n).tempHpPercentage}%`})},null,4)])])])):we("",!0),ue(n).character.regeneration>0?($(),D("div",R2,[M[9]||(M[9]=s("span",{class:"regeneration-icon"},"",-1)),s("span",P2,"Regeneracin: +"+W(ue(n).character.regeneration)+" HP/turno",1)])):we("",!0),s("div",H2,[s("div",null,[s("button",{onClick:L,class:"fold-btn"},[v.value?($(),D("span",O2," Mostrar Contadores")):($(),D("span",B2," Ocultar Contadores"))]),oe(s("div",null,[ft(_w)],512),[[xr,!v.value]])]),s("div",null,[s("button",{onClick:B,class:"fold-btn"},[C.value?($(),D("span",M2," Mostrar Estados")):($(),D("span",L2," Ocultar Estados"))]),oe(s("div",null,[ft(jw)],512),[[xr,!C.value]])])]),s("div",N2,[ue(n).turn.isActive?($(),D("button",{key:1,onClick:te,class:"action-btn btn-end-turn"},M[11]||(M[11]=[s("span",{class:"btn-icon"},"",-1),s("span",{class:"btn-text"},"Finalizar Turno",-1)]))):($(),D("button",{key:0,onClick:T,class:"action-btn btn-start-turn"},M[10]||(M[10]=[s("span",{class:"btn-icon"},"",-1),s("span",{class:"btn-text"},"Iniciar Turno",-1)]))),s("button",{onClick:ee,class:"action-btn btn-heal",disabled:!ue(n).isAlive||ue(n).character.currentHp>=ue(n).character.maxHp},M[12]||(M[12]=[s("span",{class:"btn-icon"},"",-1),s("span",{class:"btn-text"},"Curar",-1)]),8,V2),s("button",{onClick:ae,class:"action-btn btn-temp-hp",disabled:!ue(n).isAlive},M[13]||(M[13]=[s("span",{class:"btn-icon"},"",-1),s("span",{class:"btn-text"},"Vida Temporal",-1)]),8,j2),s("button",{onClick:j,class:"action-btn btn-damage",disabled:!ue(n).isAlive},M[14]||(M[14]=[s("span",{class:"btn-icon"},"",-1),s("span",{class:"btn-text"},"Recibir Dao",-1)]),8,F2),s("button",{onClick:H,class:"action-btn btn-resistant-damage",disabled:!ue(n).isAlive},M[15]||(M[15]=[s("span",{class:"btn-icon"},[s("i",{"data-v-6dd7d5c6":"",class:"bi bi-shield-slash"})],-1),s("span",{class:"btn-text"},"Dao Resistente",-1)]),8,U2),ue(n).character.maxHp<ue(n).character.originalMaxHp?($(),D("button",{key:2,onClick:Ee,class:"action-btn btn-restore-max",title:"Curar una cantidad especfica de dao necro"},M[16]||(M[16]=[s("span",{class:"btn-icon"},"",-1),s("span",{class:"btn-text"},"Curar Dao Necro",-1)]))):we("",!0),s("button",{onClick:M[0]||(M[0]=Y=>d.value=!0),class:"action-btn btn-attack-manager",disabled:!ue(n).isAlive},M[17]||(M[17]=[s("span",{class:"btn-icon"},"",-1),s("span",{class:"btn-text"},"Gestor de Ataques",-1)]),8,z2),s("button",{onClick:M[1]||(M[1]=Y=>m.value=!0),class:"action-btn btn-passive-damage-manager",disabled:!ue(n).isAlive},M[18]||(M[18]=[s("span",{class:"btn-icon"},"",-1),s("span",{class:"btn-text"},"Dao Pasivo",-1)]),8,q2)]),d.value?($(),On(E0,{key:2,onClose:M[2]||(M[2]=Y=>d.value=!1)})):we("",!0),m.value?($(),On(r2,{key:3,onClose:M[3]||(M[3]=Y=>m.value=!1)})):we("",!0),s("div",W2,[s("button",{onClick:se,class:"secondary-btn btn-long-rest"},M[19]||(M[19]=[s("span",{class:"btn-icon"},"",-1),s("span",{class:"btn-text"},"Descanso Largo",-1)])),s("button",{onClick:Z,class:"secondary-btn btn-short-rest"},M[20]||(M[20]=[s("span",{class:"btn-icon"},"",-1),s("span",{class:"btn-text"},"Descanso Corto",-1)])),ue(a).selectedState?($(),D("div",K2,[s("button",{onClick:V,class:"state-selector-fold-btn"},[w.value?($(),D("span",Y2," Mostrar Selector de Estados")):($(),D("span",X2," Ocultar Selector de Estados"))]),oe(s("div",G2,[s("button",{onClick:u,class:"state-nav-btn state-nav-prev",disabled:ue(a).states.length<=1,title:"Estado anterior"},M[21]||(M[21]=[s("span",null,"",-1)]),8,J2),s("div",Q2,[($(!0),D(Le,null,qe(ue(a).states,Y=>($(),D("button",{key:Y.id,onClick:U=>c(Y.id),class:rt(["state-indicator",{active:Y.id===ue(a).selectedStateId}])},[s("div",eC,[r.value[Y.id]?($(),D("img",{key:0,src:r.value[Y.id],alt:Y.title,class:"state-preview-image"},null,8,tC)):($(),D("div",nC,M[22]||(M[22]=[s("span",null,"",-1)])))]),s("span",oC,W(Y.title),1)],10,Z2))),128))]),s("button",{onClick:p,class:"state-nav-btn state-nav-next",disabled:ue(a).states.length<=1,title:"Estado siguiente"},M[23]||(M[23]=[s("span",null,"",-1)]),8,sC)],512),[[xr,!w.value]])])):we("",!0),s("button",{onClick:N,class:"secondary-btn btn-reset"},M[24]||(M[24]=[s("span",{class:"btn-icon"},"",-1),s("span",{class:"btn-text"},"Resetear HP",-1)])),ue(n).isAlive?we("",!0):($(),D("button",{key:1,onClick:R,class:"secondary-btn btn-revive"},M[25]||(M[25]=[s("span",{class:"btn-icon"},"",-1),s("span",{class:"btn-text"},"Revivir",-1)]))),s("button",{onClick:E,class:"secondary-btn btn-reset-turn"},M[26]||(M[26]=[s("span",{class:"btn-icon"},"",-1),s("span",{class:"btn-text"},"Resetear Turno",-1)])),s("button",{onClick:$e,class:"secondary-btn btn-logs"},M[27]||(M[27]=[s("span",{class:"btn-icon"},"",-1),s("span",{class:"btn-text"},"Ver Historial",-1)])),s("button",{onClick:K,class:"secondary-btn btn-config"},M[28]||(M[28]=[s("span",{class:"btn-icon"},"",-1),s("span",{class:"btn-text"},"Configuracin",-1)]))])]))}},rC=Tt(aC,[["__scopeId","data-v-ed302062"]]),iC={class:"logs-view-container fade-in"},lC={class:"logs-header"},cC={class:"logs-stats"},uC={class:"stats-item"},dC={class:"stats-value"},fC={class:"stats-item"},pC={class:"stats-value"},mC={class:"logs-filters"},hC={class:"filter-group"},gC={class:"filter-group"},vC=["value"],bC={class:"logs-content"},wC={key:0,class:"no-logs"},yC={key:1,class:"logs-list"},CC={class:"turn-header"},xC={class:"turn-title"},_C={class:"turn-count"},kC={class:"turn-logs"},SC={class:"log-header"},$C={class:"log-action"},EC={class:"action-icon"},DC={class:"action-name"},TC={class:"log-time"},AC={class:"log-details"},IC={class:"log-description"},RC={key:0,class:"hp-changes"},PC={key:0,class:"hp-change"},HC={key:1,class:"hp-change"},OC={__name:"LogsView",setup(e){const t=js(),n=Eo(),o=pe(""),a=pe("");qt(()=>{n.loadData(),n.character.isConfigured||t.push("/config")});const r=Je(()=>Object.keys(n.logsByTurn).map(Number).sort((g,S)=>S-g)),i=Je(()=>{let w=n.logs;return o.value&&(w=w.filter(g=>g.action===o.value)),a.value!==""&&(w=w.filter(g=>g.turn===a.value)),w}),l=Je(()=>{const w={};return i.value.forEach(g=>{w[g.turn]||(w[g.turn]=[]),w[g.turn].push(g)}),Object.fromEntries(Object.entries(w).sort(([g],[S])=>Number(S)-Number(g)))}),c=()=>{o.value="",a.value=""},u=w=>({"Inicio de Turno":"log-turn-start","Fin de Turno":"log-turn-end",Curacin:"log-heal","Regeneracin Automtica":"log-regen","Vida Temporal":"log-temp","Dao Recibido":"log-damage","Reset HP":"log-reset","Reset Turno":"log-reset-turn",Configuracin:"log-config"})[w]||"log-default",p=w=>({"Inicio de Turno":"","Fin de Turno":"",Curacin:"","Regeneracin Automtica":"","Vida Temporal":"","Dao Recibido":"","Reset HP":"","Reset Turno":"",Configuracin:""})[w]||"",d=(w,g)=>g>w?"hp-increase":g<w?"hp-decrease":"hp-no-change",m=()=>{const w=n.logs.map(B=>`[${B.timestamp}] Turno ${B.turn} - ${B.action}: ${B.details}`).join(`
`),g=new Blob([w],{type:"text/plain"}),S=URL.createObjectURL(g),L=document.createElement("a");L.href=S,L.download=`dnd-logs-${n.character.name}-${new Date().toISOString().split("T")[0]}.txt`,document.body.appendChild(L),L.click(),document.body.removeChild(L),URL.revokeObjectURL(S),xe.fire({icon:"success",title:"Logs Exportados",text:"Los logs se han descargado correctamente",timer:2e3,showConfirmButton:!1})},v=()=>{t.push("/character")},C=()=>{xe.fire({title:"Limpiar todos los logs?",text:"Esta accin eliminar todo el historial de logs. Esta accin no se puede deshacer.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"S, limpiar logs",cancelButtonText:"Cancelar"}).then(w=>{w.isConfirmed&&(n.clearAllLogs(),xe.fire({icon:"success",title:"Logs Limpiados",text:"Todos los logs han sido eliminados correctamente",timer:2e3,showConfirmButton:!1}))})};return(w,g)=>($(),D("div",iC,[s("div",lC,[g[4]||(g[4]=s("h1",{class:"logs-title"}," Historial de Acciones",-1)),s("div",cC,[s("span",uC,[g[2]||(g[2]=s("span",{class:"stats-label"},"Total de Acciones:",-1)),s("span",dC,W(ue(n).logs.length),1)]),s("span",fC,[g[3]||(g[3]=s("span",{class:"stats-label"},"Turnos Registrados:",-1)),s("span",pC,W(Object.keys(ue(n).logsByTurn).length),1)])])]),s("div",mC,[s("div",hC,[g[6]||(g[6]=s("label",{for:"actionFilter",class:"filter-label"},"Filtrar por Accin:",-1)),oe(s("select",{id:"actionFilter","onUpdate:modelValue":g[0]||(g[0]=S=>o.value=S),class:"filter-select"},g[5]||(g[5]=[oo('<option value="" data-v-e48a34f0>Todas las acciones</option><option value="Inicio de Turno" data-v-e48a34f0>Inicio de Turno</option><option value="Fin de Turno" data-v-e48a34f0>Fin de Turno</option><option value="Curacin" data-v-e48a34f0>Curacin</option><option value="Regeneracin Automtica" data-v-e48a34f0>Regeneracin Automtica</option><option value="Vida Temporal" data-v-e48a34f0>Vida Temporal</option><option value="Dao Recibido" data-v-e48a34f0>Dao Recibido</option><option value="Reset HP" data-v-e48a34f0>Reset HP</option><option value="Reset Turno" data-v-e48a34f0>Reset Turno</option><option value="Configuracin" data-v-e48a34f0>Configuracin</option>',10)]),512),[[Ht,o.value]])]),s("div",gC,[g[8]||(g[8]=s("label",{for:"turnFilter",class:"filter-label"},"Filtrar por Turno:",-1)),oe(s("select",{id:"turnFilter","onUpdate:modelValue":g[1]||(g[1]=S=>a.value=S),class:"filter-select"},[g[7]||(g[7]=s("option",{value:""},"Todos los turnos",-1)),($(!0),D(Le,null,qe(r.value,S=>($(),D("option",{key:S,value:S}," Turno "+W(S),9,vC))),128))],512),[[Ht,a.value]])]),s("button",{onClick:c,class:"clear-filters-btn"},g[9]||(g[9]=[s("span",{class:"btn-icon"},"",-1),s("span",{class:"btn-text"},"Limpiar Filtros",-1)]))]),s("div",bC,[i.value.length===0?($(),D("div",wC,g[10]||(g[10]=[s("div",{class:"no-logs-icon"},"",-1),s("h3",null,"No hay logs para mostrar",-1),s("p",null,"Los logs aparecern aqu cuando realices acciones con tu personaje",-1)]))):($(),D("div",yC,[($(!0),D(Le,null,qe(l.value,(S,L)=>($(),D("div",{key:L,class:"turn-group"},[s("div",CC,[s("h2",xC,[g[11]||(g[11]=s("span",{class:"turn-icon"},"",-1)),le(" Turno "+W(L),1)]),s("span",_C,W(S.length)+" acciones",1)]),s("div",kC,[($(!0),D(Le,null,qe(S,B=>($(),D("div",{key:B.id,class:rt(["log-entry",u(B.action)])},[s("div",SC,[s("div",$C,[s("span",EC,W(p(B.action)),1),s("span",DC,W(B.action),1)]),s("div",TC,W(B.timestamp),1)]),s("div",AC,[s("p",IC,W(B.details),1),B.hpBefore!==B.hpAfter||B.tempHpBefore!==B.tempHpAfter?($(),D("div",RC,[B.hpBefore!==B.hpAfter?($(),D("div",PC,[g[12]||(g[12]=s("span",{class:"change-label"},"HP:",-1)),s("span",{class:rt(["change-value",d(B.hpBefore,B.hpAfter)])},W(B.hpBefore)+"  "+W(B.hpAfter),3)])):we("",!0),B.tempHpBefore!==B.tempHpAfter?($(),D("div",HC,[g[13]||(g[13]=s("span",{class:"change-label"},"HP Temporal:",-1)),s("span",{class:rt(["change-value",d(B.tempHpBefore,B.tempHpAfter)])},W(B.tempHpBefore)+"  "+W(B.tempHpAfter),3)])):we("",!0)])):we("",!0)])],2))),128))])]))),128))]))]),s("div",{class:"logs-actions"},[s("button",{onClick:C,class:"action-btn btn-clear"},g[14]||(g[14]=[s("span",{class:"btn-icon"},"",-1),s("span",{class:"btn-text"},"Limpiar Logs",-1)])),s("button",{onClick:m,class:"action-btn btn-export"},g[15]||(g[15]=[s("span",{class:"btn-icon"},"",-1),s("span",{class:"btn-text"},"Exportar Logs",-1)])),s("button",{onClick:v,class:"action-btn btn-character"},g[16]||(g[16]=[s("span",{class:"btn-icon"},"",-1),s("span",{class:"btn-text"},"Volver al Personaje",-1)]))])]))}},BC=Tt(OC,[["__scopeId","data-v-e48a34f0"]]),uf=lo("dm",{state:()=>({characters:[],currentTurn:0,isTurnActive:!1,criticalHit:{rule:"default",characterLevel:1}}),getters:{aliveCharacters:e=>e.characters.filter(t=>t.currentHp>0),deadCharacters:e=>e.characters.filter(t=>t.currentHp<=0),aliveCount:e=>e.aliveCharacters.length,deadCount:e=>e.deadCharacters.length,getCharacterById:e=>t=>e.characters.find(n=>n.id===t),getCharacterByName:e=>t=>e.characters.find(n=>n.name===t),charactersByHp:e=>[...e.characters].sort((t,n)=>t.currentHp+t.tempHp-(n.currentHp+n.tempHp)),charactersByName:e=>[...e.characters].sort((t,n)=>t.name.localeCompare(n.name))},actions:{createCharacter(e,t,n=0,o="",a="",r="",i="",l="",c="",u="",p="",d="",m="",v=""){const C={id:ht(),name:e.trim(),maxHp:parseInt(t),originalMaxHp:parseInt(t),currentHp:parseInt(t),tempHp:0,regeneration:parseInt(n)||0,xp:o,resistencias:a,inmunidades:r,fuerza:i,destreza:l,constitucion:c,inteligencia:u,sabiduria:p,carisma:d,notas:m,ca:v,isConfigured:!0,createdAt:new Date().toISOString(),logs:[],defeatedBy:null,attacks:[]};return this.characters.push(C),this.addLogToCharacter(C.id,"Creacin",`${e} creado con ${t} HP`),this.saveData(),C},deleteCharacter(e){const t=this.characters.findIndex(n=>n.id===e);return t!==-1?(this.characters.splice(t,1),this.saveData(),!0):!1},editCharacter(e,t){const n=this.getCharacterById(e);return n?(Object.assign(n,t),t.maxHp!==void 0&&(n.maxHp=parseInt(t.maxHp,10)),t.currentHp!==void 0&&(n.currentHp=parseInt(t.currentHp,10)),t.regeneration!==void 0&&(n.regeneration=parseInt(t.regeneration,10)||0),this.addLogToCharacter(e,"Edicin","Personaje editado"),this.saveData(),!0):!1},addLogToCharacter(e,t,n){const o=this.getCharacterById(e);if(o){const a={id:ht(),timestamp:new Date().toLocaleTimeString(),turn:this.currentTurn,action:t,details:n};o.logs.unshift(a),o.logs.length>50&&(o.logs.length=50)}},healCharacter(e,t){const n=this.getCharacterById(e);if(n){const o=n.currentHp;return n.currentHp=Math.min(n.maxHp,n.currentHp+parseInt(t)),n.currentHp>o&&(this.addLogToCharacter(e,"Curacin",`+${n.currentHp-o} HP`),this.saveData()),n.currentHp-o}return 0},addTempHpToCharacter(e,t){const n=this.getCharacterById(e);return n?(n.tempHp+=parseInt(t),this.addLogToCharacter(e,"Vida Temporal",`+${t} HP temporal`),this.saveData(),n.tempHp):0},damageCharacter(e,t,n=!1){const o=this.getCharacterById(e);if(o){let a=parseInt(t);const r=Math.min(a,o.tempHp);return o.tempHp-=r,a-=r,o.currentHp=Math.max(0,o.currentHp-a),n&&(o.maxHp=Math.max(1,o.maxHp-a)),this.addLogToCharacter(e,"Dao Recibido",`-${t} HP`),this.saveData(),{damageDealt:t,remainingHp:o.currentHp}}return null},setDefeatedBy(e,t){const n=this.getCharacterById(e);return n?(n.defeatedBy=t,this.saveData(),!0):!1},resetCharacterToMaxHp(e){const t=this.getCharacterById(e);return t?(t.currentHp=t.originalMaxHp,t.maxHp=t.originalMaxHp,t.tempHp=0,t.defeatedBy=null,this.addLogToCharacter(e,"Reset HP","HP restaurado al mximo"),this.saveData(),!0):!1},reviveCharacter(e,t=1){const n=this.getCharacterById(e);return n&&n.currentHp<=0?(n.currentHp=Math.min(parseInt(t)||1,n.maxHp),n.tempHp=0,n.defeatedBy=null,this.addLogToCharacter(e,"Revivir",`Personaje revivido con ${n.currentHp} HP`),this.saveData(),!0):!1},startTurn(){this.currentTurn++,this.isTurnActive=!0,this.characters.forEach(e=>{e.regeneration>0&&e.currentHp>0&&this.healCharacter(e.id,e.regeneration)}),this.saveData()},endTurn(){this.isTurnActive=!1,this.saveData()},resetAllTurns(){this.currentTurn=0,this.isTurnActive=!1,this.saveData()},resetAllCharacters(){this.characters.forEach(e=>this.resetCharacterToMaxHp(e.id))},clearAllLogs(){this.characters.forEach(e=>{e.logs=[]}),this.saveData()},duplicateCharacter(e){const t=this.getCharacterById(e);if(t){const n=JSON.parse(JSON.stringify(t));n.id=ht(),n.name=`${t.name} (Copia)`,this.characters.push(n),this.addLogToCharacter(n.id,"Clonacin",`Clonado de ${t.name}`),this.saveData()}},clearAllData(){this.characters=[],this.currentTurn=0,this.isTurnActive=!1,this.saveData()},updateCriticalHitConfig(e){this.criticalHit={...this.criticalHit,...e},this.saveData()},addAttackToCharacter(e,t){const n=this.getCharacterById(e);n&&(n.attacks.push({...t,id:ht()}),this.saveData())},updateAttackInCharacter(e,t){const n=this.getCharacterById(e);if(n){const o=n.attacks.findIndex(a=>a.id===t.id);o!==-1&&(n.attacks[o]=t,this.saveData())}},deleteAttackFromCharacter(e,t){const n=this.getCharacterById(e);n&&(n.attacks=n.attacks.filter(o=>o.id!==t),this.saveData())},duplicateAttackInCharacter(e,t){const n=this.getCharacterById(e);if(n){const o=n.attacks.find(a=>a.id===t);if(o){const a={...o,id:ht(),name:`${o.name} (Copia)`},r=n.attacks.findIndex(i=>i.id===t);n.attacks.splice(r+1,0,a),this.saveData()}}},updateCharacterAttackOrder(e,t){const n=this.getCharacterById(e);n&&(n.attacks=t.map(o=>n.attacks.find(a=>a.id===o)).filter(Boolean),this.saveData())},saveData(){const e=yt(),t={characters:this.characters,currentTurn:this.currentTurn,isTurnActive:this.isTurnActive,criticalHit:this.criticalHit};e.updateSection("dm",t)},loadData(){const t=yt().getSection("dm");t&&(this.characters=t.characters||[],this.currentTurn=t.currentTurn||0,this.isTurnActive=t.isTurnActive||!1,this.criticalHit=t.criticalHit||{rule:"default",characterLevel:1},this.characters.forEach(n=>{n.attacks||(n.attacks=[])}))}}}),MC=["Acrobacias","Arcanos","Atletismo","Engao","Historia","Interpretacin","Intimidacin","Investigacin","Juego de Manos","Medicina","Naturaleza","Percepcin","Perspicacia","Persuasin","Religin","Sigilo","Supervivencia","Trato con Animales"],yc=()=>MC.map(e=>({id:ht(),name:e,value:0,step:1,isVisible:!0})),df=lo("player",{state:()=>({players:[]}),getters:{mostUsedXpValues:e=>{const t=e.players.flatMap(n=>n.xpHistory||[]).reduce((n,o)=>(n[o.amount]=(n[o.amount]||0)+1,n),{});return Object.entries(t).sort(([,n],[,o])=>o-n).slice(0,3).map(([n])=>parseInt(n))}},actions:{loadData(){const t=yt().getSection("players");t&&(this.players=t.map(n=>({...n,counters:n.counters||yc()})))},saveData(){yt().updateSection("players",this.players)},addPlayer(e){if(!e||!e.trim())return;const t={id:ht(),name:e.trim(),sessionXp:0,xpHistory:[],notes:"",counters:yc()};this.players.push(t),this.saveData()},deletePlayer(e){this.players=this.players.filter(t=>t.id!==e),this.saveData()},addXpToPlayer(e,t){const n=this.players.find(o=>o.id===e);n&&t>0&&(n.sessionXp=(n.sessionXp||0)+parseInt(t),n.xpHistory||(n.xpHistory=[]),n.xpHistory.push({amount:parseInt(t),timestamp:new Date().toISOString()}),this.saveData())},addXpToAllPlayers(e){e>0&&this.players.forEach(t=>this.addXpToPlayer(t.id,e))},startNewSession(){this.players.forEach(e=>{e.sessionXp=0,e.xpHistory=[]}),this.saveData()},removeXpFromPlayer(e,t){const n=this.players.find(o=>o.id===e);n&&t>0&&(n.sessionXp-=parseInt(t),n.xpHistory.push({amount:-parseInt(t),timestamp:new Date().toISOString()}),this.saveData())},editPlayer(e,t){const n=this.players.find(o=>o.id===e);n&&(Object.assign(n,t),this.saveData())},_getPlayer(e){return this.players.find(t=>t.id===e)},addCounter(e,t){const n=this._getPlayer(e);n&&(n.counters.push({id:ht(),name:t.name||"Nuevo Contador",value:t.value||0,step:t.step||1,isVisible:!0}),this.saveData())},editCounter(e,t,n){const o=this._getPlayer(e),a=o==null?void 0:o.counters.find(r=>r.id===t);a&&(Object.assign(a,n),this.saveData())},deleteCounter(e,t){const n=this._getPlayer(e);n&&(n.counters=n.counters.filter(o=>o.id!==t),this.saveData())},updateCounterValue(e,t,n){const o=this._getPlayer(e),a=o==null?void 0:o.counters.find(r=>r.id===t);a&&(a.value+=n,this.saveData())}}}),LC={key:0,class:"content"},NC={class:"turn-controls"},VC=["disabled"],jC=["disabled"],FC={key:0,class:"initiative-list"},UC=["draggable","onDragstart","onDrop","onTouchstart","onClick"],zC={class:"turn-indicator"},qC={class:"turn-number"},WC={class:"item-name"},KC={key:0,class:"mobile-reorder-buttons"},YC=["onClick","disabled"],XC=["onClick","disabled"],GC=["onClick"],JC={key:1,class:"empty-list"},QC={class:"add-character-section"},ZC=["disabled"],ex={__name:"DraggableList",props:{characters:{type:Array,required:!0},players:{type:Array,default:()=>[]}},emits:["close"],setup(e,{emit:t}){const n=e,o=t,a=dn({x:100,y:100}),r=pe(!1),i=pe([]),l=pe(null),c=pe(""),u=pe(null),p=pe(window.innerWidth<=768);let d=!1,m=null,v=null;const C=Je(()=>window.innerWidth<=768?{}:{top:a.y+"px",left:a.x+"px"}),w=()=>{o("close")},g=()=>{window.innerWidth<=768&&o("close")},S=Je(()=>{const se=n.characters.map(Ee=>({...Ee,type:"character"}));return[...n.players.map(Ee=>({...Ee,type:"player"})),...se]});cn(S,se=>{const Z=[],Ee=new Set(se.map(z=>z.id));i.value.forEach(z=>{Ee.has(z.id)&&Z.push(z)});const je=new Set(Z.map(z=>z.id));se.forEach(z=>{je.has(z.id)||Z.push(z)}),i.value=Z},{immediate:!0,deep:!0}),qt(()=>{const se=()=>{p.value=window.innerWidth<=768};window.addEventListener("resize",se),io(()=>{window.removeEventListener("resize",se)})});const L=se=>{if(window.innerWidth<=768)return;d=!0;const Z=se.clientX-a.x,Ee=se.clientY-a.y,je=M=>{d&&(a.x=M.clientX-Z,a.y=M.clientY-Ee)},z=()=>{d=!1,window.removeEventListener("mousemove",je),window.removeEventListener("mouseup",z)};window.addEventListener("mousemove",je),window.addEventListener("mouseup",z)},B=()=>{r.value=!r.value},V=se=>{m=se},T=se=>{if(m===null||m===se)return;const Z=i.value.splice(m,1)[0];i.value.splice(se,0,Z),l.value!==null&&(m===l.value?l.value=se:m<l.value&&se>=l.value?l.value--:m>l.value&&se<=l.value&&l.value++),m=null,u.value=null},te=(se,Z)=>{if(Z.target.closest("button"))return;const Ee=Z.touches[0];v={startIndex:se,startY:Ee.clientY,currentIndex:se,moving:!1},u.value=se,Z.preventDefault()},ee=se=>{if(!v)return;const Z=se.touches[0],Ee=Z.clientY-v.startY;if(Math.abs(Ee)>10&&(v.moving=!0),!v.moving)return;const je=document.querySelectorAll(".initiative-list li");let z=v.startIndex;if(je.forEach((M,Y)=>{const U=M.getBoundingClientRect();U.top+U.height/2,Z.clientY>U.top&&Z.clientY<U.bottom&&(z=Y)}),z!==v.currentIndex){const M=i.value.splice(v.currentIndex,1)[0];i.value.splice(z,0,M),l.value!==null&&(v.currentIndex===l.value?l.value=z:v.currentIndex<l.value&&z>=l.value?l.value--:v.currentIndex>l.value&&z<=l.value&&l.value++),v.currentIndex=z}se.preventDefault()},ae=()=>{v=null,u.value=null},j=se=>{if(se===0)return;const Z=i.value.splice(se,1)[0];i.value.splice(se-1,0,Z),l.value!==null&&(l.value===se?l.value=se-1:l.value===se-1&&(l.value=se))},H=se=>{if(se===i.value.length-1)return;const Z=i.value.splice(se,1)[0];i.value.splice(se+1,0,Z),l.value!==null&&(l.value===se?l.value=se+1:l.value===se+1&&(l.value=se))},N=se=>{l.value=se},R=()=>{i.value.length!==0&&(l.value===null?l.value=0:l.value=(l.value+1)%i.value.length)},E=()=>{i.value.length>0?l.value=0:l.value=null},K=()=>{if(!c.value.trim())return;const se={id:ht(),name:c.value.trim(),type:"custom"};i.value.push(se),c.value=""},$e=se=>{i.value.splice(se,1),l.value!==null&&(se===l.value?i.value.length>0?l.value=Math.min(l.value,i.value.length-1):l.value=null:se<l.value&&l.value--)};return(se,Z)=>($(),D("div",{class:"draggable-list-overlay",onClick:Ge(g,["self"])},[s("div",{class:"draggable-list",style:kn(C.value)},[s("div",{class:"header",onMousedown:L},[Z[4]||(Z[4]=s("span",null," Orden de Iniciativa",-1)),s("button",{onClick:B,class:"minimize-btn"},W(r.value?"":""),1),s("button",{onClick:w,class:"close-btn"},"")],32),r.value?we("",!0):($(),D("div",LC,[s("div",NC,[s("button",{onClick:R,class:"btn-next-turn",disabled:i.value.length===0},Z[5]||(Z[5]=[s("i",{class:"bi bi-arrow-right-circle-fill"},null,-1),le(" Siguiente Turno ")]),8,VC),s("button",{onClick:E,class:"btn-reset-turn",disabled:i.value.length===0},Z[6]||(Z[6]=[s("i",{class:"bi bi-arrow-counterclockwise"},null,-1),le(" Resetear ")]),8,jC)]),i.value.length>0?($(),D("ul",FC,[($(!0),D(Le,null,qe(i.value,(Ee,je)=>($(),D("li",{key:Ee.id,class:rt([Ee.type,{active:l.value===je,dragging:u.value===je}]),draggable:!p.value,onDragstart:z=>V(je),onDragover:Z[0]||(Z[0]=Ge(()=>{},["prevent"])),onDrop:z=>T(je),onTouchstart:z=>p.value?null:te(je,z),onTouchmove:Z[1]||(Z[1]=z=>p.value?null:ee(z)),onTouchend:Z[2]||(Z[2]=z=>p.value?null:ae),onClick:z=>N(je)},[s("div",zC,[s("span",qC,W(je+1),1)]),s("i",{class:rt(["bi item-icon",Ee.type==="player"?"bi-person-fill":"bi-shield-fill"])},null,2),s("span",WC,W(Ee.name),1),p.value&&i.value.length>1?($(),D("div",KC,[s("button",{onClick:Ge(z=>j(je),["stop"]),class:"btn-reorder btn-up",disabled:je===0,title:"Mover arriba"},Z[7]||(Z[7]=[s("i",{class:"bi bi-chevron-up"},null,-1)]),8,YC),s("button",{onClick:Ge(z=>H(je),["stop"]),class:"btn-reorder btn-down",disabled:je===i.value.length-1,title:"Mover abajo"},Z[8]||(Z[8]=[s("i",{class:"bi bi-chevron-down"},null,-1)]),8,XC)])):we("",!0),s("button",{onClick:Ge(z=>$e(je),["stop"]),class:"btn-remove",title:"Quitar de iniciativa"},Z[9]||(Z[9]=[s("i",{class:"bi bi-x"},null,-1)]),8,GC)],42,UC))),128))])):($(),D("div",JC,Z[10]||(Z[10]=[s("p",null,"No hay personajes en la iniciativa",-1),s("small",null,"Aade jugadores desde el gestor o personajes manualmente",-1)]))),s("div",QC,[oe(s("input",{"onUpdate:modelValue":Z[3]||(Z[3]=Ee=>c.value=Ee),onKeyup:xn(K,["enter"]),type:"text",placeholder:"Aadir personaje/enemigo...",class:"input-add-character"},null,544),[[ge,c.value]]),s("button",{onClick:K,disabled:!c.value.trim(),class:"btn-add-character"},Z[11]||(Z[11]=[s("i",{class:"bi bi-plus-circle-fill"},null,-1)]),8,ZC)])]))],4)]))}},tx=Tt(ex,[["__scopeId","data-v-d8552edf"]]),nx={class:"header-actions"},ox={key:0,class:"content"},sx={class:"dice-config"},ax={class:"config-row"},rx={class:"config-row"},ix={class:"config-row"},lx=["disabled"],cx={key:0,class:"bi bi-dice-1"},ux={key:1,class:"bi bi-arrow-clockwise rotating"},dx={key:0,class:"result-section"},fx={class:"current-result"},px={class:"result-formula"},mx={class:"result-total"},hx={class:"dice-breakdown"},gx={class:"dice-values"},vx={key:0,class:"modifier-display"},bx={class:"history-section"},wx={class:"history-list"},yx={class:"history-formula"},Cx={class:"history-result"},xx={class:"history-time"},_x={key:0,class:"no-history"},Cc="diceRollerHistory",kx={__name:"DiceRoller",props:{characters:{type:Array,default:()=>[]}},emits:["close"],setup(e,{emit:t}){const n=t,o=dn({x:200,y:150}),a=pe(!1),r=pe(1),i=pe(20),l=pe(0),c=pe(null),u=pe([]),p=pe(!1);let d=!1;const m=Je(()=>window.innerWidth<=768?{}:{top:o.y+"px",left:o.x+"px"}),v=()=>{n("close")},C=()=>{window.innerWidth<=768&&n("close")};qt(()=>{const T=localStorage.getItem(Cc);if(T)try{u.value=JSON.parse(T)}catch(te){console.error("Error loading dice history:",te),u.value=[]}window.innerWidth>768&&(o.x=Math.random()*300+200,o.y=Math.random()*200+100)}),cn(u,T=>{localStorage.setItem(Cc,JSON.stringify(T))},{deep:!0});const w=T=>{if(window.innerWidth<=768)return;d=!0;const te=T.clientX-o.x,ee=T.clientY-o.y,ae=H=>{d&&(o.x=Math.max(0,Math.min(window.innerWidth-320,H.clientX-te)),o.y=Math.max(0,Math.min(window.innerHeight-100,H.clientY-ee)))},j=()=>{d=!1,window.removeEventListener("mousemove",ae),window.removeEventListener("mouseup",j)};window.addEventListener("mousemove",ae),window.addEventListener("mouseup",j)},g=()=>{a.value=!a.value},S=T=>Math.floor(Math.random()*T)+1,L=async()=>{p.value=!0,await new Promise(j=>setTimeout(j,500));const T=[];for(let j=0;j<r.value;j++)T.push(S(i.value));const ee=T.reduce((j,H)=>j+H,0)+l.value,ae={id:Date.now(),rolls:T,modifier:l.value,total:ee,formula:`${r.value}d${i.value}${l.value>0?"+"+l.value:l.value<0?l.value:""}`,time:new Date().toLocaleTimeString()};c.value=ae,u.value.push(ae),u.value.length>50&&(u.value=u.value.slice(-50)),p.value=!1},B=T=>{if(i.value===20){if(T===20)return"crit-success";if(T===1)return"crit-fail"}const te=T/i.value;return te>=.8?"high-roll":te<=.2?"low-roll":"normal-roll"},V=()=>{confirm("Ests seguro de que quieres limpiar el historial?")&&(u.value=[],c.value=null)};return(T,te)=>($(),D("div",{class:"dice-roller-overlay",onClick:Ge(C,["self"])},[s("div",{class:"dice-roller",style:kn(m.value)},[s("div",{class:"header",onMousedown:w},[te[3]||(te[3]=s("span",null,[s("i",{class:"bi bi-dice-6"}),le(" Lanzar Dados")],-1)),s("div",nx,[s("button",{onClick:g,class:"minimize-btn"},W(a.value?"+":"-"),1),s("button",{onClick:v,class:"close-btn"},"")])],32),a.value?we("",!0):($(),D("div",ox,[s("div",sx,[s("div",ax,[te[4]||(te[4]=s("label",null,"Cantidad:",-1)),oe(s("input",{type:"number","onUpdate:modelValue":te[0]||(te[0]=ee=>r.value=ee),class:"dice-count-input"},null,512),[[ge,r.value]])]),s("div",rx,[te[6]||(te[6]=s("label",null,"Tipo:",-1)),oe(s("select",{"onUpdate:modelValue":te[1]||(te[1]=ee=>i.value=ee)},te[5]||(te[5]=[oo('<option value="4" data-v-c4397ffc>d4</option><option value="6" data-v-c4397ffc>d6</option><option value="8" data-v-c4397ffc>d8</option><option value="10" data-v-c4397ffc>d10</option><option value="12" data-v-c4397ffc>d12</option><option value="20" data-v-c4397ffc>d20</option><option value="100" data-v-c4397ffc>d100</option>',7)]),512),[[Ht,i.value]])]),s("div",ix,[te[7]||(te[7]=s("label",null,"Modificador:",-1)),oe(s("input",{"onUpdate:modelValue":te[2]||(te[2]=ee=>l.value=ee),type:"number",class:"modifier-input",placeholder:"+0"},null,512),[[ge,l.value,void 0,{number:!0}]])])]),s("button",{onClick:L,class:"roll-button",disabled:p.value},[p.value?($(),D("i",ux)):($(),D("i",cx)),le(" "+W(p.value?"Lanzando...":"Lanzar Dados"),1)],8,lx),c.value?($(),D("div",dx,[s("div",fx,[s("div",px,W(r.value)+"d"+W(i.value)+W(l.value>0?"+"+l.value:l.value<0?l.value:""),1),s("div",mx,W(c.value.total),1)]),s("div",hx,[s("div",gx,[($(!0),D(Le,null,qe(c.value.rolls,(ee,ae)=>($(),D("span",{key:ae,class:rt(["dice-value",B(ee)])},W(ee),3))),128))]),l.value!==0?($(),D("div",vx,W(l.value>0?"+":"")+W(l.value),1)):we("",!0)])])):we("",!0),s("div",bx,[s("div",{class:"history-header"},[te[8]||(te[8]=s("span",null,"Historial",-1)),s("button",{onClick:V,class:"clear-btn"},"Limpiar")]),s("div",wx,[($(!0),D(Le,null,qe(u.value.slice().reverse(),ee=>($(),D("div",{key:ee.id,class:"history-item"},[s("div",yx,W(ee.formula),1),s("div",Cx,W(ee.total),1),s("div",xx,W(ee.time),1)]))),128)),u.value.length===0?($(),D("div",_x," Sin tiradas an ")):we("",!0)])])]))],4)]))}},Sx=Tt(kx,[["__scopeId","data-v-c4397ffc"]]);function ff(e,t=!1,n={rule:"default",characterLevel:1}){let o;t?o=cf(e,n):o=qa(e);const a=c=>c.map(u=>`<span class="roll-value ${u.isReplaced?"replaced":""}">${u.value}</span>`).join(", "),r=c=>{if(!c)return"";let u='<div class="reroll-results-block-modern"><h4><i class="bi bi-dice-5"></i> Resultados del Reroll</h4>';for(const p in c)u+=`<div class="reroll-type"><strong>${p}:</strong> [${c[p].join(", ")}]</div>`;return u+="</div>",u},i=(c,u=null)=>{let p='<div class="attack-result-modal">';p+=`<h3 class="dnd-title-modern">${c.name}</h3>`;for(const d in c.results){const m=c.results[d],v=Gu(d),w=(ko.find(g=>g.id===d)||{name:d}).name.toUpperCase();p+=`
                <div class="damage-type-block-modern" style="border-left-color: ${v};">
                    <div class="damage-header">
                        <span class="damage-type-modern" style="color: ${v};">${w}</span>
                        <span class="damage-total-modern">${m.total}</span>
                    </div>
                    <div class="damage-details">
                        <span><strong>Tiradas:</strong> [${a(m.rolls)}]</span>
                        <span><strong>Bonus:</strong> ${m.bonus>0?"+":""}${m.bonus}</span>
                    </div>
            `,m.lifeSteal&&(p+=`
                    <div class="lifesteal-details">
                        <i class="bi bi-heart-fill"></i>
                        <span><strong>Curado:</strong> ${m.lifeSteal.healed} (${m.lifeSteal.percentage_display})</span>
                    </div>
                `),p+="</div>"}return p+=r(u),p+=`<div class="grand-total-modern">Dao Total: ${c.grandTotal}</div>`,c.totalHealed>0&&(p+=`<div class="total-healed-modern">Curacin Total: ${c.totalHealed}</div>`),p+="</div>",p};let l=null;xe.fire({width:600,html:i(o),showConfirmButton:!0,confirmButtonText:"Cerrar",showDenyButton:e.rerollDice&&e.rerollDice.length>0,denyButtonText:"Lanzar Reroll",showCancelButton:!1,showCloseButton:!0,customClass:{popup:"dnd-modern-swal-popup",htmlContainer:"dnd-modern-swal-container",denyButton:"dnd-reroll-button",cancelButton:"dnd-replace-button"},didOpen:()=>{const c="dnd-modern-modal-styles";if(document.getElementById(c))return;const u=document.createElement("style");u.id=c,u.innerHTML=`
                .dnd-modern-swal-popup { background: #1e1e1e; border: 1px solid #444; border-radius: 10px; color: #f0f0f0; box-shadow: 0 5px 20px rgba(0,0,0,0.5); }
                .dnd-modern-swal-container { padding: 0 !important; }
                .dnd-title-modern { font-family: 'Teko', sans-serif; font-size: 2.5rem; color: #f0f0f0; text-align: center; padding: 15px; background: #111; border-top-left-radius: 9px; border-top-right-radius: 9px; }
                .dnd-modern-swal-popup .attack-result-modal { padding: 20px; font-family: 'Roboto', sans-serif; }
                .damage-type-block-modern { background: #2a2a2a; border-left: 4px solid; margin-bottom: 15px; padding: 15px; border-radius: 4px; }
                .damage-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
                .damage-type-modern { font-family: 'Teko', sans-serif; font-size: 1.5rem; }
                .damage-total-modern { font-family: 'Teko', sans-serif; font-size: 2.8rem; color: #ff4d4d; }
                .grand-total-modern, .total-healed-modern { font-family: 'Teko', sans-serif; font-size: 2rem; text-align: center; margin-top: 20px; padding: 10px; border-radius: 5px; }
                .grand-total-modern { background: rgba(255, 77, 77, 0.1); color: #ff4d4d; }
                .total-healed-modern { background: rgba(77, 255, 126, 0.1); color: #4dff7e; }
                .lifesteal-details { color: #4dff7e; }
                .roll-value.replaced { color: #ffd700; font-weight: bold; text-shadow: 0 0 5px #ffd700; background-color: rgba(255, 215, 0, 0.1); padding: 2px 4px; border-radius: 3px; }
                .reroll-results-block-modern { background: #2a2a2a; padding: 15px; border-radius: 6px; margin: 20px 0; border: 1px solid #444; }
                .reroll-results-block-modern h4 { color: #f39c12; margin-bottom: 10px; display: flex; align-items: center; gap: 8px; }
                .reroll-type { margin-bottom: 5px; padding-left: 10px; }
                .swal2-actions { gap: 15px !important; }
                .dnd-reroll-button { background-color: #9b59b6 !important; color: white !important; }
                .dnd-replace-button { background-color: #f39c12 !important; color: white !important; }`,document.head.appendChild(u)},preDeny:()=>(l=Ds(e.rerollDice),xe.update({html:i(o,l),showDenyButton:!1,showCancelButton:!1,footer:'<button id="swal-replace-btn" class="swal2-styled dnd-replace-button">Reemplazar Dados</button>'}),setTimeout(()=>{const c=document.getElementById("swal-replace-btn");c&&(c.onclick=()=>{l||(l=Ds(e.rerollDice)),o=di(o,l),xe.update({html:i(o,l),showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,footer:""})})},0),!1)})}const $x={class:"attack-manager-container"},Ex={class:"header"},Dx={class:"header-actions"},Tx={class:"content"},Ax={class:"attacks-list"},Ix={key:0,class:"no-attacks"},Rx=["data-id"],Px={class:"header-attack"},Hx={class:"attack-info"},Ox={class:"attack-name"},Bx={class:"attack-summary"},Mx={class:"attack-actions"},Lx=["onClick"],Nx=["onClick"],Vx=["onClick"],jx=["onClick"],Fx=["onClick"],Ux={class:"new-attack-area"},zx={class:"attack-form"},qx={class:"attack-form-header"},Wx={class:"attack-form-content"},Kx={class:"form-group"},Yx={class:"damage-rolls-section"},Xx={class:"damage-roll-header"},Gx={class:"damage-roll-title"},Jx=["onClick","disabled"],Qx={class:"damage-roll-inputs"},Zx={class:"form-group-inline"},e_=["for"],t_=["id","onUpdate:modelValue"],n_={class:"form-group-inline"},o_=["for"],s_=["id","onUpdate:modelValue"],a_={class:"form-group-inline"},r_=["for"],i_=["id","onUpdate:modelValue"],l_=["value"],c_={class:"form-group-inline"},u_=["for"],d_=["id","onUpdate:modelValue"],f_={class:"form-group-inline"},p_=["for"],m_=["id","onUpdate:modelValue"],h_={class:"form-group-inline"},g_=["for"],v_=["id","onUpdate:modelValue"],b_={class:"damage-rolls-section"},w_={key:0,class:"empty-state"},y_={class:"damage-roll-header"},C_={class:"damage-roll-title"},x_=["onClick"],__={class:"damage-roll-inputs reroll-inputs"},k_={class:"form-group-inline"},S_=["for"],$_=["id","onUpdate:modelValue"],E_={class:"form-group-inline"},D_=["for"],T_=["id","onUpdate:modelValue"],A_={class:"form-group-inline"},I_=["for"],R_=["id","onUpdate:modelValue"],P_={class:"form-actions"},H_={class:"attack-form settings-form"},O_={class:"attack-form-header"},B_={class:"attack-form-content"},M_={class:"form-group"},L_={key:0,class:"form-group"},N_={key:0,class:"dad-bonus-display"},V_={class:"form-actions"},j_={__name:"DMAttackManager",props:{characterId:{type:[String,Number],required:!0}},emits:["close"],setup(e,{emit:t}){const n=e,o=uf(),a=Je(()=>o.getCharacterById(n.characterId)),r=Je(()=>a.value?a.value.attacks:[]),i=pe(!1),l=pe(!1),c=pe(!1),u=dn({rule:"default",characterLevel:1}),p=Je(()=>u.rule!=="dad"?0:calculateDadBonus(u.characterLevel)),d=dn({id:null,name:"",damageRolls:[],rerollDice:[]});qt(()=>{document.body.style.overflow="hidden",$o(()=>{const j=document.querySelector(".attacks-list");j&&new Be(j,{animation:150,handle:".drag-handle",ghostClass:"sortable-ghost",onEnd:R=>{const E=Array.from(R.target.children).map(K=>K.dataset.id).filter(K=>K);o.updateCharacterAttackOrder(n.characterId,E)}});const H=document.querySelector(".attack-manager-overlay"),N=document.querySelector(".content");if(H&&N){const R=E=>{E.target.closest(".attack-form-overlay")||(E.preventDefault(),N.scrollTop+=E.deltaY)};H.addEventListener("wheel",R,{passive:!1}),H._wheelHandler=R}})}),io(()=>{document.body.style.overflow="";const j=document.querySelector(".attack-manager-overlay");j&&j._wheelHandler&&j.removeEventListener("wheel",j._wheelHandler)});const m=j=>{if(!j||!j.includes("d"))return{numDice:1,diceType:6};const[H,N]=j.split("d");return{numDice:Number(H)||1,diceType:Number(N)||6}},v=j=>{const H=JSON.parse(JSON.stringify(j));H.damageRolls.forEach(N=>{const{numDice:R,diceType:E}=m(N.dice);N.numDice=R,N.diceType=E,N.lifeSteal||(N.lifeSteal={percentage:0})}),H.rerollDice?H.rerollDice.forEach(N=>{const{numDice:R,diceType:E}=m(N.dice);N.numDice=R,N.diceType=E}):H.rerollDice=[],d.id=H.id,d.name=H.name,d.damageRolls.splice(0,d.damageRolls.length,...H.damageRolls),d.rerollDice.splice(0,d.rerollDice.length,...H.rerollDice),i.value=!0},C=()=>{l.value=!1,v({id:null,name:"",damageRolls:[{dice:"1d6",type:"slashing",bonus:0,min:1,lifeSteal:{percentage:0}}],rerollDice:[]})},w=j=>{l.value=!0,v(j)},g=j=>{o.duplicateAttackInCharacter(n.characterId,j.id)},S=()=>{i.value=!1},L=()=>{d.damageRolls.push({dice:"1d6",type:"slashing",bonus:0,min:1,numDice:1,diceType:6,lifeSteal:{percentage:0}})},B=j=>{d.damageRolls.splice(j,1)},V=()=>{d.rerollDice||(d.rerollDice=[]),d.rerollDice.push({dice:"1d6",numDice:1,diceType:6,min:1})},T=j=>{d.rerollDice.splice(j,1)},te=()=>{if(!d.name){xe.fire("Error","El nombre del ataque no puede estar vaco.","error");return}const j=JSON.parse(JSON.stringify(d));j.damageRolls.forEach(H=>{H.dice=`${H.numDice||1}d${H.diceType||6}`,delete H.numDice,delete H.diceType}),j.rerollDice&&j.rerollDice.forEach(H=>{H.dice=`${H.numDice||1}d${H.diceType||6}`,delete H.numDice,delete H.diceType}),l.value?o.updateAttackInCharacter(n.characterId,j):o.addAttackToCharacter(n.characterId,j),S()},ee=j=>{xe.fire({title:"Ests seguro?",text:"No podrs revertir esta accin.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"S, elimnalo!",cancelButtonText:"Cancelar"}).then(H=>{H.isConfirmed&&(o.deleteAttackFromCharacter(n.characterId,j),xe.fire("Eliminado","El ataque ha sido eliminado.","success"))})},ae=(j,H=!1)=>{ff(j,H,o.criticalHit)};return(j,H)=>($(),D("div",{class:"attack-manager-overlay",onClick:H[10]||(H[10]=Ge(N=>j.$emit("close"),["self"]))},[s("div",$x,[s("div",Ex,[H[12]||(H[12]=s("h2",null,[s("i",{class:"bi bi-shield-fill"}),le(" Gestor de Ataques del DM")],-1)),s("div",Dx,[s("button",{onClick:H[0]||(H[0]=(...N)=>j.showSettingsForm&&j.showSettingsForm(...N)),class:"settings-btn"},H[11]||(H[11]=[s("i",{class:"bi bi-gear-fill"},null,-1)])),s("button",{onClick:H[1]||(H[1]=N=>j.$emit("close")),class:"close-btn"},"")])]),s("div",Tx,[s("div",Ax,[r.value.length===0?($(),D("div",Ix," No hay ataques guardados para el DM. Crea uno nuevo! ")):we("",!0),($(!0),D(Le,null,qe(r.value,N=>($(),D("div",{key:N.id,class:"attack-item","data-id":N.id},[s("div",Px,[H[13]||(H[13]=s("div",{class:"drag-handle"},[s("i",{class:"bi bi-grip-vertical"})],-1)),s("div",Hx,[s("span",Ox,W(N.name),1),s("div",Bx,[($(!0),D(Le,null,qe(N.damageRolls,(R,E)=>($(),D("span",{key:E,class:"damage-tag"},W(R.dice)+" "+W(R.type),1))),128))])])]),s("div",Mx,[s("button",{onClick:R=>ae(N,!1),class:"action-btn btn-execute"},"Atacar",8,Lx),s("button",{onClick:R=>ae(N,!0),class:"action-btn btn-critical"},"Crtico",8,Nx),s("button",{onClick:R=>w(N),class:"action-btn btn-edit"},"Editar",8,Vx),s("button",{onClick:R=>g(N),class:"action-btn btn-duplicate"},"Duplicar",8,jx),s("button",{onClick:R=>ee(N.id),class:"action-btn btn-delete"},"Eliminar",8,Fx)])],8,Rx))),128))]),s("div",Ux,[s("button",{onClick:H[2]||(H[2]=N=>C()),class:"btn-new-attack"},H[14]||(H[14]=[s("i",{class:"bi bi-plus-circle-fill"},null,-1),le(" Crear Nuevo Ataque ")]))]),i.value?($(),D("div",{key:0,class:"attack-form-overlay",onClick:Ge(S,["self"])},[s("div",zx,[s("div",qx,[s("h3",null,W(l.value?"Editar Ataque":"Nuevo Ataque"),1),s("button",{onClick:S,class:"form-close-btn","aria-label":"Cerrar formulario"},H[15]||(H[15]=[s("i",{class:"bi bi-x-lg"},null,-1)]))]),s("div",Wx,[s("div",Kx,[H[16]||(H[16]=s("label",{for:"attack-name"},"Nombre del Ataque",-1)),oe(s("input",{id:"attack-name",type:"text","onUpdate:modelValue":H[3]||(H[3]=N=>d.name=N),placeholder:"Ej: Espadazo flamgero",autocomplete:"off"},null,512),[[ge,d.name]])]),s("div",Yx,[H[20]||(H[20]=s("h4",null,[s("i",{class:"bi bi-dice-6-fill"}),le(" Tiradas de Dao")],-1)),($(!0),D(Le,null,qe(d.damageRolls,(N,R)=>($(),D("div",{key:R,class:"damage-roll-item"},[s("div",Xx,[s("span",Gx,"Dao #"+W(R+1),1),s("button",{onClick:E=>B(R),class:"btn-remove-roll","aria-label":"Eliminar tirada de dao",disabled:d.damageRolls.length===1},H[17]||(H[17]=[s("i",{class:"bi bi-trash-fill"},null,-1)]),8,Jx)]),s("div",Qx,[s("div",Zx,[s("label",{for:`dice-num-${R}`},"Cantidad",8,e_),oe(s("input",{id:`dice-num-${R}`,type:"number","onUpdate:modelValue":E=>N.numDice=E,min:"1",max:"20",class:"input-narrow"},null,8,t_),[[ge,N.numDice,void 0,{number:!0}]])]),s("div",n_,[s("label",{for:`dice-type-${R}`},"Tipo de Dado",8,o_),oe(s("select",{id:`dice-type-${R}`,"onUpdate:modelValue":E=>N.diceType=E},H[18]||(H[18]=[oo('<option value="4" data-v-7a55c277>d4</option><option value="6" data-v-7a55c277>d6</option><option value="8" data-v-7a55c277>d8</option><option value="10" data-v-7a55c277>d10</option><option value="12" data-v-7a55c277>d12</option><option value="20" data-v-7a55c277>d20</option><option value="100" data-v-7a55c277>d100</option>',7)]),8,s_),[[Ht,N.diceType,void 0,{number:!0}]])]),s("div",a_,[s("label",{for:`type-${R}`},"Tipo de Dao",8,r_),oe(s("select",{id:`type-${R}`,"onUpdate:modelValue":E=>N.type=E},[($(!0),D(Le,null,qe(ue(ko),E=>($(),D("option",{key:E.id,value:E.id},W(E.name),9,l_))),128))],8,i_),[[Ht,N.type]])]),s("div",c_,[s("label",{for:`bonus-${R}`},"Bonus",8,u_),oe(s("input",{id:`bonus-${R}`,type:"number","onUpdate:modelValue":E=>N.bonus=E,placeholder:"+3"},null,8,d_),[[ge,N.bonus,void 0,{number:!0}]])]),s("div",f_,[s("label",{for:`min-${R}`},"Mnimo",8,p_),oe(s("input",{id:`min-${R}`,type:"number","onUpdate:modelValue":E=>N.min=E,placeholder:"1",min:"1"},null,8,m_),[[ge,N.min,void 0,{number:!0}]])]),s("div",h_,[s("label",{for:`lifesteal-${R}`},"Robo de Vida (%)",8,g_),oe(s("input",{id:`lifesteal-${R}`,type:"number","onUpdate:modelValue":E=>N.lifeSteal.percentage=E,placeholder:"0",min:"0",max:"100"},null,8,v_),[[ge,N.lifeSteal.percentage,void 0,{number:!0}]])])])]))),128)),s("button",{onClick:L,class:"btn-add-roll"},H[19]||(H[19]=[s("i",{class:"bi bi-plus-circle"},null,-1),le(" Aadir Tipo de Dao ")]))]),s("div",b_,[H[25]||(H[25]=s("h4",null,[s("i",{class:"bi bi-arrow-repeat"}),le(" Dados de Reroll (Opcional)")],-1)),d.rerollDice.length===0?($(),D("div",w_,H[21]||(H[21]=[s("p",null,"No hay dados de reroll configurados",-1)]))):we("",!0),($(!0),D(Le,null,qe(d.rerollDice,(N,R)=>($(),D("div",{key:R,class:"damage-roll-item"},[s("div",y_,[s("span",C_,"Reroll #"+W(R+1),1),s("button",{onClick:E=>T(R),class:"btn-remove-roll","aria-label":"Eliminar dado de reroll"},H[22]||(H[22]=[s("i",{class:"bi bi-trash-fill"},null,-1)]),8,x_)]),s("div",__,[s("div",k_,[s("label",{for:`reroll-dice-num-${R}`},"Cantidad",8,S_),oe(s("input",{id:`reroll-dice-num-${R}`,type:"number","onUpdate:modelValue":E=>N.numDice=E,min:"1",max:"20",class:"input-narrow"},null,8,$_),[[ge,N.numDice,void 0,{number:!0}]])]),s("div",E_,[s("label",{for:`reroll-dice-type-${R}`},"Tipo de Dado",8,D_),oe(s("select",{id:`reroll-dice-type-${R}`,"onUpdate:modelValue":E=>N.diceType=E},H[23]||(H[23]=[oo('<option value="4" data-v-7a55c277>d4</option><option value="6" data-v-7a55c277>d6</option><option value="8" data-v-7a55c277>d8</option><option value="10" data-v-7a55c277>d10</option><option value="12" data-v-7a55c277>d12</option><option value="20" data-v-7a55c277>d20</option><option value="100" data-v-7a55c277>d100</option>',7)]),8,T_),[[Ht,N.diceType,void 0,{number:!0}]])]),s("div",A_,[s("label",{for:`reroll-min-${R}`},"Mnimo",8,I_),oe(s("input",{id:`reroll-min-${R}`,type:"number","onUpdate:modelValue":E=>N.min=E,placeholder:"1",min:"1"},null,8,R_),[[ge,N.min,void 0,{number:!0}]])])])]))),128)),s("button",{onClick:V,class:"btn-add-roll"},H[24]||(H[24]=[s("i",{class:"bi bi-plus-circle"},null,-1),le(" Aadir Dado de Reroll ")]))]),s("div",P_,[s("button",{onClick:te,class:"btn-save"},[H[26]||(H[26]=s("i",{class:"bi bi-check-circle-fill"},null,-1)),le(" "+W(l.value?"Guardar Cambios":"Crear Ataque"),1)]),s("button",{onClick:S,class:"btn-cancel"},H[27]||(H[27]=[s("i",{class:"bi bi-x-circle-fill"},null,-1),le(" Cancelar ")]))])])])])):we("",!0),c.value?($(),D("div",{key:1,class:"attack-form-overlay",onClick:H[9]||(H[9]=Ge((...N)=>j.hideSettingsForm&&j.hideSettingsForm(...N),["self"]))},[s("div",H_,[s("div",O_,[H[29]||(H[29]=s("h3",null,[s("i",{class:"bi bi-gear-fill"}),le(" Configuracin de Dao Crtico")],-1)),s("button",{onClick:H[4]||(H[4]=(...N)=>j.hideSettingsForm&&j.hideSettingsForm(...N)),class:"form-close-btn","aria-label":"Cerrar configuracin"},H[28]||(H[28]=[s("i",{class:"bi bi-x-lg"},null,-1)]))]),s("div",B_,[s("div",M_,[H[31]||(H[31]=s("label",{for:"critical-rule"},"Regla de Dao Crtico",-1)),oe(s("select",{id:"critical-rule","onUpdate:modelValue":H[5]||(H[5]=N=>u.rule=N),class:"settings-select"},H[30]||(H[30]=[s("option",{value:"default"},"Regla por Defecto (Duplicar Dados)",-1),s("option",{value:"dad"},"Dao Masivo (DAD)",-1)]),512),[[Ht,u.rule]])]),u.rule==="dad"?($(),D("div",L_,[H[34]||(H[34]=s("label",{for:"character-level"},"Nivel del Personaje",-1)),oe(s("input",{type:"number",id:"character-level","onUpdate:modelValue":H[6]||(H[6]=N=>u.characterLevel=N),min:"1",max:"20",class:"settings-input"},null,512),[[ge,u.characterLevel,void 0,{number:!0}]]),p.value>0?($(),D("div",N_,[H[33]||(H[33]=s("i",{class:"bi bi-lightning-charge-fill"},null,-1)),s("p",null,[H[32]||(H[32]=le("Bonus de dao por crtico: ")),s("strong",null,"+"+W(p.value),1)])])):we("",!0)])):we("",!0),s("div",V_,[s("button",{onClick:H[7]||(H[7]=(...N)=>j.saveSettings&&j.saveSettings(...N)),class:"btn-save"},H[35]||(H[35]=[s("i",{class:"bi bi-check-circle-fill"},null,-1),le(" Guardar ")])),s("button",{onClick:H[8]||(H[8]=(...N)=>j.hideSettingsForm&&j.hideSettingsForm(...N)),class:"btn-cancel"},H[36]||(H[36]=[s("i",{class:"bi bi-x-circle-fill"},null,-1),le(" Cancelar ")]))])])])])):we("",!0)])])]))}},F_=Tt(j_,[["__scopeId","data-v-7a55c277"]]),U_={class:"player-manager-content"},z_={class:"player-manager-header"},q_={class:"player-manager-body"},W_={class:"global-controls-player"},K_={class:"add-xp-all"},Y_=["disabled"],X_={class:"add-player"},G_=["disabled"],J_={class:"player-list"},Q_={key:0,class:"empty-state"},Z_={class:"player-info"},ek={class:"player-name"},tk={class:"player-xp-total"},nk={class:"player-actions"},ok={class:"add-xp-single"},sk=["onUpdate:modelValue","onKeyup"],ak=["onClick","disabled"],rk=["onClick","disabled"],ik={class:"quick-xp-buttons"},lk=["onClick"],ck={class:"player-footer"},uk=["onClick"],dk=["onClick"],fk=["onClick"],pk=["onClick"],mk=["onClick"],hk={key:0,class:"xp-history"},gk={class:"timestamp"},vk={key:0},bk={key:1,class:"counters-section"},wk={class:"counters-header"},yk=["onClick"],Ck={class:"counters-grid"},xk={class:"counter-name"},_k={class:"counter-controls"},kk=["onClick"],Sk={class:"counter-value"},$k=["onClick"],Ek={key:0,class:"empty-state-small"},Dk={key:2,class:"notes-section"},Tk=["onUpdate:modelValue","onInput"],Ak={class:"player-manager-content"},Ik={class:"player-manager-header"},Rk={class:"player-manager-body"},Pk={key:0,class:"edit-form"},Hk={class:"form-group"},Ok={class:"modal-actions"},Bk={class:"player-manager-content"},Mk={class:"player-manager-body"},Lk={class:"add-counter-form"},Nk={class:"counter-manage-list"},Vk=["onUpdate:modelValue","onChange"],jk=["onUpdate:modelValue","onChange"],Fk=["onUpdate:modelValue","onChange"],Uk={class:"visibility-toggle"},zk=["checked","onChange"],qk=["onClick"],Wk={__name:"PlayerManager",emits:["close"],setup(e,{emit:t}){const n=t,o=df(),{players:a,mostUsedXpValues:r}=_o(o),i=pe(""),l=pe(null),c=pe({}),u=pe(new Set),p=pe(new Set),d=pe(new Set),m=pe(!1),v=pe(null),C=pe(!1),w=pe(null),g=pe([]),S=pe({name:"",value:0,step:1}),L=Y=>{Y.key==="Escape"&&(C.value?Z():m.value?m.value=!1:n("close"))};qt(()=>{o.loadData(),document.body.classList.add("modal-open"),a.value.forEach(Y=>{c.value[Y.id]=null}),document.addEventListener("keydown",L)}),io(()=>{document.body.classList.remove("modal-open"),document.removeEventListener("keydown",L)});const B=()=>{i.value.trim()&&(o.addPlayer(i.value),i.value="")},V=Y=>{xe.fire({title:"Ests seguro?",text:"No podrs revertir esta accin.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"S, elimnalo!",cancelButtonText:"Cancelar",customClass:{container:"high-z-index"}}).then(U=>{U.isConfirmed&&(o.deletePlayer(Y),xe.fire("Eliminado!","El jugador ha sido eliminado.","success"))})},T=Y=>{const U=c.value[Y];U&&U>0&&(o.addXpToPlayer(Y,U),c.value[Y]=null)},te=Y=>{const U=c.value[Y];U&&U>0&&(o.removeXpFromPlayer(Y,U),c.value[Y]=null)},ee=(Y,U)=>{o.addXpToPlayer(Y,U)},ae=()=>{l.value&&l.value>0&&(o.addXpToAllPlayers(l.value),l.value=null)},j=()=>{xe.fire({title:"Iniciar una nueva sesin?",text:"Esto resetear la XP de la sesin actual de todos los jugadores a 0.",icon:"question",showCancelButton:!0,confirmButtonText:"S, iniciar",cancelButtonText:"Cancelar",customClass:{container:"high-z-index"}}).then(Y=>{Y.isConfirmed&&(o.startNewSession(),xe.fire({title:"Nueva sesin iniciada!",text:"La XP de la sesin ha sido reseteada.",icon:"success",customClass:{container:"high-z-index"}}))})},H=Y=>{u.value.has(Y)?u.value.delete(Y):u.value.add(Y)},N=Y=>{v.value={...Y},m.value=!0},R=()=>{v.value&&(o.editPlayer(v.value.id,{name:v.value.name}),m.value=!1,v.value=null)},E=Y=>{p.value.has(Y)?p.value.delete(Y):p.value.add(Y)},K=Y=>{o.editPlayer(Y.id,{notes:Y.notes})},$e=Y=>{d.value.has(Y)?d.value.delete(Y):d.value.add(Y)},se=Y=>{w.value=Y;const U=a.value.find(ce=>ce.id===Y);U&&(g.value=JSON.parse(JSON.stringify(U.counters))),C.value=!0},Z=()=>{C.value=!1,w.value=null,g.value=[]},Ee=()=>{if(w.value&&S.value.name.trim()){o.addCounter(w.value,{...S.value});const Y=a.value.find(U=>U.id===w.value);Y&&(g.value=JSON.parse(JSON.stringify(Y.counters))),S.value={name:"",value:0,step:1}}},je=(Y,U)=>{o.editCounter(w.value,Y.id,{[U]:Y[U]})},z=Y=>{o.editCounter(w.value,Y.id,{isVisible:!Y.isVisible});const U=g.value.find(ce=>ce.id===Y.id);U&&(U.isVisible=!U.isVisible)},M=Y=>{xe.fire({title:"Eliminar este contador?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"S, eliminar",cancelButtonText:"Cancelar",customClass:{container:"high-z-index-2"}}).then(U=>{U.isConfirmed&&(o.deleteCounter(w.value,Y),g.value=g.value.filter(ce=>ce.id!==Y))})};return(Y,U)=>($(),D("div",{class:"player-manager-overlay",onClick:U[10]||(U[10]=Ge(ce=>Y.$emit("close"),["self"]))},[s("div",U_,[s("div",z_,[U[12]||(U[12]=s("h2",null,[s("i",{class:"bi bi-person-badge"}),le(" Gestin de Jugadores")],-1)),s("button",{onClick:U[0]||(U[0]=ce=>Y.$emit("close")),class:"btn-close"},U[11]||(U[11]=[s("i",{class:"bi bi-x-lg"},null,-1)]))]),s("div",q_,[s("div",W_,[s("button",{onClick:j,class:"btn btn-warning"},U[13]||(U[13]=[s("i",{class:"bi bi-play-circle"},null,-1),le(" Iniciar Nueva Sesin ")])),s("div",K_,[oe(s("input",{type:"number","onUpdate:modelValue":U[1]||(U[1]=ce=>l.value=ce),placeholder:"XP para todos",min:"1",onKeyup:xn(ae,["enter"])},null,544),[[ge,l.value,void 0,{number:!0}]]),s("button",{onClick:ae,disabled:!l.value||l.value<=0,class:"btn btn-info"},U[14]||(U[14]=[s("i",{class:"bi bi-people-fill"},null,-1),le(" Dar a Todos ")]),8,Y_)])]),s("div",X_,[oe(s("input",{type:"text","onUpdate:modelValue":U[2]||(U[2]=ce=>i.value=ce),placeholder:"Nombre del nuevo jugador",onKeyup:xn(B,["enter"])},null,544),[[ge,i.value]]),s("button",{onClick:B,disabled:!i.value.trim(),class:"btn btn-primary"},U[15]||(U[15]=[s("i",{class:"bi bi-plus-circle"},null,-1),le(" Aadir Jugador ")]),8,G_)]),s("div",J_,[ue(a).length===0?($(),D("div",Q_,U[16]||(U[16]=[s("p",null,"An no hay jugadores. Aade el primero para empezar!",-1)]))):we("",!0),($(!0),D(Le,null,qe(ue(a),ce=>($(),D("div",{key:ce.id,class:"player-card"},[s("div",Z_,[s("h3",ek,W(ce.name),1),s("div",tk,[U[17]||(U[17]=le(" XP Sesin: ")),s("strong",null,W(ce.sessionXp),1)])]),s("div",nk,[s("div",ok,[oe(s("input",{type:"number","onUpdate:modelValue":De=>c.value[ce.id]=De,placeholder:"Aadir XP",min:"1",class:"xp-input",onKeyup:xn(De=>T(ce.id),["enter"])},null,40,sk),[[ge,c.value[ce.id],void 0,{number:!0}]]),s("button",{onClick:De=>T(ce.id),disabled:!c.value[ce.id]||c.value[ce.id]<=0,class:"btn btn-success btn-sm"},U[18]||(U[18]=[s("i",{class:"bi bi-plus"},null,-1)]),8,ak),s("button",{onClick:De=>te(ce.id),disabled:!c.value[ce.id]||c.value[ce.id]<=0,class:"btn btn-danger btn-sm"},U[19]||(U[19]=[s("i",{class:"bi bi-dash"},null,-1)]),8,rk)]),s("div",ik,[($(!0),D(Le,null,qe(ue(r),De=>($(),D("button",{key:De,onClick:dt=>ee(ce.id,De),class:"btn btn-outline-primary btn-sm"}," +"+W(De)+" XP ",9,lk))),128))])]),s("div",ck,[s("button",{onClick:De=>H(ce.id),class:"btn btn-link btn-sm"},U[20]||(U[20]=[s("i",{class:"bi bi-clock-history"},null,-1),le(" Ver Historial ")]),8,uk),s("button",{onClick:De=>$e(ce.id),class:"btn btn-link btn-sm"},U[21]||(U[21]=[s("i",{class:"bi bi-plus-slash-minus"},null,-1),le(" Contadores ")]),8,dk),s("button",{onClick:De=>E(ce.id),class:"btn btn-link btn-sm"},U[22]||(U[22]=[s("i",{class:"bi bi-journal-text"},null,-1),le(" Notas ")]),8,fk),s("div",null,[s("button",{onClick:De=>N(ce),class:"btn btn-secondary btn-sm"},U[23]||(U[23]=[s("i",{class:"bi bi-pencil"},null,-1),le(" Editar ")]),8,pk),s("button",{onClick:De=>V(ce.id),class:"btn btn-danger btn-sm"},U[24]||(U[24]=[s("i",{class:"bi bi-trash"},null,-1)]),8,mk)])]),u.value.has(ce.id)?($(),D("div",hk,[U[25]||(U[25]=s("h4",null,"Historial de XP (Sesin)",-1)),s("ul",null,[($(!0),D(Le,null,qe(ce.xpHistory,(De,dt)=>($(),D("li",{key:dt,class:rt({"xp-gain":De.amount>0,"xp-loss":De.amount<0})},[le(W(De.amount>0?"+":"")+W(De.amount)+" XP ",1),s("span",gk,W(new Date(De.timestamp).toLocaleTimeString()),1)],2))),128)),ce.xpHistory.length===0?($(),D("li",vk," No hay entradas de XP en esta sesin. ")):we("",!0)])])):we("",!0),d.value.has(ce.id)?($(),D("div",bk,[s("div",wk,[U[27]||(U[27]=s("h4",null,"Contadores",-1)),s("button",{onClick:De=>se(ce.id),class:"btn btn-secondary btn-sm"},U[26]||(U[26]=[s("i",{class:"bi bi-gear"},null,-1),le(" Gestionar ")]),8,yk)]),s("div",Ck,[($(!0),D(Le,null,qe(ce.counters.filter(De=>De.isVisible),De=>($(),D("div",{key:De.id,class:"counter-item"},[s("span",xk,W(De.name),1),s("div",_k,[s("button",{onClick:dt=>ue(o).updateCounterValue(ce.id,De.id,-De.step),class:"btn btn-danger btn-sm"},"-",8,kk),s("span",Sk,W(De.value),1),s("button",{onClick:dt=>ue(o).updateCounterValue(ce.id,De.id,De.step),class:"btn btn-success btn-sm"},"+",8,$k)])]))),128)),ce.counters.filter(De=>De.isVisible).length===0?($(),D("div",Ek," No hay contadores visibles. ")):we("",!0)])])):we("",!0),p.value.has(ce.id)?($(),D("div",Dk,[oe(s("textarea",{"onUpdate:modelValue":De=>ce.notes=De,onInput:De=>K(ce),placeholder:"Aade tus notas aqu...",class:"notes-textarea"},null,40,Tk),[[ge,ce.notes]])])):we("",!0)]))),128))])])]),m.value?($(),D("div",{key:0,class:"player-manager-overlay edit-modal",onClick:U[6]||(U[6]=Ge(ce=>m.value=!1,["self"]))},[s("div",Ak,[s("div",Ik,[U[29]||(U[29]=s("h2",null,[s("i",{class:"bi bi-pencil-square"}),le(" Editar Jugador")],-1)),s("button",{onClick:U[3]||(U[3]=ce=>m.value=!1),class:"btn-close"},U[28]||(U[28]=[s("i",{class:"bi bi-x-lg"},null,-1)]))]),s("div",Rk,[v.value?($(),D("div",Pk,[s("div",Hk,[U[30]||(U[30]=s("label",{for:"playerName"},"Nombre del Jugador",-1)),oe(s("input",{id:"playerName",type:"text","onUpdate:modelValue":U[4]||(U[4]=ce=>v.value.name=ce),class:"form-control"},null,512),[[ge,v.value.name]])]),s("div",Ok,[s("button",{onClick:U[5]||(U[5]=ce=>m.value=!1),class:"btn btn-secondary"}," Cancelar "),s("button",{onClick:R,class:"btn btn-primary"}," Guardar Cambios ")])])):we("",!0)])])])):we("",!0),C.value?($(),D("div",{key:1,class:"player-manager-overlay edit-modal",onClick:Ge(Z,["self"])},[s("div",Bk,[s("div",{class:"player-manager-header"},[U[32]||(U[32]=s("h2",null,[s("i",{class:"bi bi-gear"}),le(" Gestionar Contadores")],-1)),s("button",{onClick:Z,class:"btn-close"},U[31]||(U[31]=[s("i",{class:"bi bi-x-lg"},null,-1)]))]),s("div",Mk,[s("div",Lk,[oe(s("input",{type:"text","onUpdate:modelValue":U[7]||(U[7]=ce=>S.value.name=ce),placeholder:"Nombre"},null,512),[[ge,S.value.name]]),oe(s("input",{type:"number","onUpdate:modelValue":U[8]||(U[8]=ce=>S.value.value=ce),placeholder:"Valor inicial"},null,512),[[ge,S.value.value,void 0,{number:!0}]]),oe(s("input",{type:"number","onUpdate:modelValue":U[9]||(U[9]=ce=>S.value.step=ce),placeholder:"Paso (+/-)"},null,512),[[ge,S.value.step,void 0,{number:!0}]]),s("button",{onClick:Ee,class:"btn btn-primary"},"Aadir")]),s("div",Nk,[U[35]||(U[35]=s("div",{class:"counter-manage-header-labels"},[s("span",null,"Nombre"),s("span",null,"Valor"),s("span",null,"Paso"),s("span",null,"Visible"),s("span",null,"Acciones")],-1)),($(!0),D(Le,null,qe(g.value,ce=>($(),D("div",{key:ce.id,class:"counter-manage-item"},[oe(s("input",{type:"text","onUpdate:modelValue":De=>ce.name=De,onChange:De=>je(ce,"name")},null,40,Vk),[[ge,ce.name]]),oe(s("input",{type:"number","onUpdate:modelValue":De=>ce.value=De,onChange:De=>je(ce,"value")},null,40,jk),[[ge,ce.value,void 0,{number:!0}]]),oe(s("input",{type:"number","onUpdate:modelValue":De=>ce.step=De,onChange:De=>je(ce,"step")},null,40,Fk),[[ge,ce.step,void 0,{number:!0}]]),s("label",Uk,[s("input",{type:"checkbox",checked:ce.isVisible,onChange:De=>z(ce)},null,40,zk),U[33]||(U[33]=s("span",{class:"slider"},null,-1))]),s("button",{onClick:De=>M(ce.id),class:"btn btn-danger btn-sm"},U[34]||(U[34]=[s("i",{class:"bi bi-trash"},null,-1)]),8,qk)]))),128))])])])])):we("",!0)]))}},Kk=Tt(Wk,[["__scopeId","data-v-6a40332d"]]),Yk={class:"dm-view"},Xk={class:"dm-header"},Gk={class:"dm-header-top"},Jk={class:"turn-controls"},Qk={class:"turn-label"},Zk=["disabled"],eS=["disabled"],tS={class:"global-controls"},nS={class:"stats-overview"},oS={class:"stat-card"},sS={class:"stat-content"},aS={class:"stat-value"},rS={class:"stat-card alive"},iS={class:"stat-content"},lS={class:"stat-value"},cS={class:"stat-card dead"},uS={class:"stat-content"},dS={class:"stat-value"},fS={class:"stat-card"},pS={class:"stat-content"},mS={class:"stat-value"},hS={class:"create-character-section"},gS={class:"characters-section"},vS={class:"section-header"},bS={class:"sort-controls"},wS={key:0,class:"no-characters"},yS={key:1,class:"characters-grid"},CS={class:"character-header"},xS={class:"character-name"},_S={class:"character-actions"},kS=["onClick"],SS=["onClick"],$S=["onClick"],ES={class:"character-stats"},DS={class:"hp-section"},TS={class:"hp-bar-container"},AS={class:"hp-bar"},IS={class:"hp-text"},RS={key:0,class:"necro-indicator",title:"HP mximo reducido por dao necro"},PS={key:0,class:"temp-hp"},HS={class:"temp-hp-value"},OS={key:1,class:"defeated-by"},BS={class:"defeated-by-hero"},MS={class:"character-details"},LS={class:"detail-item"},NS={class:"detail-value"},VS={class:"detail-item"},jS={key:0,class:"detail-item"},FS={class:"detail-value"},US={key:1,class:"detail-item"},zS={class:"detail-value"},qS={key:2,class:"detail-item"},WS={class:"detail-value"},KS={key:3,class:"detail-item"},YS={class:"detail-value"},XS={key:4,class:"detail-item"},GS={class:"detail-value"},JS={key:5,class:"attributes-display"},QS={class:"attributes-list"},ZS={key:0,class:"attribute-item fuerza"},e$={class:"attribute-value"},t$={key:1,class:"attribute-item inteligencia"},n$={class:"attribute-value"},o$={key:2,class:"attribute-item destreza"},s$={class:"attribute-value"},a$={key:3,class:"attribute-item sabiduria"},r$={class:"attribute-value"},i$={key:4,class:"attribute-item constitucion"},l$={class:"attribute-value"},c$={key:5,class:"attribute-item carisma"},u$={class:"attribute-value"},d$={key:6,class:"detail-item notas"},f$={class:"detail-value"},p$={class:"actions-toggle"},m$=["onClick"],h$={class:"action-group"},g$={class:"action-inputs"},v$=["onUpdate:modelValue","onKeyup"],b$=["onClick","disabled"],w$={class:"necro-checkbox"},y$={class:"necro-label"},C$=["onUpdate:modelValue"],x$={class:"action-group"},_$={class:"action-inputs"},k$=["onUpdate:modelValue","onKeyup"],S$=["onClick","disabled"],$$={class:"necro-checkbox"},E$={class:"necro-label"},D$=["onUpdate:modelValue"],T$={class:"action-group"},A$={class:"action-inputs"},I$=["onUpdate:modelValue","onKeyup"],R$=["onClick","disabled"],P$={class:"action-group"},H$={class:"action-inputs"},O$=["onUpdate:modelValue","onKeyup"],B$=["onClick","disabled"],M$={class:"reset-buttons"},L$=["onClick"],N$=["onClick"],V$=["onClick"],j$={class:"character-attacks-section"},F$={class:"attacks-header"},U$=["onClick"],z$={key:0,class:"attack-search-bar"},q$=["onUpdate:modelValue"],W$={key:1,class:"attacks-preview-list"},K$={class:"attack-preview-info"},Y$={class:"attack-preview-name"},X$={class:"attack-preview-summary"},G$={class:"attack-preview-actions"},J$=["onClick"],Q$=["onClick"],Z$={key:2,class:"no-attacks-preview"},eE=["onClick"],tE={class:"modal-header"},nE={class:"modal-body"},oE={class:"form-group"},sE={class:"form-group"},aE={class:"form-group"},rE={class:"form-group"},iE={class:"form-group"},lE={class:"form-group"},cE={class:"form-group"},uE={class:"attributes-section"},dE={class:"attributes-grid",id:"tiradas-salvacion"},fE={class:"attribute-column"},pE={class:"form-group attribute-input"},mE={class:"form-group attribute-input"},hE={class:"form-group attribute-input"},gE={class:"attribute-column"},vE={class:"form-group attribute-input"},bE={class:"form-group attribute-input"},wE={class:"form-group attribute-input"},yE={class:"form-group"},CE={class:"modal-actions"},xE={class:"modal-header"},_E={class:"modal-body"},kE={class:"form-group"},SE={class:"form-group"},$E={class:"form-group"},EE=["max"],DE={class:"form-group"},TE={class:"form-group"},AE={class:"form-group"},IE={class:"form-group"},RE={class:"form-group"},PE={class:"attributes-section"},HE={class:"attributes-grid"},OE={class:"attribute-column"},BE={class:"form-group attribute-input"},ME={class:"form-group attribute-input"},LE={class:"form-group attribute-input"},NE={class:"attribute-column"},VE={class:"form-group attribute-input"},jE={class:"form-group attribute-input"},FE={class:"form-group attribute-input"},UE={class:"form-group"},zE={class:"modal-actions"},qE={class:"modal-header"},WE={class:"modal-body"},KE={class:"form-group"},YE={key:0,class:"form-group"},XE={class:"modal-header"},GE={class:"modal-body"},JE={class:"import-options"},QE={class:"import-option"},ZE={class:"modal-actions"},eD=["disabled"],tD={class:"modal-header"},nD={class:"modal-body"},oD={class:"death-notification"},sD={class:"hp-status"},aD={class:"hp-dead"},rD={class:"form-group"},iD={class:"modal-actions"},lD=["disabled"],cD={class:"modal-header"},uD={class:"modal-body"},dD={class:"add-todo"},fD={class:"todo-list"},pD=["onUpdate:modelValue","onChange"],mD=["onClick"],hD={__name:"DMView",setup(e){const t=uf(),n=df(),{players:o}=_o(n),a=pe({}),r=pe({}),i=F=>{a.value[F]=!a.value[F]},l=F=>{const f=(r.value[F.id]||"").toLowerCase();return f?F.attacks.filter(y=>y.name.toLowerCase().includes(f)):F.attacks},c=(F,f)=>{ff(F,f,t.criticalHit)},u=pe(!1),p=pe(!1),d=pe(null),m=pe(!1),v=pe(!1),C=pe(!1),w=pe({rule:t.criticalHit.rule,characterLevel:t.criticalHit.characterLevel}),g=()=>{t.updateCriticalHitConfig(w.value),C.value=!1,xe.fire("Guardado","La configuracin de dao crtico ha sido actualizada.","success")},S=pe(!1),L=pe(!1),B=pe(!1),V=pe(!1),T=pe(!1),te=pe("name"),ee=pe(""),ae=pe(null),j=pe(""),H=pe([]),N=pe(""),R=pe(null),E=pe(null),K=pe({name:"",maxHp:"",regeneration:"",xp:"",resistencias:"",inmunidades:"",fuerza:"",destreza:"",constitucion:"",inteligencia:"",sabiduria:"",carisma:"",notas:"",ca:"",necroDamage:!1,necroResistantDamage:!1}),$e=Je(()=>{switch(te.value){case"hp":return t.charactersByHp;case"created":return[...t.characters].sort((F,f)=>new Date(f.createdAt)-new Date(F.createdAt));default:return t.charactersByName}}),se=()=>{K.value.name&&K.value.maxHp&&(t.createCharacter(K.value.name,K.value.maxHp,K.value.regeneration,K.value.xp,K.value.resistencias,K.value.inmunidades,K.value.fuerza,K.value.destreza,K.value.constitucion,K.value.inteligencia,K.value.sabiduria,K.value.carisma,K.value.notas,K.value.ca),K.value={name:"",maxHp:"",regeneration:"",xp:"",resistencias:"",inmunidades:"",fuerza:"",destreza:"",constitucion:"",inteligencia:"",sabiduria:"",carisma:"",notas:"",ca:"",necroDamage:!1,necroResistantDamage:!1},S.value=!1)},Z=F=>{E.value={...F},L.value=!0},Ee=()=>{E.value&&(t.editCharacter(E.value.id,{name:E.value.name,maxHp:E.value.maxHp,currentHp:E.value.currentHp,regeneration:E.value.regeneration,xp:E.value.xp,resistencias:E.value.resistencias,inmunidades:E.value.inmunidades,fuerza:E.value.fuerza,destreza:E.value.destreza,constitucion:E.value.constitucion,inteligencia:E.value.inteligencia,sabiduria:E.value.sabiduria,carisma:E.value.carisma,notas:E.value.notas,ca:E.value.ca}),L.value=!1,E.value=null)},je=F=>{confirm("Ests seguro de que quieres eliminar este personaje?")&&t.deleteCharacter(F)},z=F=>{t.duplicateCharacter(F.id)},M=F=>{d.value=F},Y=F=>{if(F.damageInput&&F.damageInput>0){const f=F.currentHp,y=F.necroDamage||!1,_e=t.damageCharacter(F.id,F.damageInput,y);F.damageInput="",f>0&&_e&&_e.remainingHp<=0&&(ae.value=F,V.value=!0)}},U=F=>{if(F.resistantDamageInput&&F.resistantDamageInput>0){const f=Math.floor(F.resistantDamageInput/2),y=F.currentHp,_e=F.necroResistantDamage||!1,at=t.damageCharacter(F.id,f,_e);F.resistantDamageInput="",y>0&&at&&at.remainingHp<=0&&(ae.value=F,V.value=!0)}},ce=()=>{if(j.value.trim()&&ae.value){const F=j.value.trim();if(F.toLowerCase()===ae.value.name.toLowerCase()){alert("El nombre del hroe no puede ser el mismo que el personaje derrotado.");return}t.setDefeatedBy(ae.value.id,F),t.addLogToCharacter(ae.value.id,"Derrotado por",`Derrotado por ${F}`),De()}else alert("Por favor, escribe el nombre del hroe que derrot al personaje.")},De=()=>{V.value=!1,ae.value=null,j.value=""},dt=()=>{j.value.trim()?confirm("Ests seguro de que quieres cerrar? Se perder el nombre del hroe ingresado.")&&De():De()};cn(V,F=>{F&&$o(()=>{const f=document.getElementById("heroName");f&&f.focus()})}),qt(()=>{const F=f=>{f.key==="Escape"&&V.value&&dt()};document.addEventListener("keydown",F),io(()=>{document.removeEventListener("keydown",F)})});const G=F=>{F.healInput&&F.healInput>0&&(t.healCharacter(F.id,F.healInput),F.healInput="")},Se=F=>{F.tempHpInput&&F.tempHpInput>0&&(t.addTempHpToCharacter(F.id,F.tempHpInput),F.tempHpInput="")},Ce=F=>{const f=t.getCharacterById(F);if(f&&f.maxHp<f.originalMaxHp){const y=f.maxHp;f.maxHp=f.originalMaxHp,t.addLogToCharacter(F,"Restaurar HP Mximo",`HP mximo restaurado de ${y} a ${f.originalMaxHp} (dao necro revertido)`),xe.fire({icon:"success",title:"HP Mximo Restaurado",text:`El HP mximo de ${f.name} ha sido restaurado de ${y} a ${f.originalMaxHp}`,timer:2e3,showConfirmButton:!1})}},Ae=async F=>{const f=t.getCharacterById(F);if(!f)return;if(f.maxHp<f.originalMaxHp){const _e=f.maxHp;f.maxHp=f.originalMaxHp,t.addLogToCharacter(F,"Restaurar HP Mximo",`HP mximo restaurado de ${_e} a ${f.originalMaxHp} (dao necro revertido)`)}const{value:y}=await xe.fire({title:`Cmo quieres revivir a ${f.name}?`,html:`
      <div style='text-align:left;'>
        <label><input type='radio' name='reviveOption' value='1' checked> Revivir con 1 HP</label><br>
        <label><input type='radio' name='reviveOption' value='half'> Revivir con la mitad de la vida mxima (${Math.floor(f.maxHp/2)} HP)</label><br>
        <label><input type='radio' name='reviveOption' value='custom'> Revivir con cantidad personalizada:</label>
        <input id='customHpInput' type='number' min='1' max='${f.maxHp}' class='swal2-input' style='width:100%;margin:0;' placeholder='HP' disabled>
      </div>
    `,showCancelButton:!0,confirmButtonText:"Revivir",cancelButtonText:"Cancelar",preConfirm:()=>{const _e=document.querySelector('input[name="reviveOption"]:checked').value;if(_e==="custom"){const at=parseInt(document.getElementById("customHpInput").value);return isNaN(at)||at<1||at>f.maxHp?(xe.showValidationMessage(`Introduce un valor entre 1 y ${f.maxHp}`),!1):at}return _e==="half"?Math.floor(f.maxHp/2):1},didOpen:()=>{const _e=xe.getHtmlContainer().querySelectorAll('input[name="reviveOption"]'),at=xe.getHtmlContainer().querySelector("#customHpInput");_e.forEach(co=>{co.addEventListener("change",()=>{co.value==="custom"?(at.disabled=!1,at.focus()):at.disabled=!0})})}});y&&y>0&&t.reviveCharacter(F,y)},Ze=F=>{const f=F.currentHp/F.maxHp*100;return f>75?"hp-high":f>50?"hp-medium":f>25?"hp-low":"hp-critical"},x=F=>F.currentHp<=0?"status-dead":F.currentHp<=F.maxHp*.25?"status-critical":F.currentHp<=F.maxHp*.5?"status-wounded":"status-healthy",_=F=>F.currentHp<=0?"Muerto":F.currentHp<=F.maxHp*.25?"Crtico":F.currentHp<=F.maxHp*.5?"Herido":"Saludable",P=F=>{const f=parseInt(F);return isNaN(f)?F:f>=0?`+${f}`:`${f}`},X=F=>F.fuerza||F.destreza||F.constitucion||F.inteligencia||F.sabiduria||F.carisma,ne=()=>{const F=t.exportCharacters(),f=new Blob([F],{type:"application/json"}),y=URL.createObjectURL(f),_e=document.createElement("a");_e.href=y,_e.download=`dnd-characters-${new Date().toISOString().split("T")[0]}.json`,_e.click(),URL.revokeObjectURL(y)},Q=()=>{R.value&&R.value.click()},ye=F=>{const f=F.target.files[0];if(f){const y=new FileReader;y.onload=_e=>{try{const at=_e.target.result;t.importCharacters(at)?(alert("Personajes importados correctamente desde el archivo"),B.value=!1,F.target.value=""):alert("Error al importar los personajes. Verifica que el archivo contenga datos vlidos.")}catch(at){alert("Error al leer el archivo. Verifica que sea un archivo JSON vlido."),console.error("Error importing file:",at)}},y.onerror=()=>{alert("Error al leer el archivo. Intntalo de nuevo.")},y.readAsText(f)}},he=()=>{ee.value.trim()&&(t.importCharacters(ee.value)?(alert("Personajes importados correctamente"),ee.value="",B.value=!1):alert("Error al importar los personajes. Verifica el formato JSON."))},me=()=>{v.value=!v.value},re=()=>{xe.fire({title:"Limpiar todos los logs?",text:"Esta accin eliminar todo el historial de logs de todos los personajes. Esta accin no se puede deshacer.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"S, limpiar logs",cancelButtonText:"Cancelar"}).then(F=>{F.isConfirmed&&(t.clearAllLogs(),xe.fire({icon:"success",title:"Logs Limpiados",text:"Todos los logs han sido eliminados correctamente",timer:2e3,showConfirmButton:!1}))})},Re=()=>{const F=[];t.characters.forEach(y=>{y.logs.forEach(_e=>{F.push({..._e,characterName:y.name})})}),F.sort((y,_e)=>new Date(_e.timestamp)-new Date(y.timestamp));let f='<div style="max-height: 400px; overflow-y: auto;">';F.length===0?f+='<p style="text-align: center; color: #666;">No hay logs para mostrar</p>':F.forEach(y=>{f+=`
        <div style="border-bottom: 1px solid #eee; padding: 10px 0; margin-bottom: 10px;">
          <div style="font-weight: bold; color: #f39c12;">${y.characterName}</div>
          <div style="color: #333;">${y.action}: ${y.details}</div>
          <div style="font-size: 0.8em; color: #666;">Turno ${y.turn} - ${y.timestamp}</div>
        </div>
      `}),f+="</div>",xe.fire({title:"Historial de Logs - Todos los Personajes",html:f,width:"800px",confirmButtonText:"Cerrar",confirmButtonColor:"#3085d6"})},ke=()=>{t.characters.forEach(F=>{F.damageInput="",F.healInput="",F.tempHpInput="",F.resistantDamageInput="",F.necroDamage=!1,F.necroResistantDamage=!1})},Te=pe(new Set),Oe=F=>{const f=new Set(Te.value);f.has(F)?f.delete(F):f.add(F),Te.value=f},Fe=()=>{u.value=!u.value},Ye=F=>Te.value.has(F);cn(Te,F=>{const f=Array.from(F);localStorage.setItem("collapsedCharacters",JSON.stringify(f))},{deep:!0});const We=()=>{if(N.value.trim()==="")return;const F={id:Date.now(),text:N.value.trim(),completed:!1,createdAt:new Date().toISOString()};H.value.push(F),N.value="",At()},Et=F=>{H.value=H.value.filter(f=>f.id!==F),At()},$t=F=>{H.value.find(y=>y.id===F)&&At()},At=()=>{localStorage.setItem("dnd-todo-items",JSON.stringify(H.value))},Vt=()=>{const F=localStorage.getItem("dnd-todo-items");if(F)try{H.value=JSON.parse(F)}catch(f){console.error("Error loading todo items:",f),H.value=[]}};return qt(()=>{const F=localStorage.getItem("collapsedCharacters");if(F)try{const f=JSON.parse(F);Te.value=new Set(f)}catch(f){console.error("Error loading collapsed characters state:",f),Te.value=new Set}Vt(),t.loadData(),n.loadData(),ke()}),(F,f)=>($(),D("div",Yk,[s("div",Xk,[s("div",Gk,[f[68]||(f[68]=s("h1",{class:"dm-title"},[s("i",{class:"bi bi-shield-fill"}),le(" Panel del Dungeon Master ")],-1)),s("button",{onClick:me,class:"mobile-menu-toggle"},[s("i",{class:rt(["bi",v.value?"bi-x-lg":"bi-list"])},null,2)])]),s("div",{class:rt(["dm-controls",{"mobile-open":v.value}])},[s("div",Jk,[s("span",Qk,"Turno: "+W(ue(t).currentTurn),1),s("button",{onClick:f[0]||(f[0]=y=>ue(t).startTurn()),class:"btn btn-success",disabled:ue(t).isTurnActive},f[69]||(f[69]=[s("i",{class:"bi bi-play-fill"},null,-1),s("span",{class:"btn-text"},"Iniciar Turno",-1)]),8,Zk),s("button",{onClick:f[1]||(f[1]=y=>ue(t).endTurn()),class:"btn btn-warning",disabled:!ue(t).isTurnActive},f[70]||(f[70]=[s("i",{class:"bi bi-stop-fill"},null,-1),s("span",{class:"btn-text"},"Finalizar Turno",-1)]),8,eS),s("button",{onClick:f[2]||(f[2]=y=>ue(t).resetAllTurns()),class:"btn btn-secondary"},f[71]||(f[71]=[s("i",{class:"bi bi-arrow-clockwise"},null,-1),s("span",{class:"btn-text"},"Reset Turnos",-1)]))]),s("div",tS,[s("button",{onClick:f[3]||(f[3]=y=>ue(t).resetAllCharacters()),class:"btn btn-info"},f[72]||(f[72]=[s("i",{class:"bi bi-heart-fill"},null,-1),s("span",{class:"btn-text"},"Reset Todos",-1)])),s("button",{onClick:re,class:"btn btn-warning"},f[73]||(f[73]=[s("i",{class:"bi bi-trash"},null,-1),s("span",{class:"btn-text"},"Limpiar Logs",-1)])),s("button",{onClick:Re,class:"btn btn-outline-info"},f[74]||(f[74]=[s("i",{class:"bi bi-journal-text"},null,-1),s("span",{class:"btn-text"},"Ver Logs",-1)])),s("button",{onClick:Q,class:"btn btn-outline-primary"},f[75]||(f[75]=[s("i",{class:"bi bi-upload"},null,-1),s("span",{class:"btn-text"},"Importar",-1)])),s("button",{onClick:ne,class:"btn btn-outline-success"},f[76]||(f[76]=[s("i",{class:"bi bi-download"},null,-1),s("span",{class:"btn-text"},"Exportar",-1)])),s("button",{onClick:Fe,class:"btn btn-outline-secondary"},f[77]||(f[77]=[s("i",{class:"bi bi-list"},null,-1),s("span",{class:"btn-text"},"Lista Iniciativa",-1)])),s("button",{onClick:f[4]||(f[4]=y=>T.value=!0),class:"btn btn-outline-primary"},f[78]||(f[78]=[s("i",{class:"bi bi-check-circle"},null,-1),s("span",{class:"btn-text"},"Todo List",-1)])),s("button",{onClick:f[5]||(f[5]=y=>p.value=!0),class:"btn btn-outline-info"},f[79]||(f[79]=[s("i",{class:"bi bi-dice-6"},null,-1),s("span",{class:"btn-text"},"Lanzar Dados",-1)])),s("button",{onClick:f[6]||(f[6]=y=>m.value=!0),class:"btn btn-outline-info"},f[80]||(f[80]=[s("i",{class:"bi bi-person-badge"},null,-1),s("span",{class:"btn-text"},"Gestin de Jugadores",-1)])),s("button",{onClick:f[7]||(f[7]=y=>C.value=!0),class:"btn btn-outline-secondary"},f[81]||(f[81]=[s("i",{class:"bi bi-gear-fill"},null,-1),s("span",{class:"btn-text"},"Configuracin",-1)]))])],2)]),p.value?($(),On(Sx,{key:0,characters:ue(t).characters,onClose:f[8]||(f[8]=y=>p.value=!1)},null,8,["characters"])):we("",!0),d.value?($(),On(F_,{key:1,"character-id":d.value,onClose:f[9]||(f[9]=y=>d.value=null)},null,8,["character-id"])):we("",!0),m.value?($(),On(Kk,{key:2,onClose:f[10]||(f[10]=y=>m.value=!1)})):we("",!0),s("div",nS,[s("div",oS,[f[83]||(f[83]=s("div",{class:"stat-icon"},"",-1)),s("div",sS,[s("div",aS,W(ue(t).characters.length),1),f[82]||(f[82]=s("div",{class:"stat-label"},"Total Personajes",-1))])]),s("div",rS,[f[85]||(f[85]=s("div",{class:"stat-icon"},"",-1)),s("div",iS,[s("div",lS,W(ue(t).aliveCount),1),f[84]||(f[84]=s("div",{class:"stat-label"},"Vivos",-1))])]),s("div",cS,[f[87]||(f[87]=s("div",{class:"stat-icon"},"",-1)),s("div",uS,[s("div",dS,W(ue(t).deadCount),1),f[86]||(f[86]=s("div",{class:"stat-label"},"Muertos",-1))])]),s("div",fS,[f[89]||(f[89]=s("div",{class:"stat-icon"},"",-1)),s("div",pS,[s("div",mS,W(ue(t).currentTurn),1),f[88]||(f[88]=s("div",{class:"stat-label"},"Turno Actual",-1))])])]),s("div",hS,[s("button",{onClick:f[11]||(f[11]=y=>S.value=!0),class:"btn btn-primary btn-lg"},f[90]||(f[90]=[s("i",{class:"bi bi-plus-circle"},null,-1),le(" Crear Nuevo Personaje ")]))]),s("div",gS,[s("div",vS,[s("h2",null,"Personajes ("+W(ue(t).characters.length)+")",1),s("div",bS,[oe(s("select",{"onUpdate:modelValue":f[12]||(f[12]=y=>te.value=y),class:"form-select"},f[91]||(f[91]=[s("option",{value:"name"},"Ordenar por Nombre",-1),s("option",{value:"hp"},"Ordenar por HP",-1),s("option",{value:"created"},"Ordenar por Creacin",-1)]),512),[[Ht,te.value]])])]),ue(t).characters.length===0?($(),D("div",wS,f[92]||(f[92]=[s("div",{class:"no-characters-icon"},"",-1),s("h3",null,"No hay personajes creados",-1),s("p",null,"Crea tu primer personaje para comenzar a gestionar la partida",-1)]))):($(),D("div",yS,[($(!0),D(Le,null,qe($e.value,y=>($(),D("div",{key:y.id,class:rt(["character-card",{dead:y.currentHp<=0,"low-hp":y.currentHp>0&&y.currentHp<=y.maxHp*.25}])},[s("div",CS,[s("h3",xS,W(y.name),1),s("div",_S,[s("button",{onClick:_e=>Z(y),class:"btn btn-sm btn-outline-primary"},f[93]||(f[93]=[s("i",{class:"bi bi-pencil"},null,-1)]),8,kS),s("button",{onClick:_e=>z(y),class:"btn btn-sm btn-outline-info",title:"Duplicar personaje"},f[94]||(f[94]=[s("i",{class:"bi bi-copy"},null,-1)]),8,SS),s("button",{onClick:_e=>je(y.id),class:"btn btn-sm btn-outline-danger"},f[95]||(f[95]=[s("i",{class:"bi bi-trash"},null,-1)]),8,$S)])]),s("div",ES,[s("div",DS,[s("div",TS,[s("div",AS,[s("div",{class:rt(["hp-fill",y.tempHp>0?"temp-hp":Ze(y)]),style:kn({width:`${y.currentHp/y.maxHp*100}%`})},null,6),y.maxHp<y.originalMaxHp?($(),D("div",{key:0,class:"necro-bar-indicator",style:kn({left:`${y.maxHp/y.originalMaxHp*100}%`}),title:"HP mximo reducido por dao necro"},null,4)):we("",!0)]),s("div",IS,[le(W(y.currentHp)+" / "+W(y.maxHp)+" HP ("+W(Math.round(y.currentHp/y.maxHp*100))+"%) ",1),y.maxHp<y.originalMaxHp?($(),D("span",RS,"  ")):we("",!0)])]),y.tempHp>0?($(),D("div",PS,[f[96]||(f[96]=s("span",{class:"temp-hp-label"},"Temporal:",-1)),s("span",HS,"+"+W(y.tempHp),1)])):we("",!0),y.defeatedBy?($(),D("div",OS,[f[97]||(f[97]=s("span",{class:"defeated-by-label"},"Derrotado por:",-1)),s("span",BS,W(y.defeatedBy),1)])):we("",!0)]),s("div",MS,[s("div",LS,[f[98]||(f[98]=s("span",{class:"detail-label"},"Regeneracin:",-1)),s("span",NS,W(y.regeneration||0)+" HP/turno",1)]),s("div",VS,[f[99]||(f[99]=s("span",{class:"detail-label"},"Estado:",-1)),s("span",{class:rt(["detail-value",x(y)])},W(_(y)),3)]),y.xp?($(),D("div",jS,[f[100]||(f[100]=s("span",{class:"detail-label"},"XP:",-1)),s("span",FS,W(y.xp),1)])):we("",!0),y.ca?($(),D("div",US,[f[101]||(f[101]=s("span",{class:"detail-label"},"CA:",-1)),s("span",zS,W(y.ca),1)])):we("",!0),y.resistencias?($(),D("div",qS,[f[102]||(f[102]=s("span",{class:"detail-label"},"Resistencias:",-1)),s("span",WS,W(y.resistencias),1)])):we("",!0),y.inmunidades?($(),D("div",KS,[f[103]||(f[103]=s("span",{class:"detail-label"},"Inmunidades:",-1)),s("span",YS,W(y.inmunidades),1)])):we("",!0),y.bonoTiradasSalvacion?($(),D("div",XS,[f[104]||(f[104]=s("span",{class:"detail-label"},"Bono Tiradas de Salvacion:",-1)),s("span",GS,W(y.bonoTiradasSalvacion),1)])):we("",!0),X(y)?($(),D("div",JS,[f[111]||(f[111]=s("div",{class:"attributes-header"},"Tiradas de Salvacin",-1)),s("div",QS,[y.fuerza?($(),D("div",ZS,[f[105]||(f[105]=s("span",{class:"attribute-label"},"FUE:",-1)),s("span",e$,W(P(y.fuerza)),1)])):we("",!0),y.inteligencia?($(),D("div",t$,[f[106]||(f[106]=s("span",{class:"attribute-label"},"INT:",-1)),s("span",n$,W(P(y.inteligencia)),1)])):we("",!0),y.destreza?($(),D("div",o$,[f[107]||(f[107]=s("span",{class:"attribute-label"},"DES:",-1)),s("span",s$,W(P(y.destreza)),1)])):we("",!0),y.sabiduria?($(),D("div",a$,[f[108]||(f[108]=s("span",{class:"attribute-label"},"SAB:",-1)),s("span",r$,W(P(y.sabiduria)),1)])):we("",!0),y.constitucion?($(),D("div",i$,[f[109]||(f[109]=s("span",{class:"attribute-label"},"CON:",-1)),s("span",l$,W(P(y.constitucion)),1)])):we("",!0),y.carisma?($(),D("div",c$,[f[110]||(f[110]=s("span",{class:"attribute-label"},"CAR:",-1)),s("span",u$,W(P(y.carisma)),1)])):we("",!0)])])):we("",!0),y.notas?($(),D("div",d$,[f[112]||(f[112]=s("span",{class:"detail-label"},"Notas:",-1)),s("span",f$,W(y.notas),1)])):we("",!0)])]),s("div",p$,[s("button",{onClick:_e=>Oe(y.id),class:rt(["toggle-actions-btn",{collapsed:Ye(y.id)}])},[f[113]||(f[113]=s("i",{class:"bi bi-chevron-up"},null,-1)),le(" "+W(Ye(y.id)?"Mostrar Acciones":"Ocultar Acciones"),1)],10,m$)]),s("div",{class:rt(["character-actions-panel",{collapsed:Ye(y.id)}])},[s("div",h$,[f[117]||(f[117]=s("label",{class:"action-label"},"Dao:",-1)),s("div",g$,[oe(s("input",{"onUpdate:modelValue":_e=>y.damageInput=_e,type:"number",class:"form-control form-control-sm",placeholder:"0",min:"0",onKeyup:xn(_e=>Y(y),["enter"])},null,40,v$),[[ge,y.damageInput]]),s("button",{onClick:_e=>Y(y),class:"btn btn-sm btn-danger",disabled:!y.damageInput||y.damageInput<=0},f[114]||(f[114]=[s("i",{class:"bi bi-lightning"},null,-1)]),8,b$)]),s("div",w$,[s("label",y$,[oe(s("input",{"onUpdate:modelValue":_e=>y.necroDamage=_e,type:"checkbox",class:"necro-input"},null,8,C$),[[ws,y.necroDamage]]),f[115]||(f[115]=s("span",{class:"necro-text"},"Dao Necro",-1)),f[116]||(f[116]=s("i",{class:"bi bi-info-circle necro-info-icon",title:"El dao necro reduce permanentemente el HP mximo hasta que se restaure. Afecta tanto a la vida temporal como a la vida actual."},null,-1))])])]),s("div",x$,[f[121]||(f[121]=s("label",{class:"action-label"},"Dao Resistente:",-1)),s("div",_$,[oe(s("input",{"onUpdate:modelValue":_e=>y.resistantDamageInput=_e,type:"number",class:"form-control form-control-sm",placeholder:"0",min:"0",onKeyup:xn(_e=>U(y),["enter"])},null,40,k$),[[ge,y.resistantDamageInput]]),s("button",{onClick:_e=>U(y),class:"btn btn-sm btn-danger",disabled:!y.resistantDamageInput||y.resistantDamageInput<=0},f[118]||(f[118]=[s("i",{class:"bi bi-shield-slash"},null,-1)]),8,S$)]),s("div",$$,[s("label",E$,[oe(s("input",{"onUpdate:modelValue":_e=>y.necroResistantDamage=_e,type:"checkbox",class:"necro-input"},null,8,D$),[[ws,y.necroResistantDamage]]),f[119]||(f[119]=s("span",{class:"necro-text"},"Dao Necro",-1)),f[120]||(f[120]=s("i",{class:"bi bi-info-circle necro-info-icon",title:"El dao necro reduce permanentemente el HP mximo hasta que se restaure. Afecta tanto a la vida temporal como a la vida actual."},null,-1))])])]),s("div",T$,[f[123]||(f[123]=s("label",{class:"action-label"},"Curacin:",-1)),s("div",A$,[oe(s("input",{"onUpdate:modelValue":_e=>y.healInput=_e,type:"number",class:"form-control form-control-sm",placeholder:"0",min:"0",onKeyup:xn(_e=>G(y),["enter"])},null,40,I$),[[ge,y.healInput]]),s("button",{onClick:_e=>G(y),class:"btn btn-sm btn-success",disabled:!y.healInput||y.healInput<=0},f[122]||(f[122]=[s("i",{class:"bi bi-heart"},null,-1)]),8,R$)])]),s("div",P$,[f[125]||(f[125]=s("label",{class:"action-label"},"Vida Temp:",-1)),s("div",H$,[oe(s("input",{"onUpdate:modelValue":_e=>y.tempHpInput=_e,type:"number",class:"form-control form-control-sm",placeholder:"0",min:"0",onKeyup:xn(_e=>Se(y),["enter"])},null,40,O$),[[ge,y.tempHpInput]]),s("button",{onClick:_e=>Se(y),class:"btn btn-sm btn-info",disabled:!y.tempHpInput||y.tempHpInput<=0},f[124]||(f[124]=[s("i",{class:"bi bi-shield"},null,-1)]),8,B$)])]),s("div",M$,[s("button",{onClick:_e=>ue(t).resetCharacterToMaxHp(y.id),class:rt(["btn btn-sm btn-outline-warning",{"w-100":y.maxHp>=y.originalMaxHp}])},f[126]||(f[126]=[s("i",{class:"bi bi-arrow-clockwise"},null,-1),le(" Reset HP ")]),10,L$),y.maxHp<y.originalMaxHp?($(),D("button",{key:0,onClick:_e=>Ce(y.id),class:"btn btn-sm btn-outline-danger",title:"Restaurar solo el HP mximo (dao necro)"},f[127]||(f[127]=[s("i",{class:"bi bi-heart-pulse"},null,-1),le(" Restaurar HP Mx ")]),8,N$)):we("",!0)]),y.currentHp<=0?($(),D("button",{key:0,onClick:_e=>Ae(y.id),class:"btn btn-sm btn-success w-100"},f[128]||(f[128]=[s("i",{class:"bi bi-heart-pulse"},null,-1),le(" Revivir ")]),8,V$)):we("",!0)],2),s("div",j$,[s("div",F$,[f[130]||(f[130]=s("h4",null,"Ataques",-1)),s("button",{onClick:_e=>i(y.id),class:"btn btn-sm btn-outline-secondary"},f[129]||(f[129]=[s("i",{class:"bi bi-search"},null,-1)]),8,U$)]),a.value[y.id]?($(),D("div",z$,[oe(s("input",{type:"text","onUpdate:modelValue":_e=>r.value[y.id]=_e,placeholder:"Buscar ataque...",class:"form-control form-control-sm"},null,8,q$),[[ge,r.value[y.id]]])])):we("",!0),y.attacks&&y.attacks.length>0?($(),D("div",W$,[($(!0),D(Le,null,qe(l(y),_e=>($(),D("div",{key:_e.id,class:"attack-preview-item"},[s("div",K$,[s("span",Y$,W(_e.name),1),s("div",X$,[($(!0),D(Le,null,qe(_e.damageRolls,(at,co)=>($(),D("span",{key:co,class:"damage-tag"},W(at.dice)+" "+W(at.type),1))),128))])]),s("div",G$,[s("button",{onClick:at=>c(_e,!1),class:"btn btn-sm btn-primary"},"Lanzar",8,J$),s("button",{onClick:at=>c(_e,!0),class:"btn btn-sm btn-danger"},"Crtico",8,Q$)])]))),128))])):($(),D("div",Z$,f[131]||(f[131]=[s("p",null,"No hay ataques definidos.",-1)]))),s("button",{onClick:_e=>M(y.id),class:"btn btn-sm btn-outline-warning w-100 mt-2"},f[132]||(f[132]=[s("i",{class:"bi bi-hammer"},null,-1),le(" Gestionar Ataques ")]),8,eE)])],2))),128))])),S.value?($(),D("div",{key:2,class:"modal-overlay",onClick:f[30]||(f[30]=y=>S.value=!1)},[s("div",{class:"modal-content",onClick:f[29]||(f[29]=Ge(()=>{},["stop"]))},[s("div",tE,[f[134]||(f[134]=s("h3",null,"Crear Nuevo Personaje",-1)),s("button",{onClick:f[13]||(f[13]=y=>S.value=!1),class:"btn-close"},f[133]||(f[133]=[s("i",{class:"bi bi-x-lg"},null,-1)]))]),s("div",nE,[s("form",{onSubmit:Ge(se,["prevent"])},[s("div",oE,[f[135]||(f[135]=s("label",{for:"characterName"},"Nombre del Personaje",-1)),oe(s("input",{id:"characterName","onUpdate:modelValue":f[14]||(f[14]=y=>K.value.name=y),type:"text",class:"form-control",placeholder:"Ej: Gandalf",required:""},null,512),[[ge,K.value.name]])]),s("div",sE,[f[136]||(f[136]=s("label",{for:"characterMaxHp"},"HP Mximo",-1)),oe(s("input",{id:"characterMaxHp","onUpdate:modelValue":f[15]||(f[15]=y=>K.value.maxHp=y),type:"number",class:"form-control",placeholder:"100",min:"1",required:""},null,512),[[ge,K.value.maxHp]])]),s("div",aE,[f[137]||(f[137]=s("label",{for:"characterRegeneration"},"Regeneracin por Turno (opcional)",-1)),oe(s("input",{id:"characterRegeneration","onUpdate:modelValue":f[16]||(f[16]=y=>K.value.regeneration=y),type:"number",class:"form-control",placeholder:"0",min:"0"},null,512),[[ge,K.value.regeneration]])]),s("div",rE,[f[138]||(f[138]=s("label",{for:"xp"},"XP:",-1)),oe(s("input",{id:"xp","onUpdate:modelValue":f[17]||(f[17]=y=>K.value.xp=y),type:"text",class:"form-control",placeholder:""},null,512),[[ge,K.value.xp]])]),s("div",iE,[f[139]||(f[139]=s("label",{for:"ca"},"CA (Clase de Armadura):",-1)),oe(s("input",{id:"ca","onUpdate:modelValue":f[18]||(f[18]=y=>K.value.ca=y),type:"text",class:"form-control",placeholder:""},null,512),[[ge,K.value.ca]])]),s("div",lE,[f[140]||(f[140]=s("label",{for:"resistencias"},"Resistencias:",-1)),oe(s("input",{id:"resistencias","onUpdate:modelValue":f[19]||(f[19]=y=>K.value.resistencias=y),type:"text",class:"form-control",placeholder:""},null,512),[[ge,K.value.resistencias]])]),s("div",cE,[f[141]||(f[141]=s("label",{for:"inmunidades"},"Inmunidades:",-1)),oe(s("input",{id:"inmunidades","onUpdate:modelValue":f[20]||(f[20]=y=>K.value.inmunidades=y),type:"text",class:"form-control",placeholder:""},null,512),[[ge,K.value.inmunidades]])]),s("div",uE,[f[148]||(f[148]=s("h4",{style:{color:"#ecf0f1","margin-bottom":"15px"}},"Tiradas de Salvacin",-1)),s("div",dE,[s("div",fE,[s("div",pE,[f[142]||(f[142]=s("label",{for:"fuerza"},"Fuerza:",-1)),oe(s("input",{id:"fuerza","onUpdate:modelValue":f[21]||(f[21]=y=>K.value.fuerza=y),type:"number",class:"form-control small-input",placeholder:"+0"},null,512),[[ge,K.value.fuerza]])]),s("div",mE,[f[143]||(f[143]=s("label",{for:"destreza"},"Destreza:",-1)),oe(s("input",{id:"destreza","onUpdate:modelValue":f[22]||(f[22]=y=>K.value.destreza=y),type:"number",class:"form-control small-input",placeholder:"+0"},null,512),[[ge,K.value.destreza]])]),s("div",hE,[f[144]||(f[144]=s("label",{for:"constitucion"},"Constitucin:",-1)),oe(s("input",{id:"constitucion","onUpdate:modelValue":f[23]||(f[23]=y=>K.value.constitucion=y),type:"number",class:"form-control small-input",placeholder:"+0"},null,512),[[ge,K.value.constitucion]])])]),s("div",gE,[s("div",vE,[f[145]||(f[145]=s("label",{for:"inteligencia"},"Inteligencia:",-1)),oe(s("input",{id:"inteligencia","onUpdate:modelValue":f[24]||(f[24]=y=>K.value.inteligencia=y),type:"number",class:"form-control small-input",placeholder:"+0"},null,512),[[ge,K.value.inteligencia]])]),s("div",bE,[f[146]||(f[146]=s("label",{for:"sabiduria"},"Sabidura:",-1)),oe(s("input",{id:"sabiduria","onUpdate:modelValue":f[25]||(f[25]=y=>K.value.sabiduria=y),type:"number",class:"form-control small-input",placeholder:"+0"},null,512),[[ge,K.value.sabiduria]])]),s("div",wE,[f[147]||(f[147]=s("label",{for:"carisma"},"Carisma:",-1)),oe(s("input",{id:"carisma","onUpdate:modelValue":f[26]||(f[26]=y=>K.value.carisma=y),type:"number",class:"form-control small-input",placeholder:"+0"},null,512),[[ge,K.value.carisma]])])])])]),s("div",yE,[f[149]||(f[149]=s("label",{for:"notas"},"Notas:",-1)),oe(s("textarea",{id:"notas","onUpdate:modelValue":f[27]||(f[27]=y=>K.value.notas=y),class:"form-control",rows:"3",placeholder:""},null,512),[[ge,K.value.notas]])]),s("div",CE,[s("button",{type:"button",onClick:f[28]||(f[28]=y=>S.value=!1),class:"btn btn-secondary"}," Cancelar "),f[150]||(f[150]=s("button",{type:"submit",class:"btn btn-primary"}," Crear Personaje ",-1))])],32)])])])):we("",!0),L.value&&E.value?($(),D("div",{key:3,class:"modal-overlay",onClick:f[49]||(f[49]=y=>L.value=!1)},[s("div",{class:"modal-content",onClick:f[48]||(f[48]=Ge(()=>{},["stop"]))},[s("div",xE,[f[152]||(f[152]=s("h3",null,"Editar Personaje",-1)),s("button",{onClick:f[31]||(f[31]=y=>L.value=!1),class:"btn-close"},f[151]||(f[151]=[s("i",{class:"bi bi-x-lg"},null,-1)]))]),s("div",_E,[s("form",{onSubmit:Ge(Ee,["prevent"])},[s("div",kE,[f[153]||(f[153]=s("label",{for:"editCharacterName"},"Nombre del Personaje",-1)),oe(s("input",{id:"editCharacterName","onUpdate:modelValue":f[32]||(f[32]=y=>E.value.name=y),type:"text",class:"form-control",required:""},null,512),[[ge,E.value.name]])]),s("div",SE,[f[154]||(f[154]=s("label",{for:"editCharacterMaxHp"},"HP Mximo",-1)),oe(s("input",{id:"editCharacterMaxHp","onUpdate:modelValue":f[33]||(f[33]=y=>E.value.maxHp=y),type:"number",class:"form-control",min:"1",required:""},null,512),[[ge,E.value.maxHp]])]),s("div",$E,[f[155]||(f[155]=s("label",{for:"editCharacterCurrentHp"},"HP Actual",-1)),oe(s("input",{id:"editCharacterCurrentHp","onUpdate:modelValue":f[34]||(f[34]=y=>E.value.currentHp=y),type:"number",class:"form-control",min:"0",max:E.value.maxHp,required:""},null,8,EE),[[ge,E.value.currentHp]])]),s("div",DE,[f[156]||(f[156]=s("label",{for:"editCharacterRegeneration"},"Regeneracin por Turno",-1)),oe(s("input",{id:"editCharacterRegeneration","onUpdate:modelValue":f[35]||(f[35]=y=>E.value.regeneration=y),type:"number",class:"form-control",min:"0"},null,512),[[ge,E.value.regeneration]])]),s("div",TE,[f[157]||(f[157]=s("label",{for:"editXp"},"XP:",-1)),oe(s("input",{id:"editXp","onUpdate:modelValue":f[36]||(f[36]=y=>E.value.xp=y),type:"text",class:"form-control"},null,512),[[ge,E.value.xp]])]),s("div",AE,[f[158]||(f[158]=s("label",{for:"editCa"},"CA (Clase de Armadura):",-1)),oe(s("input",{id:"editCa","onUpdate:modelValue":f[37]||(f[37]=y=>E.value.ca=y),type:"text",class:"form-control"},null,512),[[ge,E.value.ca]])]),s("div",IE,[f[159]||(f[159]=s("label",{for:"editResistencias"},"Resistencias:",-1)),oe(s("input",{id:"editResistencias","onUpdate:modelValue":f[38]||(f[38]=y=>E.value.resistencias=y),type:"text",class:"form-control"},null,512),[[ge,E.value.resistencias]])]),s("div",RE,[f[160]||(f[160]=s("label",{for:"editInmunidades"},"Inmunidades:",-1)),oe(s("input",{id:"editInmunidades","onUpdate:modelValue":f[39]||(f[39]=y=>E.value.inmunidades=y),type:"text",class:"form-control"},null,512),[[ge,E.value.inmunidades]])]),s("div",PE,[f[167]||(f[167]=s("h4",{style:{color:"#ecf0f1","margin-bottom":"15px"}},"Tiradas de Salvacin",-1)),s("div",HE,[s("div",OE,[s("div",BE,[f[161]||(f[161]=s("label",{for:"editFuerza"},"Fuerza:",-1)),oe(s("input",{id:"editFuerza","onUpdate:modelValue":f[40]||(f[40]=y=>E.value.fuerza=y),type:"number",class:"form-control small-input",placeholder:"+0"},null,512),[[ge,E.value.fuerza]])]),s("div",ME,[f[162]||(f[162]=s("label",{for:"editDestreza"},"Destreza:",-1)),oe(s("input",{id:"editDestreza","onUpdate:modelValue":f[41]||(f[41]=y=>E.value.destreza=y),type:"number",class:"form-control small-input",placeholder:"+0"},null,512),[[ge,E.value.destreza]])]),s("div",LE,[f[163]||(f[163]=s("label",{for:"editConstitucion"},"Constitucin:",-1)),oe(s("input",{id:"editConstitucion","onUpdate:modelValue":f[42]||(f[42]=y=>E.value.constitucion=y),type:"number",class:"form-control small-input",placeholder:"+0"},null,512),[[ge,E.value.constitucion]])])]),s("div",NE,[s("div",VE,[f[164]||(f[164]=s("label",{for:"editInteligencia"},"Inteligencia:",-1)),oe(s("input",{id:"editInteligencia","onUpdate:modelValue":f[43]||(f[43]=y=>E.value.inteligencia=y),type:"number",class:"form-control small-input",placeholder:"+0"},null,512),[[ge,E.value.inteligencia]])]),s("div",jE,[f[165]||(f[165]=s("label",{for:"editSabiduria"},"Sabidura:",-1)),oe(s("input",{id:"editSabiduria","onUpdate:modelValue":f[44]||(f[44]=y=>E.value.sabiduria=y),type:"number",class:"form-control small-input",placeholder:"+0"},null,512),[[ge,E.value.sabiduria]])]),s("div",FE,[f[166]||(f[166]=s("label",{for:"editCarisma"},"Carisma:",-1)),oe(s("input",{id:"editCarisma","onUpdate:modelValue":f[45]||(f[45]=y=>E.value.carisma=y),type:"number",class:"form-control small-input",placeholder:"+0"},null,512),[[ge,E.value.carisma]])])])])]),s("div",UE,[f[168]||(f[168]=s("label",{for:"editNotas"},"Notas:",-1)),oe(s("textarea",{id:"editNotas","onUpdate:modelValue":f[46]||(f[46]=y=>E.value.notas=y),class:"form-control",rows:"3"},null,512),[[ge,E.value.notas]])]),s("div",zE,[s("button",{type:"button",onClick:f[47]||(f[47]=y=>L.value=!1),class:"btn btn-secondary"}," Cancelar "),f[169]||(f[169]=s("button",{type:"submit",class:"btn btn-primary"}," Guardar Cambios ",-1))])],32)])])])):we("",!0),s("input",{ref_key:"fileInput",ref:R,type:"file",accept:".json",onChange:ye,style:{display:"none"}},null,544),C.value?($(),D("div",{key:4,class:"modal-overlay",onClick:f[54]||(f[54]=y=>C.value=!1)},[s("div",{class:"modal-content",onClick:f[53]||(f[53]=Ge(()=>{},["stop"]))},[s("div",qE,[f[171]||(f[171]=s("h3",null,"Configuracin de Crticos",-1)),s("button",{onClick:f[50]||(f[50]=y=>C.value=!1),class:"btn-close"},f[170]||(f[170]=[s("i",{class:"bi bi-x-lg"},null,-1)]))]),s("div",WE,[s("div",KE,[f[173]||(f[173]=s("label",{for:"critical-rule"},"Regla de Dao Crtico",-1)),oe(s("select",{id:"critical-rule","onUpdate:modelValue":f[51]||(f[51]=y=>w.value.rule=y),class:"form-control"},f[172]||(f[172]=[s("option",{value:"default"},"Regla por Defecto (Duplicar Dados)",-1),s("option",{value:"dad"},"Dao Masivo (DAD)",-1)]),512),[[Ht,w.value.rule]])]),w.value.rule==="dad"?($(),D("div",YE,[f[174]||(f[174]=s("label",{for:"character-level"},"Nivel del Personaje",-1)),oe(s("input",{type:"number",id:"character-level","onUpdate:modelValue":f[52]||(f[52]=y=>w.value.characterLevel=y),min:"1",max:"20",class:"form-control"},null,512),[[ge,w.value.characterLevel,void 0,{number:!0}]])])):we("",!0),s("div",{class:"modal-actions"},[s("button",{onClick:g,class:"btn btn-primary"},"Guardar")])])])])):we("",!0),B.value?($(),D("div",{key:5,class:"modal-overlay",onClick:f[59]||(f[59]=y=>B.value=!1)},[s("div",{class:"modal-content",onClick:f[58]||(f[58]=Ge(()=>{},["stop"]))},[s("div",XE,[f[176]||(f[176]=s("h3",null,"Importar Personajes",-1)),s("button",{onClick:f[55]||(f[55]=y=>B.value=!1),class:"btn-close"},f[175]||(f[175]=[s("i",{class:"bi bi-x-lg"},null,-1)]))]),s("div",GE,[s("div",JE,[s("div",{class:"import-option"},[f[178]||(f[178]=s("h4",null,"Opcin 1: Seleccionar Archivo",-1)),f[179]||(f[179]=s("p",null,"Selecciona un archivo JSON exportado previamente",-1)),s("button",{onClick:Q,class:"btn btn-primary"},f[177]||(f[177]=[s("i",{class:"bi bi-folder2-open"},null,-1),le(" Seleccionar Archivo ")]))]),f[182]||(f[182]=s("div",{class:"import-divider"},[s("span",null,"o")],-1)),s("div",QE,[f[180]||(f[180]=s("h4",null,"Opcin 2: Pegar JSON",-1)),f[181]||(f[181]=s("p",null,"Pega aqu el contenido JSON exportado",-1)),oe(s("textarea",{"onUpdate:modelValue":f[56]||(f[56]=y=>ee.value=y),class:"form-control",rows:"6",placeholder:"Pega aqu el JSON exportado..."},null,512),[[ge,ee.value]])])]),s("div",ZE,[s("button",{type:"button",onClick:f[57]||(f[57]=y=>B.value=!1),class:"btn btn-secondary"}," Cancelar "),s("button",{onClick:he,class:"btn btn-primary",disabled:!ee.value.trim()}," Importar desde Texto ",8,eD)])])])])):we("",!0),V.value?($(),D("div",{key:6,class:"modal-overlay",onClick:dt},[s("div",{class:"modal-content death-modal",onClick:f[62]||(f[62]=Ge(()=>{},["stop"]))},[s("div",tD,[f[184]||(f[184]=s("h3",null,"Personaje Derrotado!",-1)),s("button",{onClick:f[60]||(f[60]=y=>V.value=!1),class:"btn-close"},f[183]||(f[183]=[s("i",{class:"bi bi-x-lg"},null,-1)]))]),s("div",nD,[s("div",oD,[f[188]||(f[188]=s("div",{class:"death-icon"},"",-1)),s("p",null,[f[185]||(f[185]=le(" El personaje ")),s("strong",null,W(ae.value.name),1),f[186]||(f[186]=le(" ha sido derrotado! "))]),s("p",sD,[f[187]||(f[187]=le(" HP: ")),s("span",aD,W(ae.value.currentHp),1),le(" / "+W(ae.value.maxHp),1)]),f[189]||(f[189]=s("p",null,"Quin fue el hroe que lo derrot?",-1))]),s("div",rD,[f[190]||(f[190]=s("label",{for:"heroName"},"Nombre del Hroe:",-1)),oe(s("input",{id:"heroName","onUpdate:modelValue":f[61]||(f[61]=y=>j.value=y),type:"text",class:"form-control",placeholder:"Escribe el nombre del hroe...",onKeyup:xn(ce,["enter"])},null,544),[[ge,j.value]])]),s("div",iD,[s("button",{onClick:ce,class:"btn btn-primary",disabled:!j.value.trim()},f[191]||(f[191]=[s("i",{class:"bi bi-save"},null,-1),le(" Guardar ")]),8,lD),s("button",{onClick:De,class:"btn btn-secondary"}," Cancelar ")])])])])):we("",!0)]),T.value?($(),D("div",{key:3,class:"modal-overlay",id:"todo-list",onClick:f[66]||(f[66]=y=>T.value=!1)},[s("div",{class:"modal-content",onClick:f[65]||(f[65]=Ge(()=>{},["stop"]))},[s("div",cD,[f[193]||(f[193]=s("h3",null,"Lista de Tareas",-1)),s("button",{onClick:f[63]||(f[63]=y=>T.value=!1),class:"btn-close"},f[192]||(f[192]=[s("i",{class:"bi bi-x-lg"},null,-1)]))]),s("div",uD,[s("div",dD,[oe(s("input",{"onUpdate:modelValue":f[64]||(f[64]=y=>N.value=y),type:"text",class:"form-control",placeholder:"Nueva tarea",onKeyup:xn(We,["enter"])},null,544),[[ge,N.value]]),s("button",{onClick:We,class:"btn btn-primary"},"Agregar")]),s("ul",fD,[($(!0),D(Le,null,qe(H.value,y=>($(),D("li",{key:y.id},[oe(s("input",{type:"checkbox","onUpdate:modelValue":_e=>y.completed=_e,onChange:_e=>$t(y.id)},null,40,pD),[[ws,y.completed]]),s("span",{class:rt({completed:y.completed})},W(y.text),3),s("button",{onClick:_e=>Et(y.id),class:"btn btn-danger btn-sm"},"Eliminar",8,mD)]))),128))])])])])):we("",!0),u.value?($(),On(tx,{key:4,characters:ue(t).characters,players:ue(o),onClose:f[67]||(f[67]=y=>u.value=!1)},null,8,["characters","players"])):we("",!0)]))}},gD=Tt(hD,[["__scopeId","data-v-e1a0d2ca"]]),vD={class:"account-view-container fade-in"},bD={class:"account-sections"},wD={class:"account-section character-management-section"},yD={class:"section-content"},CD={class:"account-section import-section"},xD={class:"section-content"},_D={class:"file-upload-container"},kD={for:"file-upload",class:"file-upload-label"},SD={key:0,class:"preview-section"},$D=["disabled"],ED={__name:"AccountView",setup(e){const t=yt(),n=pe(""),o=pe(""),a=c=>{const u=c.target.files[0];if(!u)return;o.value=u.name;const p=new FileReader;p.onload=d=>{n.value=d.target.result},p.readAsText(u)},r=()=>{try{const c=t.exportData(),u=new Blob([c],{type:"application/json"}),p=URL.createObjectURL(u),d=document.createElement("a");d.href=p,d.download=`dnd-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(p),xe.fire({icon:"success",title:"Exportado!",text:"Copia de seguridad guardada correctamente.",timer:2e3,showConfirmButton:!1})}catch{xe.fire({icon:"error",title:"Error",text:"No se pudieron exportar los datos."})}},i=()=>{xe.fire({title:"Restaurar datos?",text:"Se reemplazarn todos los datos actuales por los del archivo.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#2ecc71",cancelButtonColor:"#d33",confirmButtonText:"S, restaurar",cancelButtonText:"Cancelar"}).then(c=>{if(c.isConfirmed){const{success:u,error:p}=t.importData(n.value);u?xe.fire({title:"Restaurado!",text:"Los datos se han cargado correctamente.",icon:"success",timer:1500,showConfirmButton:!1}):xe.fire({title:"Error",text:p||"El archivo no es vlido.",icon:"error"})}})},l=()=>{xe.fire({title:"Ests seguro?",text:"Se borrarn todos los personajes y configuraciones. No se puede deshacer.",icon:"error",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"S, borrar todo",cancelButtonText:"Cancelar"}).then(c=>{c.isConfirmed&&t.clearAllData()})};return(c,u)=>{const p=Ei("router-link");return $(),D("div",vD,[u[14]||(u[14]=s("div",{class:"account-header"},[s("h1",null,[s("i",{class:"bi bi-person-badge-fill"}),le(" Gestin de Cuenta")]),s("p",{class:"account-subtitle"},"Administra tus datos y configuraciones")],-1)),s("div",bD,[s("div",wD,[u[2]||(u[2]=s("div",{class:"section-header"},[s("h2",null,[s("i",{class:"bi bi-people-fill"}),le(" Gestor de Personajes")])],-1)),s("div",yD,[u[1]||(u[1]=s("p",null,"Administra todos tus personajes: crea, elimina, importa, exporta y selecciona cul quieres usar.",-1)),ft(p,{to:"/character-manager",class:"btn btn-primary"},{default:Kn(()=>u[0]||(u[0]=[s("i",{class:"bi bi-folder-symlink"},null,-1),s("span",null,"Ir al Gestor de Personajes",-1)])),_:1})])]),s("div",{class:"account-section export-section"},[u[5]||(u[5]=s("div",{class:"section-header"},[s("h2",null,[s("i",{class:"bi bi-cloud-download-fill"}),le(" Exportar Cuenta Completa")])],-1)),s("div",{class:"section-content"},[u[4]||(u[4]=s("p",null,"Guarda una copia de seguridad de todos tus personajes y configuraciones en un archivo JSON.",-1)),s("button",{onClick:r,class:"btn btn-primary"},u[3]||(u[3]=[s("i",{class:"bi bi-download"},null,-1),s("span",null,"Descargar Copia de Seguridad",-1)]))])]),s("div",CD,[u[10]||(u[10]=s("div",{class:"section-header"},[s("h2",null,[s("i",{class:"bi bi-cloud-upload-fill"}),le(" Importar Datos")])],-1)),s("div",xD,[u[9]||(u[9]=s("p",null,[le("Restaura tus datos desde un archivo de copia de seguridad. "),s("strong",null,"Esto reemplazar los datos actuales.")],-1)),s("div",_D,[s("label",kD,[u[6]||(u[6]=s("i",{class:"bi bi-folder2-open"},null,-1)),s("span",null,W(o.value||"Seleccionar archivo JSON..."),1)]),s("input",{id:"file-upload",type:"file",accept:".json",onChange:a,class:"file-input"},null,32)]),n.value?($(),D("div",SD,u[7]||(u[7]=[s("i",{class:"bi bi-check-circle-fill"},null,-1),s("span",null,"Archivo cargado y listo para importar",-1)]))):we("",!0),s("button",{onClick:i,disabled:!n.value,class:"btn btn-success"},u[8]||(u[8]=[s("i",{class:"bi bi-upload"},null,-1),s("span",null,"Restaurar Datos",-1)]),8,$D)])]),s("div",{class:"account-section danger-section"},[u[13]||(u[13]=s("div",{class:"section-header danger-header"},[s("h2",null,[s("i",{class:"bi bi-exclamation-triangle-fill"}),le(" Zona de Peligro")])],-1)),s("div",{class:"section-content"},[u[12]||(u[12]=s("p",null,[le("Eliminar todos los datos guardados en este navegador. "),s("strong",null,"Esta accin no se puede deshacer.")],-1)),s("button",{onClick:l,class:"btn btn-danger"},u[11]||(u[11]=[s("i",{class:"bi bi-trash-fill"},null,-1),s("span",null,"Borrar Todos los Datos",-1)]))])])])])}}},DD=Tt(ED,[["__scopeId","data-v-0ab84876"]]),TD={class:"manager-container fade-in"},AD={class:"manager-section"},ID={class:"section-content"},RD={key:0,class:"character-list"},PD={class:"character-info"},HD={class:"character-name"},OD={class:"character-actions"},BD=["onClick","disabled"],MD=["onClick"],LD=["onClick"],ND={key:1,class:"no-characters-message"},VD={__name:"CharacterManager",setup(e){const t=yt(),n=Eo(),o=js(),a=Je(()=>t.accountData.characters),r=Je(()=>t.accountData.activeCharacterId),i=d=>{n.setActiveCharacter(d),xe.fire({toast:!0,position:"top-end",icon:"success",title:"Personaje cargado",showConfirmButton:!1,timer:1500,timerProgressBar:!0})},l=()=>{const d=ht(),m={id:d,characterData:{character:{isConfigured:!1,name:"Nuevo Personaje"},turn:{current:0,isActive:!1},logs:[]},attacks:[],passiveDamages:[],counters:[],characterState:[]};t.accountData.characters.push(m),n.setActiveCharacter(d),o.push("/config")},c=d=>{xe.fire({title:"Ests seguro?",text:"Esta accin no se puede deshacer.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"S, brralo!",cancelButtonText:"Cancelar"}).then(m=>{if(m.isConfirmed){if(t.accountData.characters=t.accountData.characters.filter(v=>v.id!==d),t.accountData.activeCharacterId===d){const v=t.accountData.characters.length>0?t.accountData.characters[0].id:null;n.setActiveCharacter(v)}else t.saveDataToLocalStorage();xe.fire("Eliminado!","El personaje ha sido eliminado.","success")}})},u=d=>{const m=a.value.find(v=>v.id===d);if(m){const v=JSON.stringify(m,null,2),C="data:application/json;charset=utf-8,"+encodeURIComponent(v),w=`${m.characterData.character.name||"character"}.json`,g=document.createElement("a");g.setAttribute("href",C),g.setAttribute("download",w),g.click()}},p=()=>{const d=document.createElement("input");d.type="file",d.accept=".json",d.onchange=m=>{const v=m.target.files[0],C=new FileReader;C.onload=w=>{try{const g=w.target.result,S=JSON.parse(g);S.id&&S.characterData?(S.id=ht(),t.accountData.characters.push(S),t.saveDataToLocalStorage(),xe.fire("xito!","Personaje importado correctamente.","success")):xe.fire("Error","El archivo no tiene el formato de personaje esperado.","error")}catch{xe.fire("Error","No se pudo leer o procesar el archivo.","error")}},C.readAsText(v,"UTF-8")},d.click()};return(d,m)=>($(),D("div",TD,[m[9]||(m[9]=s("div",{class:"manager-header"},[s("h1",null,[s("i",{class:"bi bi-people-fill"}),le(" Gestor de Personajes")]),s("p",{class:"manager-subtitle"},"Administra, crea, carga y comparte tus personajes")],-1)),s("div",AD,[m[5]||(m[5]=s("div",{class:"section-header"},[s("h2",null,[s("i",{class:"bi bi-person-lines-fill"}),le(" Mis Personajes")])],-1)),s("div",ID,[a.value.length>0?($(),D("ul",RD,[($(!0),D(Le,null,qe(a.value,v=>($(),D("li",{key:v.id,class:rt(["character-item",{active:v.id===r.value}])},[s("div",PD,[m[0]||(m[0]=s("i",{class:"bi bi-person-circle character-icon"},null,-1)),s("span",HD,W(v.characterData.character.name||"Personaje sin nombre"),1)]),s("div",OD,[s("button",{onClick:C=>i(v.id),class:"btn btn-sm btn-primary",disabled:v.id===r.value},[m[1]||(m[1]=s("i",{class:"bi bi-check-circle-fill"},null,-1)),s("span",null,W(v.id===r.value?"Cargado":"Cargar"),1)],8,BD),s("button",{onClick:C=>u(v.id),class:"btn btn-sm btn-secondary"},m[2]||(m[2]=[s("i",{class:"bi bi-box-arrow-up"},null,-1),s("span",null,"Exportar",-1)]),8,MD),s("button",{onClick:C=>c(v.id),class:"btn btn-sm btn-danger"},m[3]||(m[3]=[s("i",{class:"bi bi-trash-fill"},null,-1),s("span",null,"Eliminar",-1)]),8,LD)])],2))),128))])):($(),D("div",ND,m[4]||(m[4]=[s("i",{class:"bi bi-emoji-dizzy"},null,-1),s("p",null,"No tienes ningn personaje todava. Crea uno para empezar!",-1)])))])]),s("div",{class:"manager-section"},[m[8]||(m[8]=s("div",{class:"section-header"},[s("h2",null,[s("i",{class:"bi bi-plus-circle-fill"}),le(" Nuevas Aventuras")])],-1)),s("div",{class:"section-content action-buttons"},[s("button",{onClick:l,class:"btn btn-success"},m[6]||(m[6]=[s("i",{class:"bi bi-person-plus-fill"},null,-1),s("span",null,"Crear Nuevo Personaje",-1)])),s("button",{onClick:p,class:"btn btn-info"},m[7]||(m[7]=[s("i",{class:"bi bi-box-arrow-down"},null,-1),s("span",null,"Importar Personaje",-1)]))])])]))}},jD=Tt(VD,[["__scopeId","data-v-a8b1242e"]]),FD={class:"character-manager-view"},UD={__name:"CharacterManagerView",setup(e){return(t,n)=>($(),D("div",FD,[ft(jD)]))}},zD=Tt(UD,[["__scopeId","data-v-22bb6cd8"]]),qD=[{path:"/",component:Lg,name:"home"},{path:"/account",component:DD,name:"account"},{path:"/character-manager",component:zD,name:"character-manager"},{path:"/config",component:Z1,name:"config"},{path:"/character",component:rC,name:"character"},{path:"/logs",component:BC,name:"logs"},{path:"/dm",component:gD,name:"dm"},{path:"/:pathMatch(.*)*",redirect:"/"}],WD=Sg({history:eg("/DyD/"),routes:qD}),KD={class:"app-header"},YD={class:"navbar"},XD={class:"navbar-brand"},GD={__name:"AppHeader",setup(e){const t=Eo(),n=pe(!1),o=Je(()=>t.character.isConfigured),a=()=>{n.value=!n.value},r=()=>{n.value=!1};return(i,l)=>{const c=Ei("router-link");return $(),D("header",KD,[l[7]||(l[7]=s("div",{class:"header-background"},[s("div",{class:"header-glow"}),s("div",{class:"header-pattern"})],-1)),s("nav",YD,[s("div",XD,[ft(c,{to:"/",class:"brand-link"},{default:Kn(()=>l[0]||(l[0]=[s("div",{class:"brand-icon-container"},[s("span",{class:"brand-icon"},""),s("div",{class:"brand-icon-glow"})],-1),s("span",{class:"brand-text"},"D&D Life Tracker",-1)])),_:1})]),s("button",{onClick:a,class:rt(["mobile-menu-toggle",{active:n.value}]),"aria-label":"Toggle mobile menu"},l[1]||(l[1]=[s("span",{class:"hamburger-line"},null,-1),s("span",{class:"hamburger-line"},null,-1),s("span",{class:"hamburger-line"},null,-1)]),2),s("div",{class:rt(["navbar-nav",{"mobile-open":n.value}])},[ft(c,{to:"/",class:"nav-link","active-class":"active",onClick:r},{default:Kn(()=>l[2]||(l[2]=[s("div",{class:"nav-icon-container"},[s("i",{class:"bi bi-house-door"})],-1),s("span",null,"Inicio",-1)])),_:1}),o.value?($(),On(c,{key:0,to:"/character",class:"nav-link","active-class":"active",onClick:r},{default:Kn(()=>l[3]||(l[3]=[s("div",{class:"nav-icon-container"},[s("i",{class:"bi bi-person"})],-1),s("span",null,"Personaje",-1)])),_:1})):($(),On(c,{key:1,to:"/config",class:"nav-link","active-class":"active",onClick:r},{default:Kn(()=>l[4]||(l[4]=[s("div",{class:"nav-icon-container"},[s("i",{class:"bi bi-plus-circle"})],-1),s("span",null,"Crear Personaje",-1)])),_:1})),ft(c,{to:"/dm",class:"nav-link","active-class":"active",onClick:r},{default:Kn(()=>l[5]||(l[5]=[s("div",{class:"nav-icon-container"},[s("i",{class:"bi bi-shield-fill"})],-1),s("span",null,"DM",-1)])),_:1}),ft(c,{to:"/account",class:"nav-link","active-class":"active",onClick:r},{default:Kn(()=>l[6]||(l[6]=[s("div",{class:"nav-icon-container"},[s("i",{class:"bi bi-person-badge"})],-1),s("span",null,"Cuenta",-1)])),_:1})],2)])])}}},JD=Tt(GD,[["__scopeId","data-v-88619630"]]),QD={class:"app-container"},ZD={class:"main-content"},eT={__name:"App",setup(e){const t=yt(),{isLoading:n}=_o(t);return qt(()=>{t.loadInitialData()}),cn(n,o=>{o||Eo().loadAllCharacterData()}),(o,a)=>{const r=Ei("RouterView");return $(),D("div",QD,[ft(JD),s("main",ZD,[ft(r)])])}}},Gi=hh(eT),tT=bh();Gi.use(tT);const nT=yt();nT.loadInitialData();Gi.use(WD);Gi.mount("#app");
